(this["webpackJsonp"]=this["webpackJsonp"]||[]).push([["clip"],{1073:function(e,t,i){"use strict";i(806)},1074:function(e,t,i){t=e.exports=i(2)(!1),t.push([e.i,".upload-board-wrapper[data-v-76ebc1d0]{width:5.44rem;height:4.90667rem;background-color:#fff;border:1px solid rgba(0,0,0,.05);-webkit-box-shadow:0 .09333rem .64rem rgba(0,0,0,.03);box-shadow:0 .09333rem .64rem rgba(0,0,0,.03)}.upload-board-wrapper[data-v-76ebc1d0],.upload-board-wrapper .upload-board[data-v-76ebc1d0]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.upload-board-wrapper .upload-board[data-v-76ebc1d0]{-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-top:.2rem;width:5.04rem;height:2.66667rem;background-image:url(https://st0.dancf.com/static/02/202111120637-c97c.png);background-position:50%;background-size:100%}.upload-board-wrapper .upload-board img[data-v-76ebc1d0]{width:.21333rem}.upload-board-wrapper .upload-board p[data-v-76ebc1d0]{margin-top:.28rem;font-family:AirbnbCerealBold;font-size:.21333rem;text-transform:uppercase;color:#000;opacity:.7}.upload-board-wrapper .upload-btn[data-v-76ebc1d0]{margin-top:.37333rem;width:4.69333rem;line-height:.90667rem;background-color:#000;color:#fff;font-family:AirbnbCerealBold;font-weight:700;font-size:.24rem;text-align:center;cursor:pointer}.upload-board-wrapper .upload-board-desc[data-v-76ebc1d0]{margin-top:.24rem;font-family:AirbnbCerealBook;font-size:.21333rem;color:#000;opacity:.5}.upload-board-wrapper .upload-board-desc .url[data-v-76ebc1d0]{text-decoration:underline;cursor:pointer}",""])},1075:function(e,t,i){"use strict";i(807)},1076:function(e,t,i){t=e.exports=i(2)(!1),t.push([e.i,".clip-static{background-color:#f1f5f6}.clip-static__main-bg-img{background:rgba(229,237,239,.1)}.clip-static__main{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;padding-top:0;background-size:.85333rem .85333rem}.clip-static__main-service-url{text-decoration:underline;cursor:pointer;color:#777}.clip-static__main-content{-webkit-box-flex:1;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;min-height:calc(100vh - .90667rem);width:16rem;margin:auto;padding-top:1.76rem}.clip-static__main-content h1{font-size:.42667rem;font-weight:700;font-family:AirbnbCerealBold;text-align:center;line-height:1.3}.clip-static__main-content span{margin-top:.48rem;margin-bottom:1.76rem;font-family:AirbnbCerealBook;font-size:.16rem;color:#7a7a7a}@media screen and (max-width:479px){.clip-static{background-color:#f1f5f6}.clip-static__main-bg-img{background:rgba(229,237,239,.1)}.clip-static__main{background-size:.53333rem .53333rem}.clip-static__main-service-url{text-decoration:underline;cursor:pointer;color:#777}.clip-static__main-wap{min-height:calc(100vh - 1.54667rem)}.clip-static__main-wap p{width:3.50667rem;margin:0 auto;margin-top:.29333rem;margin-bottom:1.77333rem;text-align:center}.clip-static__main-wap-content{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;width:4.46667rem;min-height:4rem;background-color:#fff;margin:0 auto;margin-top:2.21333rem}.clip-static__main-wap-content h1{margin:.8rem 0 0 0;width:3.26667rem;font-size:.30667rem;text-align:center;font-family:AirbnbCerealBold}.clip-static__main-wap-content .upload-file-button{width:3.93333rem;height:.77333rem;margin-top:.98667rem;margin-bottom:.61333rem;font-size:.21333rem;cursor:pointer;background-color:#000;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;color:#fff;font-family:AirbnbCerealBold}}@media screen and (-webkit-min-device-pixel-ratio:2) and (max-width:479px){.clip-static{background-color:#f1f5f6}.clip-static__main-bg-img{background:rgba(229,237,239,.1)}}",""])},1316:function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isMobile&&e.showEditor?i("WapEditor",{attrs:{recordId:e.recordId},on:{clearRecordId:e.clearRecordId}}):e.showEditor?i("ClipEditor",{attrs:{recordId:e.recordId,downloaded:e.downloaded,processing:e.processing},on:{"update:downloaded":function(t){e.downloaded=t},"update:processing":function(t){e.processing=t}}}):i("ClipStatic",{on:{selectCallback:e.selectCallback}})},a=[],n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"clip-static"},[i("Header"),i("div",{staticClass:"clip-static__main clip-static__main-bg-img"},[e.isMobile?i("div",{staticClass:"clip-static__main-wap"},[i("div",{staticClass:"clip-static__main-wap-content"},[i("h1",[e._v(e._s(e.$t("export.clipStatic.h1")))]),i("ImagePicker",{ref:"imagePicker",on:{change:e.toMatting,error:e.onErr}},[i("div",{staticClass:"upload-file-button",on:{click:e.showFileInput}},[e._v("\n                        "+e._s(e.$t("fcHome.upload.button"))+"\n                    ")])]),i("MattingEntry",{ref:"mattingEntry",on:{selectCallback:function(t){return e.$emit("selectCallback")}}})],1),i("p",[e._v("\n                "+e._s(e.$t("export.clipStatic.tips"))+"\n                "),i("span",{staticClass:"clip-static__main-service-url",on:{click:e.goServiceUrl}},[e._v("\n                    "+e._s(e.$t("export.clipStatic.service"))+"\n                ")])])]):i("div",{staticClass:"clip-static__main-content"},[i("h1",{style:{width:e.h1Width}},[e._v(e._s(e.$t("export.clipStatic.h1")))]),i("UploadFile",{ref:"uploadFile",on:{selectCallback:function(t){return e.$emit("selectCallback")}}}),i("span",[e._v("\n                "+e._s(e.$t("export.clipStatic.tips"))+"\n                "),i("span",{staticClass:"clip-static__main-service-url",on:{click:e.goServiceUrl}},[e._v("\n                    "+e._s(e.$t("export.clipStatic.service"))+"\n                ")])])],1)]),i("FocoFooter")],1)},r=[],l=i(463),s=i(469),c=i(202),d=i(203),p=i(474),u=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"upload-board-wrapper"},[i("div",{staticClass:"upload-board"},[i("img",{attrs:{src:"https://st0.dancf.com/static/02/202111161023-1937.png",alt:""}}),i("p",[e._v(e._s(e.$t("fcHome.upload.dropAFile")))])]),i("ImagePicker",{ref:"imagePicker",attrs:{dragAndDrop:!0,clipboard:!0,uploadApi:e.uploadByLink,"use-custom-prompt":!0},on:{change:e.toMatting,dragover:e.showDropModal,dragleave:e.hideDropModal,drop:e.hideDropModal,linkprogress:e.linkprogress,error:e.onErr,changeLink:e.handleInputByLink}},[i("div",{staticClass:"upload-btn",on:{click:e.showFileInput}},[e._v(e._s(e.$t("fcHome.upload.button")))])]),i("div",{staticClass:"upload-board-desc"},[i("strong",[e._v(e._s(e.isWindows?"Ctrl ":"Command")+" +")]),i("strong",[e._v("V")]),e._v("\n        "+e._s(e.$t("fcHome.upload.copypaste"))+"\n        "),i("strong",{staticClass:"url",on:{click:e.handleLink}},[e._v("URL")])]),i("LoadingDialog",{attrs:{show:e.downloading,title:e.$t("upload.link"),progress:e.progress}}),i("MattingEntry",{ref:"mattingEntry",on:{selectCallback:function(t){return e.$emit("selectCallback")}}}),i("DropModal",{attrs:{show:e.dropModalVisible,title:e.$t("upload.dropModal.title"),desc:e.$t("upload.dropModal.desc")}})],1)},m=[],g=i(458),b=i(116),f=i(558),h=i(471),w=i(510),_=i(119),k=i(460),x={name:"uploadBoard",components:{ImagePicker:g["ImagePicker"],LoadingDialog:h["a"],DropModal:w["a"],MattingEntry:p["a"]},data(){return{dropModalVisible:!1,downloading:!1,progress:0,ImgMngrVisible:!1,batchMode:0,clip_location_path:{input:6,link:7,drop:8,paste:9}}},computed:{uploadByLink(){return function(e){return b["a"].uploadByLink({url:e,type:"image",module:f["a"]})}}},methods:{onErr(e,t){"link"===t&&l["a"].sendEvent("single","url_import_fail",t),this.$error(e.message),s["a"].upload({upload_elapsed_time:Date.now()-window.startUploadTime,file_size:window.startUploadSize,upload_state:"失败",upload_location:Object(k["b"])(this.clip_location_path[t]),upload_type:t,downstream_web:this.$route.path})},showFileInput(){const e=6;l["a"].sendEvent("single","upload_click","clip_banner",!1),_["a"].page({source:Object(k["b"])(e)})},handleLink(){const e=7;_["a"].page({source:Object(k["b"])(e)}),this.$refs.imagePicker.$children[0].handleLink()},showDropModal(){this.dropModalVisible=!this.ImgMngrVisible},handleInputByLink(e,t,i){this.$globals.userInputImageUrl=i,this.toMatting(e,t)},toMatting(e,t){const i=this.clip_location_path[t];t&&"link"!==t&&(window.startUploadTime=Date.now(),window.startUploadSize="object"===typeof e?e[0].size:null,s["a"].upload({upload_state:"start",upload_location:Object(k["b"])(i),upload_num:1,file_size:"object"===typeof e?e[0].size:null,upload_type:t,downstream_web:this.$route.path})),e.length&&this.$refs.mattingEntry.onImageSelect(e,t,i)},hideDropModal(){this.dropModalVisible=!1},linkprogress(e){if(0===e){const e=this.clip_location_path.link;l["a"].sendEvent("single","url_import_start","url"),l["a"].sendEvent("single","upload_start","url"),window.startUploadTime=Date.now(),s["a"].upload({upload_state:"start",upload_location:Object(k["b"])(e),upload_num:1,upload_type:"url",downstream_web:this.$route.path}),window._inputImgFrom=e}const t=e<100;this.progress=t?50:100,this.$nextTick(()=>{this.downloading=t})}}},y=x,v=(i(1073),i(0)),$=Object(v["a"])(y,u,m,!1,null,"76ebc1d0",null),I=$.exports,j=i(121),M={name:"clip-static",components:{Header:c["a"],UploadFile:I,FocoFooter:d["a"],ImagePicker:g["ImagePicker"],MattingEntry:p["a"]},data(){return{clip_location_path:{input:6,link:7,drop:8,paste:9}}},computed:{h1Width:function(){return"pt-br"===this.$i18n.locale?"370px":"id"===this.$i18n.locale?"500px":"335px"}},methods:{goServiceUrl(){const e=this.$router.resolve({path:"/terms-and-conditions"});window.open(e.href,"_blank")},showFileInput(){l["a"].sendEvent("single","upload_click","clip_banner",!1),j["a"].page({source:"clip-upload"})},toMatting(e,t){const i=this.clip_location_path[t];t&&(window.startUploadTime=Date.now(),window.startUploadSize="object"===typeof e?e[0].size:null,s["a"].upload({upload_state:"start",upload_location:Object(k["b"])(i),file_size:"object"===typeof e?e[0].size:null,upload_type:t,upload_num:1,downstream_web:this.$route.path})),e.length&&this.$refs.mattingEntry.onImageSelect(e,t,i)},onErr(e,t){this.$error(e.message),s["a"].upload({upload_elapsed_time:Date.now()-window.startUploadTime,file_size:window.startUploadSize,upload_state:"fail",upload_num:1,upload_location:Object(k["b"])(this.clip_location_path[t]),upload_type:t,downstream_web:this.$route.path})}}},z=M,E=(i(1075),Object(v["a"])(z,n,r,!1,null,null,null)),C=E.exports,O=i(502),D=i(579),S={name:"clip-entry",components:{ClipStatic:C,ClipEditor:()=>Promise.all([i.e(0),i.e(1),i.e(2),i.e(3),i.e(4)]).then(i.bind(null,1315)),WapEditor:()=>Promise.all([i.e(1),i.e(6)]).then(i.bind(null,1312))},beforeRouteLeave(e,t,i){if(this.isMobile||!this.showEditor)return void i();if(this.downloaded)return void i();const o=this.processing?this.$t("fdDialog.uploadingLeave"):this.$t("fdDialog.downloadLeave");D["a"].open({title:"",content:o,okText:this.$t("clearAllDialog.cancelText"),cancelText:this.$t("clearAllDialog.okText"),onCancel:()=>i(),onOk:()=>i(!1)})},data(){return{processing:!0,downloaded:!1,showEditor:!1,recordId:null}},mounted(){const e=this.isMobile?Object(O["b"])("wap_record_id"):Object(O["b"])("record_id");("_lastImageFile"in window||e)&&(this.recordId=e,this.showEditor=!0)},methods:{selectCallback(){this.showEditor=!0},clearRecordId(){this.recordId="",this.showEditor=!1}}},P=S,F=Object(v["a"])(P,o,a,!1,null,null,null);t["default"]=F.exports},469:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var o=i(23);const a=Object(o["a"])({upload({upload_state:e,upload_location:t,upload_type:i,downstream_web:o,upload_elapsed_time:a,file_size:n,upload_speed:r,upload_num:l}){return{event:"editor_upload",event_id:31035,upload_state:e,upload_type:"input"===i?"upload":i,upload_location:t,upload_num:l,upload_elapsed_time:a,file_size:n,upload_speed:r,downstream_web:o}}})},474:function(e,t,i){"use strict";var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("ImagePicker",{ref:"imageUploader",on:{change:e.toMatting,error:e.handleImagePickerError}}),i("LoadingDialog",{attrs:{show:e.loading.show,progress:e.loading.progress,title:e.$t("loadingEditor")}})],1)},a=[],n=i(4),r=i(458),l=i(471),s=i(463),c=i(469),d=i(460),p=n["default"].extend({components:{ImagePicker:r["ImagePicker"],LoadingDialog:l["a"]},data(){return{from:0,loading:{show:!1,progress:0}}},beforeDestroy(){this.loading.show=!1},methods:{showFileDialog(e){this.from=e,this.$refs.imageUploader.showFileDialog()},toMatting(e,t){this.onImageSelect(e,t,this.from,!0)},onImageSelect(e,t,i,o){window._lastImageFile=e,window._uploadMethod="link"===t?"url":t;let a="/clip";if("en"!==this.$i18n.locale&&(a=`/${this.$i18n.locale}${a}`),this.isMobile){const t=e[0].name.replace(/\.png|\.jpe?g/,"");window.__fileName=t,window.__mattingImage=e[0]}if(o){i=this.from;const o="start";window.startUploadTime=Date.now(),window.startUploadSize="object"===typeof e?e[0].size:null,c["a"].upload({upload_state:o,upload_location:d["a"][i],upload_type:t,file_size:"object"===typeof e?e[0].size:null,upload_num:1,downstream_web:this.$route.path}),s["a"].sendEvent("single","upload_start",t)}window._inputImgFrom=i,"/clip"===this.$route.path||this.$route.path===`/${this.$i18n.locale}/clip`?this.$emit("selectCallback"):this.$router.push({path:a})},handleImagePickerError(e){this.$error(e.message)}}}),u=p,m=i(0),g=Object(m["a"])(u,o,a,!1,null,null,null);t["a"]=g.exports},558:function(e,t,i){"use strict";i.d(t,"a",(function(){return p})),i.d(t,"b",(function(){return g}));var o=i(116),a=i(771),n=i.n(a),r=i(64);function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function s(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach((function(t){c(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const d=new n.a({baseURL:"/api/filems"}),p="matting",u={"svg+xml":"svg",jpeg:"jpg"};function m(e){let t=e.name;t||(t=e.type.split("/")[1]);const i=t.slice(t.lastIndexOf(".")+1);return u[i]||i||"unknow"}const g={getKey(e,t){const i=location.pathname.split("/");if(t||(t=[p,...i.slice(1,3)].join("/").replace(/\/*$/,"/")),"/"===t.slice(-1)){const i=new Date;let o=i.getFullYear().toString();o+=("00"+(i.getMonth()+1)).slice(-2),o+=("00"+i.getDate()).slice(-2),o+="-",o+=("00"+i.getHours()).slice(-2),o+=("00"+i.getMinutes()).slice(-2),o+=("00"+i.getSeconds()).slice(-2),o+="-"+Math.random().toString(16).slice(-4),o+="."+this.getExtByFile(e),t+=o}return t},getExtByFile(e){let t=e.name;t||(t=e.type.split("/")[1]);const i=t.slice(t.lastIndexOf(".")+1);return u[i]||i||"unknown"},getBaseUrl(e){return{oss:"https://st-gdx.dancf.com/",s3:"https://foco-clip.dancf.com/"}[e]},async getToken(e,t,i="oss"){return o["a"].createUploadToken({type:i,file_type:t,key:e}).then(e=>e.data)},getFormData(e="oss",t){const i=new FormData,o={oss:[["key",t.key],["policy",t.policy],["Signature",t.signature],["OSSAccessKeyId",t.access_key],["success_action_status","200"]],s3:[["key",t.key],["policy",t.policy],["acl",t.acl],["x-amz-meta-uuid",t["x-amz-meta-uuid"]],["x-amz-server-side-encryption",t["x-amz-server-side-encryption"]],["x-amz-credential",t["x-amz-credential"]],["x-amz-algorithm",t["x-amz-algorithm"]],["x-amz-date",t["x-amz-date"]],["x-amz-signature",t["x-amz-signature"]]]}[e];return o.forEach(e=>{i.append(e[0],e[1])}),i},async upload(e,t={}){const i=/\.(?:png|jpe?g|gif|svg)$/i,o=await r["a"].getAccessToken();return t=Object.assign({token:o,timeout:3e5,dataMime:e.type,uid:Math.random().toString(),isAccelerate:!0},t),t.compress=i.test(e.type),d.upload(e,m(e),s(s({},t),{},{onProgress(e){t.onProgress&&t.onProgress(e.loaded/e.total*100)}})).then(e=>({url:e.Location})).catch(e=>{throw e})}}},587:function(e,t){},775:function(e,t){},776:function(e,t){},806:function(e,t,i){var o=i(1074);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var a=i(3).default;a("3cba410c",o,!0,{sourceMap:!1})},807:function(e,t,i){var o=i(1076);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var a=i(3).default;a("08140b8d",o,!0,{sourceMap:!1})}}]);