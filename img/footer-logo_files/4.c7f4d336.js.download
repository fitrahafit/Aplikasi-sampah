(this["webpackJsonp"]=this["webpackJsonp"]||[]).push([[4],{1284:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNzQiIGhlaWdodD0iNzQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMSAxKSIgc3Ryb2tlPSIjMDAwMDAwIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxjaXJjbGUgc3Ryb2tlLXdpZHRoPSIyIiBjeD0iMzYiIGN5PSIzNiIgcj0iMzUiLz48cGF0aCBzdHJva2Utd2lkdGg9IjQiIGQ9Ik0yMCAzNS4yNWwxMSAxMUw1MS4yNSAyNiIvPjwvZz48L3N2Zz4="},1285:function(t,e,i){"use strict";i(884)},1286:function(t,e,i){e=t.exports=i(2)(!1),e.push([t.i,".gd-modal__wrapper{position:absolute;top:0;right:0;bottom:0;left:0;color:#606266}.gd-modal__wrapper::-webkit-scrollbar{width:6px;height:6px}.gd-modal__wrapper::-webkit-scrollbar-thumb{border-radius:3px;background-color:#e1e5f5}.gd-modal__wrapper::-webkit-scrollbar-track{border-radius:3px}.gd-modal__wrapper--overlay{background:hsla(0,0%,100%,.8)}.gd-modal__wrapper--centered{text-align:center}.gd-modal__wrapper--centered:before{content:\"\";display:inline-block;height:100%;vertical-align:middle;width:0}.gd-modal__wrapper--centered .gd-modal{text-align:left;vertical-align:middle;display:inline-block}.gd-modal{margin:0 auto;position:relative;outline:0;background:#fff;-webkit-box-shadow:0 2px 8px rgba(160,160,180,.4);box-shadow:0 2px 8px rgba(160,160,180,.4);-webkit-box-sizing:border-box;box-sizing:border-box;padding:40px 40px 0 40px}.gd-modal--dark{background:#000;color:#fff}.gd-modal__header{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.gd-modal__title{font-size:22px;color:#333;font-weight:700}.gd-modal__close{cursor:pointer;position:absolute;right:20px;top:20px;opacity:.6;font-size:16px;color:#aaa}.gd-modal__close:hover{opacity:1}.gd-modal__close--new{width:1.2em;height:1.2em;background:url(\"data:image/svg+xml;charset=utf-8,%3Csvg class='icon' viewBox='0 0 1024 1024' xmlns='http://www.w3.org/2000/svg' width='200' height='200' fill='%23999'%3E%3Cdefs%3E%3Cstyle/%3E%3C/defs%3E%3Cpath d='M810.667 273.493l-60.16-60.16L512 451.84 273.493 213.333l-60.16 60.16L451.84 512 213.333 750.507l60.16 60.16L512 572.16l238.507 238.507 60.16-60.16L572.16 512z'/%3E%3C/svg%3E\");background-size:contain}.gd-modal__footer{padding:0 0 40px 0}.gd-modal__body{margin:16px 0}.gd-modal__buttons{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-webkit-flex-flow:row-reverse;-ms-flex-flow:row-reverse;flex-flow:row-reverse}.gd-modal-fade-enter-active{-webkit-animation:gd-modal-fade-in .3s;animation:gd-modal-fade-in .3s}.gd-modal-fade-leave-active{-webkit-animation:gd-modal-fade-out .3s;animation:gd-modal-fade-out .3s}@-webkit-keyframes gd-modal-fade-in{0%{-webkit-transform:translate3d(0,-40px,0);transform:translate3d(0,-40px,0);opacity:0}to{opacity:1}}@keyframes gd-modal-fade-in{0%{-webkit-transform:translate3d(0,-40px,0);transform:translate3d(0,-40px,0);opacity:0}to{opacity:1}}@-webkit-keyframes gd-modal-fade-out{0%{opacity:1}to{-webkit-transform:translate3d(0,-20px,0);transform:translate3d(0,-20px,0);opacity:0}}@keyframes gd-modal-fade-out{0%{opacity:1}to{-webkit-transform:translate3d(0,-20px,0);transform:translate3d(0,-20px,0);opacity:0}}",""])},1287:function(t,e,i){"use strict";i(885)},1288:function(t,e,i){e=t.exports=i(2)(!1),e.push([t.i,".dialog-matting-exporter .gd-modal{border-radius:4px;-webkit-box-sizing:border-box;box-sizing:border-box;padding-bottom:1px;background:transparent}.dialog-matting-exporter .gd-modal__body{margin:0}.dialog-matting-exporter .gd-modal__body>:first-child:last-child h3{line-height:4}.dialog-matting-exporter .gd-modal__header{display:block}.dialog-matting-exporter .gd-modal__footer{padding:0}.dialog-matting-exporter .gd-modal__close{font-size:20px;color:#c3c4c4;z-index:100}.dialog-matting-exporter__success{position:relative;top:0;left:0;margin-bottom:222px;background:transparent}.dialog-matting-exporter-info{position:relative;top:0;left:0;z-index:10;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;padding:64px 40px 40px;background:#fff;-webkit-box-shadow:0 2px 16px 0 rgba(0,0,0,.17);box-shadow:0 2px 16px 0 rgba(0,0,0,.17)}.dialog-matting-exporter-info__icon-success{width:72px;height:72px;margin-right:20px}.dialog-matting-exporter-info__title{font-size:24px;font-weight:600;color:#000}.dialog-matting-exporter-info__help{font-size:12px;color:#000}.dialog-matting-exporter-info__link{color:#0944f0}.dialog-matting-exporter-footer{position:absolute;top:15px;left:0;right:0;z-index:1;padding:0 40px;border-radius:0 0 6px 6px;background:#fff;-webkit-transition:all .5s cubic-bezier(.25,.46,.45,.94) 1.5s;-o-transition:all .5s cubic-bezier(.25,.46,.45,.94) 1.5s;transition:all .5s cubic-bezier(.25,.46,.45,.94) 1.5s;opacity:0;background:#f9fafc}.dialog-matting-exporter-footer__discover{margin-bottom:25px;font-size:14px;font-weight:500;color:#000}.dialog-matting-exporter-footer__flex_start_center{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:start;-ms-flex-pack:start;justify-content:start;-webkit-align-content:center;-ms-flex-line-pack:center;align-content:center}.dialog-matting-exporter-footer__title{margin:29px 0 10px 10px;line-height:1.3}.dialog-matting-exporter-footer__discover_item{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;padding:10px 10px 9px;border-bottom:1px solid #e1e7ee;cursor:pointer}.dialog-matting-exporter-footer__discover_item_img{width:30px;height:30px;margin-right:10px}.dialog-matting-exporter-footer__discover_item_span{line-height:2.1}.dialog-matting-exporter-footer__discover_item_icon{width:22px;height:22px;margin-top:-2px;margin-right:2px}.dialog-matting-exporter-footer__discover_item_text{font-size:14px;font-weight:400;color:#0944f0}.dialog-matting-exporter-footer-animation{-webkit-transform:translate3d(0,180px,0);transform:translate3d(0,180px,0);opacity:1}.dialog-matting-exporter .ft{text-align:center;position:relative}.dialog-matting-exporter .ft .btn{line-height:84px;border:0;color:#005cf9;font-size:1.142em}.dialog-matting-exporter .ft .btn:hover{color:#0a53d0}.dialog-matting-exporter .ft .btn.btn-hidden{opacity:0}.dialog-matting-exporter .ft .feedback{font-size:13px;color:#fff;position:absolute;bottom:0;right:-40px;-webkit-transform:translateY(100%);-ms-transform:translateY(100%);transform:translateY(100%);line-height:45px;-webkit-transition:all .3s linear;-o-transition:all .3s linear;transition:all .3s linear}.dialog-matting-exporter .ft .feedback.bottom{bottom:-47px}.dialog-matting-exporter .ft .feedback.bottom-fold{bottom:-41px}.dialog-matting-exporter .ft .feedback.item_2{bottom:66px}.dialog-matting-exporter .ft .feedback.is-act{bottom:-158px}.dialog-matting-exporter .ft .feedback .feedback-btn{color:#b0b5ff;cursor:pointer;line-height:45px;padding:0;margin-left:6px}.dialog-matting-exporter.modal-success .gd-modal{padding:0;-webkit-box-shadow:none;box-shadow:none;border-radius:6px 6px 4px 4px}.dialog-matting-exporter .search-koutu{font-size:15px}.dialog-matting-exporter .search-koutu svg{width:110px;margin-left:6px}.dialog-matting-exporter__one-more{padding-top:40px;-webkit-box-flex:0;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;width:100%}.dialog-matting-exporter__one-more button{display:block;width:auto;height:40px;margin:0 auto;font-size:13px;text-align:center}.dialog-matting-exporter__one-more button span{display:inline}",""])},1289:function(t,e,i){"use strict";i(886)},1290:function(t,e,i){e=t.exports=i(2)(!1),e.push([t.i,".g-dialog__wrapper{font-family:AirbnbCerealBook}.g-dialog__wrapper *{-webkit-box-sizing:border-box;box-sizing:border-box}.g-dialog__wrapper .g-btn,.g-dialog__wrapper .g-dialog{border-radius:unset}.g-dialog__wrapper .g-btn--primary{background-color:#000;border-color:#000}li.crop__type--active{color:#000;font-weight:600}li.crop__type--active:hover{color:#000}.lg-select-btn.type1.active,.lg-select-btn.type1:hover{background-color:#e7f0ff;border-color:#000;color:#000}.lg-icon.lg-brush-highlight{background-image:url(https://st0.dancf.com/static/02/202111260626-1ff2.svg)}.lg-icon.lg-eyedropper-highlight{background-image:url(https://st0.dancf.com/static/02/202111260629-200a.svg)}.page-clip,.page-clip #app,.page-clip body{height:100%}.page-clip .edit-button{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;font-size:13px;font-weight:600;padding:12px 30px}.page-clip .edit-button .lg-icon{margin-right:6px;width:18px;height:18px}.page-clip .edit-button .fc-icon{margin-right:5px;width:14px;height:14px}.page-clip .edit-button__upload{margin-right:10px}.page-clip .edit-button__upload label{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;width:100%;height:36px;cursor:pointer}.page-clip .edit-button__upload .file-picker--disabled{cursor:not-allowed}.page-clip-index{height:100%}",""])},1315:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page-clip-index"},[t.showGuaid?i("collection-guide",{on:{quit:function(e){t.showGuaid=!1}}}):t._e(),i("matting-editor",{ref:"editor",class:["clip-autoclip-fisrt"],attrs:{showCustomService:!0,homeBtnLink:t.homePath,beforeToHome:t.beforeToHome,homeBtnLinkIcon:"home",homeTarget:"_blank",completeBtnText:"下载",postTool:{filter:!1,background:!0,crop:!0,shadow:!0},useWatermark:!1,useClipFaceDetect:!0,useFilter:!1,useHelp:!0,helpArticle:t.article,maxWidth:t.maxWidth,maxHeight:t.maxHeight,patchingMode:!1,styleMode:"dark",blockingRecordMode:!1},on:{"upload-fail":function(e){return t.uploadTrack(!1)},"upload-success":function(e){return t.uploadTrack(!0)},"generated-record":t.setCookiebyRecordId}},[i("FCButton",{staticClass:"edit-button edit-button__upload",attrs:{slot:"cancel"},nativeOn:{click:function(e){return t.showReUploadDialog.apply(null,arguments)}},slot:"cancel"},[i("FCIcon",{attrs:{name:"upload"}}),t._v("\n            "+t._s(t.$t("mattingEditor.upload"))+"\n        ")],1),i("FCButton",{staticClass:"edit-button",attrs:{slot:"complete",type:"primary"},nativeOn:{click:function(e){return t.requestDownload.apply(null,arguments)}},slot:"complete"},[i("FCIcon",{attrs:{name:"download",fill:"white"}}),t._v("\n            "+t._s(t.$t("mattingEditor.download"))+"\n        ")],1)],1),i("image-picker",{ref:"imagePicker",on:{error:t.handleImagePickerError,change:t.reUpload}}),i("ExportCompleteDialog",{ref:"refExportCompleteDialog",attrs:{show:t.download.completeDialog,showUploadButton:!0},on:{"update:show":function(e){return t.$set(t.download,"completeDialog",e)},uploadAgain:t.uploadAgain,afterClose:t.afterClose}})],1)},r=[],a=i(458),n=i(498),s=i(523),l=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("Modal",{staticClass:"dialog-matting-exporter modal-success",attrs:{centered:"",visible:t.innerShow,width:"580px",maskClosable:!0,showClose:!0,afterClose:t.afterClose},on:{"update:visible":function(e){t.innerShow=e}}},[o("div",{staticClass:"dialog-matting-exporter__success"},[o("div",{staticClass:"dialog-matting-exporter-info"},[o("img",{staticClass:"dialog-matting-exporter-info__icon-success",attrs:{src:i(1284),alt:""}}),o("div",[o("h3",{staticClass:"dialog-matting-exporter-info__title"},[t._v(t._s(t.$t("export.success")))])]),t.showUploadButton?o("div",{staticClass:"dialog-matting-exporter__one-more"},[o("FCButton",{staticClass:"edit-button",attrs:{type:"primary"},nativeOn:{click:function(e){return t.uploadAgain.apply(null,arguments)}}},[t._v("\n                    "+t._s(t.$t("export.oneMore"))+"\n                ")])],1):t._e()])])])},c=[],d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",t._g({attrs:{name:t.transitionName,duration:t.transitionDuration},on:{"after-leave":t.afterLeave}},t.transitionOn),[t.mounted&&t.visible?i("div",{ref:"wrapper",class:t.bem("wrapper",{centered:t.centered}),style:{zIndex:t.zIndex,position:t.appendBody?"fixed":"absolute"},on:{click:t.close}},[i("div",{class:t.bem([t.theme]),style:Object.assign({},{width:t.width},t.styles,{top:t.centered?"0":t.top,bottom:t.bottom})},[i("div",{class:t.bem("header")},[t._t("header",(function(){return[t.title?i("span",{class:t.bem("title")},[t._v(t._s(t.title))]):t._e()]})),!t.showClose||t.closeText||t.showNewClose?t._e():i("icon",{class:t.bem("close"),attrs:{name:"close",color:"#AAA"},nativeOn:{click:function(e){return t.onClickOverlay(!1)}}}),t.showClose&&t.closeText&&!t.showNewClose?i("span",{class:t.bem("close"),on:{click:function(e){return t.onClickOverlay(!1)}}},[t._v(t._s(t.closeText))]):t._e(),t.showClose&&!t.closeText&&t.showNewClose?i("i",{class:t.bem("close","new"),on:{click:function(e){return t.onClickOverlay(!1)}}}):t._e()],2),i("div",{class:t.bem("body")},[t._t("default")],2),t.hasFooter?i("div",{class:t.bem("footer")},[t._t("footer",(function(){return[i("div",{class:t.bem("buttons")},[t.okText?i("gd-button",{attrs:{rect:"",type:"primary"},on:{click:t.confirm}},[t._v("\n                            "+t._s(t.okText)+"\n                        ")]):t._e(),t.cancelText?i("gd-button",{attrs:{rect:""},on:{click:t.cancel}},[t._v("\n                            "+t._s(t.cancelText)+"\n                        ")]):t._e()],1)]}))],2):t._e()])]):t._e()])},g=[],p=i(1),u=i.n(p),h=i(745),f=i(896),m=i(12);function b(t,e,i,o,r,a,n){try{var s=t[a](n),l=s.value}catch(c){return void i(c)}s.done?e(l):Promise.resolve(l).then(o,r)}function w(t){return function(){var e=this,i=arguments;return new Promise((function(o,r){var a=t.apply(e,i);function n(t){b(a,o,r,n,s,"next",t)}function s(t){b(a,o,r,n,s,"throw",t)}n(void 0)}))}}var x={name:Object(h["b"])("modal"),components:{Icon:f["a"]},mixins:[h["a"]],props:{visible:{type:Boolean,default:!1},mask:{type:Boolean,default:!0},transitionName:{type:String,default:"gd-modal-fade"},transitionOn:{type:Object},transitionDuration:{type:Object},keyborad:{type:Boolean,default:!0},title:{type:String},appendBody:{type:Boolean,default:!0},width:{type:String,default:"350px"},padding:{type:String,default:""},top:{type:String,default:"15%"},theme:{type:String,default:"light"},bottom:{type:String,default:"auto"},showClose:{type:Boolean,default:!0},showNewClose:{type:Boolean,default:!1},closeText:{type:String},okText:{type:String},cancelText:{type:String},maskClosable:{type:Boolean,default:!0},onCancel:{type:Function},afterClose:{type:Function},centered:{type:Boolean,default:!1},onOk:{type:Function},styles:{type:Object,default:function(){}}},data:function(){return{zIndex:m["a"].getZindex(),mounted:!1}},computed:{dialogStyle:function(){return{marginTop:this.top,width:this.width}},hasFooter:function(){return this.okText||this.noText||this.$slots.footer}},watch:{visible:function(t){t?m["a"].pushStack(this):t||m["a"].popStack(this)}},mounted:function(){this.mounted=!0,this.visible&&m["a"].pushStack(this)},beforeDestroy:function(){this.appendBody&&this.$el.parentElement&&this.$el.parentElement.removeChild(this.$el),m["a"].popStack(this)},methods:{close:function(t){this.maskClosable&&t.target===this.$refs.wrapper&&this.cancel()},confirm:function(){var t=this;return w(u.a.mark((function e(){return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$emit("update:visible",!1),!t.onOk){e.next=4;break}return e.next=4,t.onOk();case 4:case"end":return e.stop()}}),e)})))()},cancel:function(){var t=this;return w(u.a.mark((function e(){return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$emit("update:visible",!1),!t.onCancel){e.next=4;break}return e.next=4,t.onCancel();case 4:case"end":return e.stop()}}),e)})))()},onClickOverlay:function(){this.showClose&&this.cancel()},afterLeave:function(){this.afterClose&&this.afterClose()}}},y=x,v=(i(1285),i(0)),k=Object(v["a"])(y,d,g,!1,null,null,null),C=k.exports,_=i(496),I=i(5),M=i(501),A=i(499),j=i(645);function z(t){return new Promise((e,i)=>{const o=new FileReader;o.onload=()=>{e(o.result)},o.onerror=()=>{i(new Error("图片加载错误"))},o.readAsDataURL(t)}).then(t=>Object(j["b"])(t))}var O=i(691);const T=2e3,E="POSTER_CLIP_IMAGE_KEY";var S={components:{Modal:C,FCButton:n["a"]},props:{show:{required:!0,type:Boolean},resultURL:{type:String,default:""},showUploadButton:{type:Boolean,default:!1}},data(){return{isDialogFooterShow:!1,promiseUploadImg:null}},computed:{innerShow:{get(){return this.show},set(t){this.$emit("update:show",t)}}},watch:{show(){this.show?setTimeout(()=>{this.isDialogFooterShow=!0},0):this.isDialogFooterShow=!1}},methods:{retryExport(){this.$emit("retry")},async uploadImage(t){let e=null,i=null,o=null;this.promiseUploadImg=Promise.resolve(Object(O["a"])(t)).then(t=>(e=t,t.split(";")[0])).then(t=>Object(M["a"])(Object(_["a"])(e),{maxWidth:T,maxHeight:T,quality:.92,usePica:!1,type:t})).then(t=>(i=t,z(t))).then(t=>(o=t,Object(A["a"])(i))).then(t=>Object.assign(t,{width:o.width,height:o.height}))},goPosterPage(){localStorage.setItem(E,JSON.stringify({base64:this.resultURL})),this.goto("/poster-generator?mode=clip")},goHomePage(){this.goto("/")},goto(t){I["a"].isElectron?window.location.href=t:window.open(t,"_blank")},afterClose(){this.uploadAgainEvent||this.$emit("afterClose"),this.uploadAgainEvent=!1},uploadAgain(){this.uploadAgainEvent=!0,this.$emit("uploadAgain")}}},P=S,D=(i(1287),Object(v["a"])(P,l,c,!1,null,null,null)),R=D.exports,N=i(605),B=i(116),L=i(562),F=i(10),$=i(804),U=i(469),H=i(463),G=i(732),Z=i(6),W=i(22),V=i(502),Y=i(121),Q=i(460),X=i(733);function q(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function J(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?q(Object(i),!0).forEach((function(e){K(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):q(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function K(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const{editor:tt,mattingEditor:et,tracker:it}=N["a"];var ot={components:{ExportCompleteDialog:R,ImagePicker:a["ImagePicker"],FCButton:n["a"],FCIcon:s["a"],"matting-editor":et,CollectionGuide:X["a"]},mixins:[G["a"]],props:{recordId:{type:String,default:()=>null},processing:{type:Boolean,default:!0},downloaded:{type:Boolean,default:!1}},data(){return{download:{completeDialog:!1,resultUrl:""},showGuaid:!1,initTime:Date.now(),maxHeight:L["a"].MATTING_EDITOR_MAX_SIZE,maxWidth:L["a"].MATTING_EDITOR_MAX_SIZE,autoClipAB:!1,article:null,gaEventLabel:"upload",defaultFilename:"fococlipping_removed",fileSuffix:"_fococlipping_removed"}},computed:{homePath(){return W["a"].locale?"en"===W["a"].locale?"/":"/"+W["a"].locale:"/"}},created(){window.onbeforeunload=function(t){const e="Uploading.Are you sure you want to leave?";return(t||window.event).returnValue=e,e},H["a"].sendEvent("single","editor_init",window._uploadMethod),F["a"].getUser().catch(()=>{})},destroyed(){window.onbeforeunload=null},beforeDestroy(){this.unbindHotkey(),Z["a"].off("user.session.login")},mounted(){this.bindHotkey(),this.maxHeight=this.maxHeight=L["a"].MATTING_EDITOR_MAX_SIZE,this.$nextTick().then(async()=>{const t=this.$refs.editor;if("_lastImageFile"in window)this.importFile(window._lastImageFile);else try{await t.importMatting(this.recordId,{showProgress:!0,fromType:"fococlipping",userAttr:F["a"].userAttr})}catch(e){this.$error("import record fail: "+e)}this.track()})},methods:{beforeToHome(){const t=localStorage.getItem("fClipToHome");return null===t&&localStorage.setItem("fClipToHome",1),!0},afterClose(){const t=localStorage.getItem("usedclip");t||(localStorage.setItem("usedclip",!0),this.showGuaid=!0)},bindHotkey(){this.isMobile||(Object($["a"])("command+z,ctrl+z",()=>{tt.snapshot.undo()}),Object($["a"])("command+shift+z,ctrl+shift+z",()=>{tt.snapshot.redo()}),Object($["a"])("command+*,ctrl+*",t=>{if("="!==t.key&&"-"!==t.key)return;t.preventDefault();const e=this.$refs.editor,i=e.$refs.LegoEditor,o=e.currentResultTool?i:e;"="===t.key&&o.setZoom("in"),"-"===t.key&&o.setZoom("out")}))},unbindHotkey(){this.isMobile||($["a"].unbind("command+z,ctrl+z"),$["a"].unbind("command+shift+z,ctrl+shift+z"),$["a"].unbind("command+*,ctrl+*"))},track(){const t=this;window.addEventListener("beforeunload",(function e(){it.editorExit({scene:tt.mattingRecord.scene,work_id:this.recordId,time:t.initTime}),window.removeEventListener("beforeunload",e,!1)}),!1)},async requestDownload(){H["a"].sendEvent("single","click_download",window._uploadMethod);const t=await this.$refs.editor.exportImage({type:"canvas",showProgress:!1,shouldTrack:!1});N["a"].tracker.editorResultTool({tool:"download",work_id:this.recordId,scene:N["a"].editor.mattingRecord.scene});const e=await this.openExportDialog({resultImage:t});e&&(H["a"].sendEvent("single","export_start",window._uploadMethod),this.downloadImage(e))},async downloadImage(t){try{const e=await this.$refs.editor.exportImage(J(J({},t),{},{showProgress:!0,shouldTrack:!0}));B["a"].postEmsLogs({target_id:this.$refs.editor.$options.fileData.id,type:1}),this.downloadFiles({file:e,filename:tt.mattingRecord.filename,type:t.type}),window.onbeforeunload=null}catch(e){return window.onbeforeunload=null,void H["a"].sendEvent("single","export_fail",window._uploadMethod)}this.download.completeDialog=!0,"gtag"in window&&window.gtag("event","conversion",{send_to:"AW-710014949/oIz5COSLgvYCEOXvx9IC"}),H["a"].sendEvent("single","export_success",window._uploadMethod),this.$refs.editor.saveFileData()},showReUploadDialog(){H["a"].sendEvent("single","reupload_click","upload",!1),this.$refs.imagePicker.showFileDialog()},reUpload(t){window._uploadMethod="upload",window.startUploadTime=Date.now(),window.startUploadSize="object"===typeof t?t[0].size:null,H["a"].sendEvent("single","upload_start","reupload"),U["a"].upload({upload_state:"start",upload_location:"one-more-clipping",upload_num:1,upload_type:"upload",file_size:window.startUploadSize,downstream_web:this.$route.path}),window._inputImgFrom=21,this.importFile(t)},uploadAgain(){window._uploadMethod="upload",H["a"].sendEvent("single","upload_again_click","reupload",!1),this.$refs.imagePicker.showFileDialog(),this.download.completeDialog=!1,Y["a"].page({source:"one-more-clipping"})},async importFile(t){(t instanceof FileList||Array.isArray(t))&&(t=t[0]);let e=this.defaultFilename;"link"===window._uploadMethod?e=this.getFileNameFromUrl(this.$globals.userInputImageUrl)+"_fococlipping_removed":t.name&&(e=t.name.split(".")[0]+"_fococlipping_removed"),await this.$refs.editor.importMatting(t,{showProgress:!0,filename:e,fromType:"fococlipping",userAttr:F["a"].userAttr}),delete window._lastImageFile},uploadTrack(t){this.$emit("update:processing",!1),t||this.$emit("update:downloaded",!0),window._uploadMethod&&(t?H["a"].sendEvent("single","upload_success",window._uploadMethod):H["a"].sendEvent("single","upload_fail",window._uploadMethod),U["a"].upload({upload_elapsed_time:Date.now()-window.startUploadTime,file_size:window.startUploadSize,upload_state:t?"success":"fail",upload_location:Object(Q["b"])(window._inputImgFrom),upload_num:1,upload_type:window._uploadMethod,downstream_web:this.$route.path}))},handleImagePickerError(t){this.$error(t.message)},getFileNameFromUrl(t){let e=this.defaultFilename;try{if(this.$globals.userInputImageUrl){const i=t.split("?"),o=i[0].split("/");e=o[o.length-1],e.indexOf(".")>-1&&(e=e.split("."),e=e[0])}}catch(i){console.log(i)}return e},setCookiebyRecordId(){Object(V["c"])("record_id",this.$refs.editor.$options.fileData.id,60)}}},rt=ot,at=(i(1289),Object(v["a"])(rt,o,r,!1,null,null,null));e["default"]=at.exports},461:function(t,e,i){"use strict";i.d(e,"a",(function(){return I})),i.d(e,"b",(function(){return x})),i.d(e,"c",(function(){return C}));var o=i(541),r=i.n(o),a=i(644),n=i(897),s=i(475),l=i(762);function c(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class d extends l["a"]{constructor(t=!1){super(),c(this,"name","Pan"),c(this,"dragableOnImage",!1),c(this,"mousedown",t=>{this.dragableOnImage?this.editor.imageContainsPoint(t)&&(this.formerPos={x:t.clientX,y:t.clientY},this.editor.setCursor("grabbing")):(this.formerPos={x:t.clientX,y:t.clientY},this.editor.setCursor("grabbing"))}),c(this,"mousemove",t=>{if(this.formerPos){const e={x:t.clientX,y:t.clientY},i=this.formerPos;this.editor.panEditor(e.x-i.x,e.y-i.y),this.formerPos=e}else this.dragableOnImage?this.editor.imageContainsPoint(t)?this.editor.setCursor("grab"):this.editor.setCursor(""):this.editor.setCursor("grab")}),c(this,"mouseup",()=>{this.formerPos&&(delete this.formerPos,this.editor.setCursor("grab"))}),c(this,"mousemoveoutside",t=>{this.formerPos&&this.mousemove(t)}),c(this,"mouseupoutside",()=>{this.formerPos&&this.mouseup()}),this.dragableOnImage=t}inactive(){this.formerPos&&this.mouseup()}}var g=i(545),p=i(514),u=i.n(p);function h(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function f(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?h(Object(i),!0).forEach((function(e){m(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function m(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const{MattingEditor:b,eventBus:w}=i(642).default;let x={};const y="mattingeditor.storage",v={message(t){throw new Error("请设置 message 参数，参数类型为：(msg: string) => void")},errorMessage(t){throw new Error("请设置 errorMessage 参数，参数类型为：(msg: string) => void")},uploadImage(t){return Promise.reject(new Error("请设置 uploadImage 参数，参数类型为：(blob: File | Blob) => Promise<{ url: string }>"))},resizeFileImage(t,e){return Object(a["a"])(t,e)},store:{set(t,e){const i=JSON.parse(localStorage.getItem(y)||"{}");i[t]=e,localStorage.setItem(y,JSON.stringify(i))},get(t){const e=JSON.parse(localStorage.getItem(y)||"{}");return e[t]}},tracker(t){},api:{createFaceRect(t){return Promise.reject(new Error("请设置 api.createFaceRect 参数"))},queryFilters(){return Promise.resolve([])},getFilter(t){return Promise.reject(new Error("请设置 api.getFilter 参数"))}},trackInfo:{projectName:"gd_web",editType:"产品页"},filterRenderer:null};function k(t){return new Proxy(t,{get:function(t,e){return t[e]||function(){}}})}let C=k({}),_=0;function I(t){function e(t){return t.url&&(t.url=t.url.replace("/api/matting","/api/editor/matting"),t.url=t.url.replace("/api/dam","/api/cm"),/\/ai\/(product|graphic)/.test(t.url)&&(t.data=f(f({},t.data),{},{image_url:t.data.url}),delete t.data.url),/\/ai\/(identify|classify)/.test(t.url)&&(t.data=f(f({},t.data),{},{img_url:t.data.url}),delete t.data.url)),t}t=r()(t),"enterprise"===t.appType&&(t.apiOptions.interceptors||(t.apiOptions.interceptors={request:[],response:[]}),t.apiOptions.interceptors.request.unshift(e));const i=t.watermarkUrl||u.a,o=new b({eventBus:w,apiOptions:t.apiOptions,uploadImage:t.uploadImage,defaultTool:"",pickerDimension:150,watermark:t.watermark,scene:t.scene,maxImageWidth:t.maxImageWidth,maxImageHeight:t.maxImageHeight,preSaveMatting(t){const{scene:e}=o.mattingRecord;return _=Date.now(),C.editorSaving({scene:e,work_id:o.id}),Promise.resolve(t)},postSaveMatting(t){const{scene:e}=o.mattingRecord;return C.editorSaved({scene:e,work_id:o.id,time:_}),Promise.resolve(t)},locale:t.locale,downloadWithWatermark:t.downloadWithWatermark,watermarkUrl:i}),a=new g["a"]({minSize:1,maxWidth:5e3,maxHeight:5e3,controlPadding:10}),l=new d(!0),c=document.createElement("canvas"),p=new n["a"](c,{imageBorder:1,imageBorderColor:"#000",imageSmoothing:!1,scrollZoom:!0,minZoom:.1},[a,l]);x=Object.assign({editor:o,lego:p,eventBus:w,clipBrushPlugin:o.getPlugin("ClipBrush"),hairBrushPlugin:o.getPlugin("HairBrush"),hairEyedropperPlugin:o.getPlugin("ColorPicker"),panPlugin:o.getPlugin("Pan"),autoPlugin:o.getPlugin("AutoClip")},v,t),C=k(x.tracker(s["b"])||{})}},475:function(t,e,i){"use strict";i.d(e,"b",(function(){return p})),i.d(e,"a",(function(){return g})),i.d(e,"c",(function(){return u}));var o=i(461),r=i(492);const a=["scene","work_id","time"];function n(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?n(Object(i),!0).forEach((function(e){d(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function l(t,e){if(null==t)return{};var i,o,r=c(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(o=0;o<a.length;o++)i=a[o],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}function c(t,e){if(null==t)return{};var i,o,r={},a=Object.keys(t);for(o=0;o<a.length;o++)i=a[o],e.indexOf(i)>=0||(r[i]=t[i]);return r}function d(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class g{constructor(t){d(this,"project_name",o["b"].trackInfo.projectName?o["b"].trackInfo.projectName:"gd_web"),d(this,"event_id",0),d(this,"event",""),d(this,"editor_type","抠图编辑器"),d(this,"load_type",o["b"].trackInfo.loadType||"通用"),d(this,"load_mode",""),d(this,"work_id",0),d(this,"editor_enter_channel",o["b"].trackInfo.editType),d(this,"editor_version",o["b"].editor.version),d(this,"canvas_number",1),Object.assign(this,t)}}const p={editorInit(t){return new g({event_id:31001,event:"editor_init",load_mode:"",init_elapsed_time:Object(r["b"])(t),work_id:0})},editorLoaded(t){const{scene:e,time:i,work_id:a}=t;return new g({event_id:31002,event:"editor_template_loaded",load_mode:"gd_fc_web"===o["b"].trackInfo.projectName?Object(r["f"])(e):Object(r["e"])(e),load_elapsed_time:Object(r["b"])(i),work_id:a})},editorSaving(t){const{scene:e,work_id:i}=t;return new g({event_id:31003,event:"editor_save_start",load_mode:"gd_fc_web"===o["b"].trackInfo.projectName?Object(r["f"])(e):Object(r["e"])(e),work_id:i})},editorSaved(t){const{scene:e,work_id:i,time:a}=t;return new g({event_id:31004,event:"editor_save_completed",load_mode:"gd_fc_web"===o["b"].trackInfo.projectName?Object(r["f"])(e):Object(r["e"])(e),save_elapsed_time:Object(r["b"])(a),work_id:i})},editorExporting(t){const{scene:e,work_id:i,export_target_type:a,edit_elapsed_time:n}=t;return new g({event_id:31005,event:"editor_export_start",load_mode:"gd_fc_web"===o["b"].trackInfo.projectName?Object(r["f"])(e):Object(r["e"])(e),edit_elapsed_time:Object(r["b"])(n),export_target_type:a,work_id:i})},editorExported(t){const{scene:e,work_id:i,time:n}=t,c=l(t,a);return new g(s({event_id:31006,event:"editor_export_completed",load_mode:"gd_fc_web"===o["b"].trackInfo.projectName?Object(r["f"])(e):Object(r["e"])(e),work_id:i,export_elapsed_time:Object(r["b"])(n)},c))},editorAlert(t){const{scene:e,work_id:i}=t;return new g({event_id:31007,event:"editor_alert",load_mode:"gd_fc_web"===o["b"].trackInfo.projectName?Object(r["f"])(e):Object(r["e"])(e),work_id:i})},editorExit(t){const{time:e,scene:i,work_id:a}=t;return new g({event_id:31008,event:"editor_exit",editor_elapsed_time:Object(r["b"])(e),load_mode:"gd_fc_web"===o["b"].trackInfo.projectName?Object(r["f"])(i):Object(r["e"])(i),work_id:a})},editorChanged(t){const{work_id:e,scene:i}=t;return new g({event:"editor_template_changed",event_id:89,work_id:e,load_mode:"gd_fc_web"===o["b"].trackInfo.projectName?Object(r["f"])(i):Object(r["e"])(i)})},editorReplaceImage(t){const{scene:e,work_id:i}=t;return new g({event_id:107,event:"editor_template_switch",load_mode:"gd_fc_web"===o["b"].trackInfo.projectName?Object(r["f"])(e):Object(r["e"])(e),work_id:i})},editorResultTool(t){const{work_id:e,tool:i,scene:a}=t,n={filter:"增强质感",background:"换背景",crop:"裁剪",shadow:"加阴影",download:"下载"}[i];return new g({event:"editor_matting_fun_tab_tool_action",event_id:31030,load_mode:"gd_fc_web"===o["b"].trackInfo.projectName?Object(r["f"])(a):Object(r["e"])(a),work_id:e,action_type:"gd_fc_web"===o["b"].trackInfo.projectName?i:n})},editorCropType(t){const{scene:e,work_id:i,size:a}=t;return new g({event:"matting_tailor_size",event_id:2119,load_mode:"gd_fc_web"===o["b"].trackInfo.projectName?Object(r["f"])(e):Object(r["e"])(e),work_id:i,size:a})},editorFunc(t){const{work_id:e,scene:i,action_type:a}=t;return new g({event:"editor_matting_fun_tab_click",event_id:31029,load_mode:"gd_fc_web"===o["b"].trackInfo.projectName?Object(r["f"])(i):Object(r["e"])(i),work_id:e,action_type:`${Object(r["c"])()}-${Object(r["d"])(a)}`})}},u={elapse:r["b"],parseScene:r["e"],bitStatus:r["a"]}},492:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"a",(function(){return n})),i.d(e,"f",(function(){return s})),i.d(e,"e",(function(){return l})),i.d(e,"c",(function(){return c})),i.d(e,"d",(function(){return d}));var o=i(493),r=i(461);function a(t){return Date.now()-t}function n(t){let e=0;for(let o=0;o<t.length;o++)0!==o&&(e<<=1),e|=~~!!t[o];e=e.toString(2);const i=new Array(t.length-e.length).fill("0").join("");return i+e}function s(t){switch(t){case"portrait":return"portrait";case"product":return"product";case"graphic":return"graphic";case null:return"manual";default:return""}}function l(t){switch(t){case"portrait":return"自动抠图-人像";case"product":return"自动抠图-商品";case"graphic":return"自动抠图-图形";case null:return"通用抠图";default:return""}}function c(){const t=Object(o["b"])();return r["b"].editor.isNewVersion?t.panMode:"auto"===r["b"].editor.mode?t.autoMode:t.normalMode}function d(t){const e=Object(o["b"])();return{recognition:e.recognition,"repair-brush":e.repairBrush,"eraser-brush":e.eraserBrush,keep:e.keep,drop:e.drop,eraser:e.eraser,path:e.path,edge:e.edge,hair:e.hair,oldVersion:e.oldVersion,newVersion:e.newVersion,premask:e.recognition,background:e.background,crop:e.crop,filter:e.filter,outline:e.outline,shadow:e.shadow}[t]||t}},493:function(t,e,i){"use strict";i.d(e,"b",(function(){return c})),i.d(e,"c",(function(){return d}));var o=i(216),r=i.n(o),a=i(4),n=i(461);const s={cn:{tracker:{background:"换背景",crop:"裁剪",shadow:"加阴影",filter:"增强质感",outline:"描边",recognition:"模式",repairBrush:"修补",eraserBrush:"擦除",keep:"保留",drop:"去除",eraser:"擦除画笔",path:"修边工具",edge:"调整边缘",hair:"处理发丝",oldVersion:"切换至旧版",newVersion:"切换至新版",autoMode:"自动抠图",normalMode:"通用抠图",panMode:"单笔抠图"},mattingEditor:{auto:"自动抠图",general:"通用抠图",upload:"重新上传",download:"下载",failed:"抠图失败，请检查网络",cancel:"取消",finish:"完成抠图",filterLoadError:"滤镜加载失败",loadError:"载入编辑器失败，请稍后再试",typeError:"啊哦，没有识别出支持的类型，推荐使用通用抠图",switchOldVersion:"切换至旧版",switchNewVersion:"切换至新版",loading:{loading:"加载中",exporting:"导出中",identifying:"识别中",autoIdentifying:"自动识别",generating:"生成中"},guide:{blueBrush:"使用蓝色笔刷",markRetention:"标记需要保留的部分",redBrush:"使用红色笔刷",markRemoval:"标记需要去除的部分"},import:{importing:"正在导入图片",uploading:"正在上传图片",failed:"抠图失败，请检查网络",loaded:"载入完成",retryUpload:"上传失败，请稍后再试...",analyFail:"无法解析传入内容"},funcs:{mode:"模式",erase:"擦除",restore:"修补",portrait:"人像",product:"商品",graph:"图形",type:"识别类型",keep:"保留",remove:"去除",eraseBrush:"擦除笔画",edge:"调整边缘",pen:"修边工具",hair:"处理发丝",brushSize:"笔画大小",brushHardness:"笔画硬度",feather:"边缘羽化",markHair:"涂抹头发边缘",markPen:"涂抹笔",hairColor:"吸取发色",bgColor:"吸取背景色",autoFailed:"识别失败，请检查网络",waiting:"请等待识别完成"},tools:{pan:"抓手",zoomout:"缩小",zoomin:"放大",undo:"上一步",redo:"下一步",startover:"重做"},effects:{back:"返回继续抠图",waiting:"请先等待生成完成哦",filter:{title:"增强质感",origin:"原图"},bg:{transparent:"透明",title:"换背景",color:"颜色",template:"模版",customize:"自定义",tips:"请先进行抠图，再换背景",upload:"正在上传图片",loadImage:"载入图片"},cropPanel:{title:"图片不需要裁剪",content:"当前图片的尺寸已经与所选证件照规格相同，还要继续裁剪么？",ok:"继续",cancel:"取消",message:"您上传图片的尺寸小于所选的证件规格，放大容易导致模糊，建议重新上传"},crop:{title:"裁剪",regular:"常规",idPhoto:"证件",trim:"裁剪到边缘",origin:"原图",customize:"自定义",facialFail:"未检测到人脸",size:"尺寸",w:"宽",h:"高",apply:"应用",oneInch1:"小一寸",oneInch2:"一寸",oneInch3:"大一寸",twoInch1:"小二寸",twoInch2:"二寸",twoInch3:"大二寸",scale:"主体缩放",rotate:"旋转角度",facialDetecting:"正在识别人脸框"},shadow:{title:"加阴影",cast:"投影",distance:"距离",blur:"模糊度",opacity:"不透明度",angle:"角度",outline:"描边",outlineColor:"描边颜色",outlineWidth:"描边大小"}},switchAlert:{title:"记录会被清空",content:"切换之后当前操作记录会被清空哦，确定切换么？",ok:"确定",cancel:"取消"},startOver:{title:"记录会被清空",content:"重做会清空当前所有操作记录哦，确定重做么？",ok:"确定",cancel:"取消"}}},en:{tracker:{background:"background",crop:"crop",shadow:"shadow",filter:"filter",outline:"outline",recognition:"mode",repairBrush:"restore",eraserBrush:"erase",keep:"keep",drop:"remove",eraser:"erase",path:"refine-edge",edge:"define-edge",hair:"hair",oldVersion:"old-version",newVersion:"new-version",autoMode:"auto-mode",normalMode:"normal-mode",panMode:"pan-mode"},mattingEditor:{auto:"Smart Remove",general:"Manual Remove",upload:"Reupload",download:"Download",failed:"Failed to cut out. Please check your network connection.",cancel:"Cancel",finish:"Done",filterLoadError:"Failed to load the filters",loadError:"Failed to load editor, please try again later",typeError:"Oops, can't identify the type of the chosen image, suggest to use Manual Remove mode",switchOldVersion:"Switch Old Version",switchNewVersion:"Switch New Version",loading:{loading:"Loading...",exporting:"Generating...",identifying:"identifying",autoIdentifying:"Automatically identify",generating:"generating"},guide:{blueBrush:"Use the blue brush tool",markRetention:"to keep the wanted part",redBrush:"use the red brush tool ",markRemoval:"to remove the unwanted background"},import:{importing:"Importing the image",uploading:"Uploading the image",failed:"Failed to cut out. Please check your network connection.",loaded:"Loaded",retryUpload:"Failed upload, please try it later...",analyFail:"Failed analysing the image"},funcs:{mode:"Mode",erase:"Erase",restore:"Restore",portrait:"Portrait",product:"Product",graph:"Graphic",type:"Type",keep:"Keep",remove:"Remove",eraseBrush:"Erase",edge:"Refine Edge",pen:"Define Edge",hair:"Hair Touchup",brushSize:"Brush size",brushHardness:"Brush hardness",feather:"Feather Edge",markHair:"Mark hair",markPen:"Brush",hairColor:"Hair Picker",bgColor:"BG Picker",autoFailed:"Failed to identify. Please check your network connection.",waiting:"Please wait for identification to complete"},tools:{pan:"Drag",zoomout:"Zoom Out",zoomin:"Zoom In",undo:"Undo",redo:"Redo",startover:"Start over"},effects:{back:"Back to remove",waiting:"Please wait until the image is generated.",filter:{title:"Filter",origin:"origin"},bg:{transparent:"",title:"Background",color:"Color",template:"Template",customize:"Custom",tips:"Clip first, then change background",upload:"Uploading...",loadImage:"loading image"},cropPanel:{title:"The image don't need to be cropped",content:"The size of the current image is the same with the specification of the chosen passport , still crop the image?",ok:"Continue",cancel:"Cancel",message:"The size of the image you uploaded is smaller than the specification of the selected passport , enlarge it will cause the image blur. We suggest to upload the image once again"},crop:{title:"Crop",regular:"Regular",idPhoto:"ID Photo",trim:"Trim",origin:"Origin",customize:"Custom",facialFail:"Failed to identify facial features.",size:"Size",w:"w",h:"h",apply:"Apply",oneInch1:"1 inch",oneInch2:"1 inch",oneInch3:"1 inch",twoInch1:"2 inches",twoInch2:"2 inches",twoInch3:"2 inches",scale:"scale",rotate:"rotate",facialDetecting:"Detecting facial feature..."},shadow:{title:"Shadow",cast:"Shadow",distance:"Margin",blur:"Blur",opacity:"Opacity",angle:"Angle",outline:"Outline",outlineColor:"Outline Color",outlineWidth:"Outline Size"}},switchAlert:{title:"This will discard changes",content:"Changes will not be saved. Continue?",ok:"OK",cancel:"Cancel"},startOver:{title:"This will discard changes",content:"Changes will not be saved. Continue?",ok:"OK",cancel:"Cancel"}}},id:{mattingEditor:{auto:"Penghilangan Cerdas",general:"Penghilangan Manual",upload:"Unggah ulang",download:"Unduh",failed:"Gagal memotong. Periksa koneksi jaringan Anda.",cancel:"batal",finish:"selesai",filterLoadError:"Gagal memuat filter",loadError:"Gagal memuat editor, coba lagi nanti",typeError:'Ups, tidak dapat mengidentifikasi jenis gambar yang dipilih, disarankan untuk menggunakan mode "Penghilangan Manual"',switchOldVersion:"Beralih ke Versi Lama",switchNewVersion:"Beralih ke Versi Baru",loading:{loading:"Memuat...",exporting:"Menghasilkan...",identifying:"mengidentifikasi",autoIdentifying:"Identifikasi otomatis",generating:"menghasilkan"},guide:{blueBrush:"Gunakan kuas biru untuk ",markRetention:"melindungi bagian yang diinginkan",redBrush:"gunakan alat sikat merah untuk",markRemoval:"menghapus latar belakang yang tidak diinginkan"},import:{importing:"Mengimpor gambar",uploading:"Mengunggah gambar",failed:"Gagal memotong. Periksa koneksi jaringan Anda.",loaded:"Dimuat",retryUpload:"Gagal mengunggah, coba lagi nanti...",analyFail:"Gagal menganalisis gambar"},funcs:{mode:"Mode",erase:"Hapus",restore:"Pulihkan",portrait:"Potret",product:"Produk",graph:"Grafis",type:"Jenis",keep:"Jaga",remove:"Hilangkan",eraseBrush:"Hapus",edge:"Perhalus Tepi",pen:"Tentukan Tepi",hair:"Perbaikan Rambut",brushSize:"Ukuran kuas",brushHardness:"Ketebalan kuas",feather:"Tepi Halus",markHair:"Tandai rambut",markPen:"Kuas",hairColor:"Pemilih Rambut",bgColor:"Pemilih LB",autoFailed:"Gagal mengidentifikasi. Periksa koneksi jaringan Anda.",waiting:"Mohon tunggu sampai identifikasi selesai"},tools:{pan:"Seret",zoomout:"Perkecil",zoomin:"Perbesar",undo:"Urungkan",redo:"Ulangi",startover:"Mulai lagi"},effects:{back:"Kembali ke hapus",waiting:"Mohon tunggu saat gambar sedang dihasilkan.",filter:{title:"Filter",origin:"pangkal"},bg:{transparent:"",title:"Latar belakang",color:"Warna",template:"Templat",customize:"Kustom",tips:"Pangkas dulu, baru ubah latar belakang",upload:"Mengunggah...",loadImage:"memuat gambar"},cropPanel:{title:"Gambar tidak harus dipotong",content:"Ukuran gambar saat ini sama dengan spesifikasi dari paspor yang dipilih, tetap potong gambar? ",ok:"Lanjut",cancel:"Batal",message:"Ukuran gambar yang Anda unggah lebih kecil dari spesifikasi dari paspor yang dipilih, memperbesarnya akan membuat gambar menjadi blur. Kami sarankan untuk mengunggah gambar sekali lagi"},crop:{title:"Potong",regular:"Reguler",idPhoto:"ID Foto",trim:"Pangkas",origin:"pangkal",customize:"Kustom",facialFail:"Gagal mengidentifikasi fitur wajah.",size:"Ukuran",w:"w",h:"h",apply:"Terapkan",oneInch1:"1 inci",oneInch2:"1 inci",oneInch3:"1 inci",twoInch1:"2 inci",twoInch2:"2 inci",twoInch3:"2 inci",scale:"skala",rotate:"putar",facialDetecting:"Mendeteksi fitur wajah..."},shadow:{title:"Bayangan",cast:"Bayangan",distance:"Margin",blur:"Blur",opacity:"Opasitas",angle:"Sudut",outline:"Garis Tepi",outlineColor:"Warna Garis Tepi",outlineWidth:"Ukuran Garis Tepi"}},switchAlert:{title:"Ini akan membuang perubahan",content:"Perubahan tidak akan disimpan. Lanjut?",ok:"Oke",cancel:"Batal"},startOver:{title:"Ini akan membuang perubahan",content:"Perubahan tidak akan disimpan. Lanjut?",ok:"Oke",cancel:"Batal"}}},"pt-br":{mattingEditor:{auto:"Remoção inteligente",general:"Remoção manual",upload:"Reenviar",download:"Baixar",failed:"Falha ao cortar. Verifique a sua conexão de rede.",cancel:"cancelar",finish:"finalizar",filterLoadError:"Falha ao carregar os filtros",loadError:"Falha ao carregar o editor. Tente novamente mais tarde",typeError:'Opa, não é possível identificar o tipo da imagem escolhida. Sugerimos o uso do modo "Remoção manual"',switchOldVersion:"Mudar para a versão antiga",switchNewVersion:"Mudar para a versão nova",loading:{loading:"Carregando...",exporting:"Gerando...",identifying:"identificando",autoIdentifying:"Identificar automaticamente",generating:"gerando"},guide:{blueBrush:"Use a ferramenta pincel",markRetention:"azul para manter a parte desejada",redBrush:"use a ferramenta de pincel",markRemoval:"vermelho para remover o fundo indesejado"},import:{importing:"Importando a imagem",uploading:"Enviando a imagem",failed:"Falha ao cortar. Verifique a sua conexão de rede.",loaded:"Carregado",retryUpload:"Falha no envio. Tente mais tarde...",analyFail:"Falha ao analisar a imagem"},funcs:{mode:"Modo",erase:"Apagar",restore:"Restaurar",portrait:"Retrato",product:"Produto",graph:"Gráfica",type:"Tipo",keep:"Manter",remove:"Remover",eraseBrush:"Apagar",edge:"Refine a borda",pen:"Defina a borda",hair:"Retoque de cabelo",brushSize:"Tamanho do pincel",brushHardness:"Dureza do pincel",feather:"Borda suavizada",markHair:"Marcar cabelo",markPen:"Pincel",hairColor:"Seletor de cabelo",bgColor:"Seletor de fundo",autoFailed:"Falha ao identificar. Verifique sua conexão de rede.",waiting:"Aguarde a identificação ser concluída"},tools:{pan:"Arraste",zoomout:"Afastar",zoomin:"Aproximar",undo:"Desfazer",redo:"Refazer",startover:"Recomeçar"},effects:{back:"Voltar à remoção",waiting:"Aguarde enquanto a imagem está sendo gerada.",filter:{title:"Filtrar",origin:"origem"},bg:{transparent:"",title:"Fundo",color:"Cor",template:"Modelo",customize:"",tips:"Primeiro corte, depois mude o fundo",upload:"Enviando...",loadImage:"carregando a imagem"},cropPanel:{title:"A imagem não precisa ser cortada",content:"O tamanho da imagem atual é o mesmo da especificação do passaporte escolhido. Ainda deseja recortar a imagem? ",ok:"Continuar",cancel:"Cancelar",message:"O tamanho da imagem que você enviou é menor do que a especificação do passaporte selecionado, ampliá-la causará o desfoque da imagem. Sugerimos que a imagem seja reenviada"},crop:{title:"Cortar",regular:"Regular",idPhoto:"Foto de identificação",trim:"Cortar",origin:"origem",customize:"Personalizado",facialFail:"Falha ao identificar as características faciais.",size:"Tamanho",w:"l",h:"a",apply:"Aplicar",oneInch1:"1 polegada",oneInch2:"1 polegada",oneInch3:"1 polegada",twoInch1:"2 polegadas",twoInch2:"2 polegadas",twoInch3:"2 polegadas",scale:"escala",rotate:"girar",facialDetecting:"Detectando característica facial..."},shadow:{title:"Sombra",cast:"Sombra",distance:"Margem",blur:"Desfoque",opacity:"Opacidade",angle:"Ângulo",outline:"Contorno",outlineColor:"Cor do contorno",outlineWidth:"Tamanho do contorno"}},switchAlert:{title:"Isso descartará as alterações",content:"As alterações não serão salvas. Continuar?",ok:"OK",cancel:"Cancelar"},startOver:{title:"Isso descartará as alterações",content:"As alterações não serão salvas. Continuar?",ok:"OK",cancel:"Cancelar"}}}};function l(t){const e=n["b"].locale||"cn";return Reflect.get(s,t||e)}function c(){const t=n["b"].locale||"cn",e=l("cn"===t?"cn":"en").tracker;return e}function d(){a["default"].prototype.$t||(a["default"].prototype.$t=function(t){return r()(s.cn,t)})}e["a"]=s},499:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var o=i(501),r=i(558);var a=i(607);function n(t){return t.size>12582912?Object(o["a"])(t,{maxWidth:3e3,maxHeight:3e3,type:t.type}):t}async function s(t,e={}){let i=await n(t);return e.autoOrientation&&(i=await Object(a["a"])(i)),r["b"].upload(i,e)}},500:function(t,e,i){var o=i(535);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var r=i(3).default;r("4c626ea6",o,!0,{sourceMap:!1})},501:function(t,e,i){"use strict";i.d(e,"a",(function(){return g}));var o=i(544),r=i(645),a=i(678),n=i.n(a);const s=new n.a;async function l(t,e){const{type:i,usePica:r,quality:a}=Object.assign({type:"image/png",usePica:!0,quality:1},e),{canvas:n,ctx:l}=Object(o["a"])(e.maxWidth,e.maxHeight);return r?await s.resize(t,n,{alpha:/png/.test(i)}):l.drawImage(t,0,0,e.maxWidth,e.maxHeight),s.toBlob(n,i,a)}function c(t,e){const{width:i,height:o}=t;let{width:r,height:a}=e;const n=i/o;return n>=1?(r=Math.min(i,r),a=r/n):(a=Math.min(o,a),r=a*n),{width:~~r,height:~~a}}function d(t,e){let i=1,o=1;if(t instanceof HTMLImageElement){const{naturalWidth:e,naturalHeight:r}=t;i=e,o=r}else i=t.width,o=t.height;return c({width:i,height:o},{width:e.maxWidth,height:e.maxHeight})}async function g(t,e){const i=await Object(r["a"])(t),{width:o,height:a}=d(i,{maxHeight:e.maxHeight,maxWidth:e.maxWidth});return i.width<=e.maxWidth&&i.height<=e.maxHeight?Promise.resolve(t):(e.maxHeight=a,e.maxWidth=o,l(i,e))}},514:function(t,e,i){t.exports=i.p+"image/watermark_875c4a11.svg"},523:function(t,e,i){"use strict";var o='<svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><symbol id=fc-download viewBox="0 0 14 14"xmlns=http://www.w3.org/2000/svg fill=none height=14 width=14><path d="M6.88736 9.65737C6.90072 9.67444 6.9178 9.68825 6.93729 9.69775C6.95678 9.70724 6.97818 9.71218 6.99986 9.71218C7.02154 9.71218 7.04294 9.70724 7.06243 9.69775C7.08192 9.68825 7.099 9.67444 7.11236 9.65737L9.11236 7.12701C9.18558 7.03415 9.1195 6.89665 8.99986 6.89665H7.67665V0.853795C7.67665 0.775223 7.61236 0.710938 7.53379 0.710938H6.46236C6.38379 0.710938 6.3195 0.775223 6.3195 0.853795V6.89487H4.99986C4.88022 6.89487 4.81415 7.03237 4.88736 7.12522L6.88736 9.65737ZM13.5356 9.03237H12.4641C12.3856 9.03237 12.3213 9.09665 12.3213 9.17522V11.9252H1.67843V9.17522C1.67843 9.09665 1.61415 9.03237 1.53557 9.03237H0.464146C0.385575 9.03237 0.321289 9.09665 0.321289 9.17522V12.7109C0.321289 13.027 0.576646 13.2824 0.892718 13.2824H13.107C13.4231 13.2824 13.6784 13.027 13.6784 12.7109V9.17522C13.6784 9.09665 13.6141 9.03237 13.5356 9.03237Z"fill=white /></symbol><symbol id=fc-upload viewBox="0 0 14 14"xmlns=http://www.w3.org/2000/svg fill=none height=14 width=14><path d="M4.99986 3.53606H6.3195V9.57713C6.3195 9.65571 6.38379 9.71999 6.46236 9.71999H7.53379C7.61236 9.71999 7.67665 9.65571 7.67665 9.57713V3.53606H8.99986C9.1195 3.53606 9.18558 3.39856 9.11236 3.30571L7.11236 0.773562C7.099 0.756488 7.08192 0.742679 7.06243 0.733182C7.04294 0.723685 7.02154 0.71875 6.99986 0.71875C6.97818 0.71875 6.95678 0.723685 6.93729 0.733182C6.9178 0.742679 6.90072 0.756488 6.88736 0.773562L4.88736 3.30392C4.81415 3.39856 4.88022 3.53606 4.99986 3.53606ZM13.5356 9.04142H12.4641C12.3856 9.04142 12.3213 9.10571 12.3213 9.18428V11.9343H1.67843V9.18428C1.67843 9.10571 1.61415 9.04142 1.53557 9.04142H0.464146C0.385575 9.04142 0.321289 9.10571 0.321289 9.18428V12.72C0.321289 13.0361 0.576646 13.2914 0.892718 13.2914H13.107C13.4231 13.2914 13.6784 13.0361 13.6784 12.72V9.18428C13.6784 9.10571 13.6141 9.04142 13.5356 9.04142Z"fill=black /></symbol><symbol id=fc-delete viewBox="0 0 14 16"xmlns=http://www.w3.org/2000/svg fill=none height=16 width=14><path d="M4.28544 2.14118H4.14258C4.22115 2.14118 4.28544 2.0769 4.28544 1.99833V2.14118H9.71401V1.99833C9.71401 2.0769 9.77829 2.14118 9.85687 2.14118H9.71401V3.4269H10.9997V1.99833C10.9997 1.36797 10.4872 0.855469 9.85687 0.855469H4.14258C3.51222 0.855469 2.99972 1.36797 2.99972 1.99833V3.4269H4.28544V2.14118ZM13.2854 3.4269H0.714007C0.397935 3.4269 0.142578 3.68225 0.142578 3.99833V4.56976C0.142578 4.64833 0.206864 4.71261 0.285435 4.71261H1.36401L1.80508 14.0519C1.83365 14.6608 2.33722 15.1412 2.94615 15.1412H11.0533C11.664 15.1412 12.1658 14.6626 12.1944 14.0519L12.6354 4.71261H13.714C13.7926 4.71261 13.8569 4.64833 13.8569 4.56976V3.99833C13.8569 3.68225 13.6015 3.4269 13.2854 3.4269ZM10.9158 13.8555H3.08365L2.65151 4.71261H11.3479L10.9158 13.8555Z"fill=black /></symbol><symbol id=fc-add viewBox="0 0 28 30"xmlns=http://www.w3.org/2000/svg fill=none height=30 width=28><path d="M15.205 0.537109H12.7943C12.58 0.537109 12.4729 0.644252 12.4729 0.858538V13.4746H0.500628C0.286342 13.4746 0.179199 13.5818 0.179199 13.796V16.2068C0.179199 16.421 0.286342 16.5282 0.500628 16.5282H12.4729V29.1443C12.4729 29.3585 12.58 29.4657 12.7943 29.4657H15.205C15.4193 29.4657 15.5265 29.3585 15.5265 29.1443V16.5282H27.5006C27.7149 16.5282 27.8221 16.421 27.8221 16.2068V13.796C27.8221 13.5818 27.7149 13.4746 27.5006 13.4746H15.5265V0.858538C15.5265 0.644252 15.4193 0.537109 15.205 0.537109Z"fill=black fill-opacity=0.85 /></symbol><symbol id=fc-plus-min viewBox="0 0 1024 1024"xmlns=http://www.w3.org/2000/svg class=beicon><path d="M853.33 554.67H554.66v298.67h-85.333V554.67h-298.67v-85.333h298.67v-298.67h85.333v298.67h298.67v85.333z"fill=black /></symbol></svg>';let r=!1;var a,n,s={props:{name:{type:String,required:!0},fill:{type:String,default:""}},mounted(){if(!r&&!document.querySelector("#__FC_ICON__")){const t=document.createElement("div");t.id="__FC_ICON__",t.hidden=!0,t.innerHTML=o,document.body.appendChild(t,document.body.firstChild),r=!0}},render(t){const e={};return this.fill&&(e.fill=this.fill),t("svg",{class:"fc-icon fc-"+this.name,attrs:e},[t("use",{attrs:{"xlink:href":"#fc-"+this.name}})])}},l=s,c=(i(534),i(0)),d=Object(c["a"])(l,a,n,!1,null,null,null);e["a"]=d.exports},534:function(t,e,i){"use strict";i(500)},535:function(t,e,i){e=t.exports=i(2)(!1),e.push([t.i,"svg.fc-icon{fill:currentColor;pointer-events:none}",""])},545:function(t,e,i){"use strict";i.d(e,"a",(function(){return w}));var o,r=i(762),a=i(479),n=i(478),s=i(645),l=i(544),c=i(1310),d=i(930);function g(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function p(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?g(Object(i),!0).forEach((function(e){u(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):g(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function u(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}(function(t){t["Free"]="free",t["Fixed"]="Fixed"})(o||(o={}));const h=1,f=32,m=3;let b=0;class w extends r["a"]{constructor({minSize:t,maxHeight:e,maxWidth:i,controlPadding:r}={minSize:1,maxWidth:8e3,maxHeight:8e3,controlPadding:10}){super(),u(this,"name","CropPlugin"),u(this,"ratio",0),u(this,"cropControl",[]),u(this,"mouseEvent",{action:"",position:{x:0,y:0}}),u(this,"mode",o.Free),u(this,"_isModified",!1),u(this,"lastEvent",null),u(this,"inAnimationDuration",!1),u(this,"mousedown",t=>{if(!this.editor.instance)return;const e=this._getMouseAction(t);this.mouseEvent={action:e,position:this.editor.toCanvasCoord(t,!1)},this.lastEvent=t}),u(this,"mousemove",t=>{const{action:e}=this.mouseEvent;if(this._setMouseCursor(this._getMouseAction(t)),e)return void 0!==t.movementX&&void 0!==t.movementY||(this.lastEvent?(t.movementX=t.pageX-this.lastEvent.pageX,t.movementY=t.pageY-this.lastEvent.pageY):(t.movementX=0,t.movementY=0),this.lastEvent=t),this.isFixedMode?(this.isModified=!0,this._moveInstance(t)):"grab"===e?this.editor.zoom.toFixed(2)!==this.editor.originFitZoom.toFixed(2)&&(this.editor.setCursor("grabbing"),this.editor.panEditor(t.movementX,t.movementY)):(this.isModified=!0,"mv"===e?this._moveCropRect(t):this.ratio?this._resizeRectFixedly(t):this._resizeRectFreely(t))}),u(this,"mouseup",()=>{this.mouseEvent.action=""}),u(this,"mousemoveoutside",t=>{this.mousemove(t)}),u(this,"mouseupoutside",()=>{this.mouseup()}),this.minSize=Math.round(t),this.maxWidth=Math.round(i),this.maxHeight=Math.round(e),this.controlPadding=r}get isFreeMode(){return this.mode===o.Free}get isFixedMode(){return this.mode===o.Fixed}get scale(){const{instance:t}=this.editor;return t?t.scaleX:1}get isModified(){return this._isModified}set isModified(t){if(t===this._isModified)return;this._isModified=t;const e=this.cropControl[h];let i=0,o=[0,0],r=!1;t&&(i=.2,o=this.isFreeMode?[5,5]:[0,0],r=this.isFreeMode),this.editor.instance.set({opacity:i}),e.set({strokeDashArray:o}),this._bulkSetCtrlProps([13,14,15,16],{visible:r})}_onChange(){clearTimeout(b),b=setTimeout(()=>{this.changeHook&&this.changeHook(this._getCropInfo(),this.scale,this.editor.renderOptions.rotate)},8),this._renderMask(),this.editor.requestUpdateView()}_createImageCanvas(t){const e=document.createElement("canvas");e.width=t.width,e.height=t.height;const i=e.getContext("2d");return i.drawImage(t,0,0,t.width,t.height),e}async _getMarkCanvas(t,e,i){const o=await Object(s["b"])(t),{canvas:r,ctx:a}=Object(l["a"])(e,i),n=this._createImageCanvas(o);return a.fillStyle=a.createPattern(n,"repeat"),a.fillRect(0,0,e,i),r}async _drawCropControl(t,e){const i=this.editor.instance,{left:o,top:r,width:n,height:s}=i,c="#434951",d="#444950",g=n/2,p=s/2,u=new a["a"].Rect({name:"rect",strokeWidth:1,stroke:c,fill:"rgba(0, 0, 0, 0)",width:n,height:s,left:o,top:r});let h;t&&(h=new a["a"].Image(await this._getMarkCanvas(e,n,s),{rotateOffsetX:i.rotateOffsetX,rotateOffsetY:i.rotateOffsetY,width:n,height:s,left:o,top:r}));const b=new a["a"].Image(Object(l["a"])(n,s).canvas,{rotateOffsetX:i.rotateOffsetX,rotateOffsetY:i.rotateOffsetY,width:n,height:s,left:o,top:r}),w=new a["a"].Image(this.editor.getBackgroundRenderResult({width:u.width,height:u.height}),{width:n,height:s,left:o,top:r}),x=[[0,0,f,m,{x:-m,y:-m}],[0,0,m,f,{x:-m,y:-m}],[g,0,f,m,{x:-f/2,y:-m}],[n,0,f,m,{x:-f+m,y:-m}],[n,0,m,f,{x:0,y:-m}],[0,p,m,f,{x:-m,y:-f/2}],[n,p,m,f,{x:0,y:-f/2}],[0,s,f,m,{x:-m,y:0}],[0,s,m,f,{x:-m,y:-f+m}],[g,s,f,m,{x:-f/2,y:0}],[n,s,f,m,{x:-f+m,y:0}],[n,s,m,f,{x:0,y:-f+m}]].map(([t,e,i,o,r={x:0,y:0}])=>new a["a"].Rect({fill:d,uniformOffset:r,sizeUniform:!0,left:t,top:e,width:i,height:o})),y=n/3,v=s/3,k={stroke:d,strokeWidth:1,sizeUniform:!0},C=[[y,p,y,s+p],[2*y,p,2*y,s+p],[g,v,n+g,v],[g,2*v,n+g,2*v]].map(t=>new a["a"].Line(t,k));this.cropControl=[b,u,w,...x,...C],h&&this.cropControl.push(h),this.editor.ctx.add(...this.cropControl),this.editor.stickWithImg(...this.cropControl),w.sendToBack()}_getCropInfo(){const{left:t,top:e,width:i,height:o}=this.cropControl[h],{left:r,top:a}=this.editor.getEffectRenderOffset(),s=this.editor.instance,{left:l,top:c}=s,d={left:l,top:c};if(this.editor.renderOptions.rotate){const t=n["fabric"].util.degreesToRadians(this.editor.renderOptions.rotate),{tl:e,br:i}=this.editor.instance.aCoords,o=new n["fabric"].Point((e.x+i.x)/2,(e.y+i.y)/2),r=n["fabric"].util.rotatePoint(new n["fabric"].Point(e.x,e.y),o,-t);d.left=r.x,d.top=r.y}return{width:Math.round(i),height:Math.round(o),left:+(t-d.left-r).toFixed(2),top:+(e-d.top-a).toFixed(2)}}_getMouseAction(t){const e=this.editor.toRoundedCanvasCoord(t,!0),i=this.cropControl[h];if(this.isFreeMode){const t=["lt","lt","t","rt","rt","l","r","lb","lb","b","rb","rb"],i=this.cropControl.slice(h+2,h+14);for(let o=0;o<i.length;o++)if(this.editor.containsPoint(i[o],e,this.controlPadding))return t[o]}return this.editor.containsPoint(i,e)?"mv":"grab"}_setMouseCursor(t){if(!t)return void this.editor.setCursor("");const e={lt:"nwse-resize",rb:"nwse-resize",t:"ns-resize",b:"ns-resize",l:"ew-resize",r:"ew-resize",rt:"nesw-resize",lb:"nesw-resize",grab:"grab",mv:"move"}[t];this.editor.ctx.defaultCursor!==e&&this.editor.setCursor(e)}_getZoomedMovement(t){const e=this.editor.zoom,{x:i,y:o}=this.editor.toCanvasCoord(t,!1);return{movementX:t.movementX/e,movementY:t.movementY/e,x:i,y:o}}_moveInstance(t){const{movementX:e,movementY:i}=this._getZoomedMovement(t);this.setBounding({left:e,top:i},!1)}_moveCropRect(t){const{movementX:e,movementY:i}=this._getZoomedMovement(t);this.cropControl.slice(h,h+18).forEach(t=>{t.left+=e,t.top+=i,t.setCoords()}),this._onChange()}_bulkSetCtrlProps(t,e){const i=this.cropControl.slice(h+1,h+18);t.forEach(t=>{const o=i[t];o.set(e),o.setCoords()})}_checkSize(t){const e=this.cropControl[h];let{width:i=e.width,height:o=e.height}=t;const r=this.ratio;return i>this.maxWidth&&(i=this.maxWidth,r>0&&r<=1&&(o=i*r)),o>this.maxHeight&&(o=this.maxHeight,r>1&&(i=o/r)),{width:i,height:o}}_setCropRect(t,e=!1,i=30){const o=this.cropControl.slice(h+1,h+18),r=this.cropControl[h],a=this.cropControl[h+18];t.width&&(t.width=Math.round(t.width)),t.height&&(t.height=Math.round(t.height)),r.set(t),r.setCoords(),e&&(this.editor.fitObject(r,i),a&&this.editor.fitObject(a,i));const{left:n,top:s,width:l,height:c}=r,d=l/2,g=c/2;if((t.left||0===t.left||e)&&(this._bulkSetCtrlProps([0,1,2,6,8,9],{left:n}),this._bulkSetCtrlProps([15,16],{left:n+d})),(t.top||0===t.top||e)&&(this._bulkSetCtrlProps([0,1,2,3,4,5],{top:s}),this._bulkSetCtrlProps([13,14],{top:s+g})),t.width||e){this._bulkSetCtrlProps([4,5,7,11,12],{left:n+l}),this._bulkSetCtrlProps([15,16],{width:l,left:n+d}),this._bulkSetCtrlProps([3,10],{left:n+l/2});const t=l/3;o[13].set({left:n+t}),o[14].set({left:n+2*t})}if(t.height||e){this._bulkSetCtrlProps([8,9,10,11,12],{top:s+c}),this._bulkSetCtrlProps([13,14],{height:c,top:s+g}),this._bulkSetCtrlProps([6,7],{top:s+c/2});const t=c/3;o[15].set({top:s+t}),o[16].set({top:s+2*t})}if(t.width||t.height){const t=o[0];t.setElement(this.editor.getBackgroundRenderResult({width:l,height:c}))}this._onChange()}_renderMask(){const t=this.cropControl[0],e=Object(l["b"])(t._element),{width:i,height:o}=this.editor.instance;let{left:r,top:a,width:n,height:s}=this._getCropInfo();const{left:c,top:d,right:g,bottom:p}=this.editor.getEffectRenderOffset(),u=this.scale;r+=c,a+=d,e.clearRect(0,0,i,o),e.save(),e.drawImage(this.editor.instance._element,0,0),e.globalCompositeOperation="destination-in",e.fillStyle="#000";const h=(i-g+c)/2,f=(o-p+d)/2;e.translate(h,f),e.rotate(-Math.PI/180*this.editor.renderOptions.rotate),e.translate(-h,-f),e.fillRect(r/u,a/u,n/u,s/u),e.restore()}_calcSizeFromAction(t){const{movementX:e,movementY:i,x:o,y:r}=this._getZoomedMovement(t),{left:a,top:n,width:s,height:l}=this.cropControl[h],c=s>=this.maxWidth,d=l>=this.maxHeight;return{l:()=>o<a&&c?{width:s}:o>a&&s<1?{width:1}:{width:s-e},t:()=>r<n&&d?{height:l}:r>n&&l<1?{height:1}:{height:l-i},r:()=>{const t=a+s;return o>t&&c?{width:s}:o<t&&s<1?{width:1}:{width:s+e}},b:()=>{const t=n+l;return r>t&&d?{height:l}:r<t&&l<1?{height:1}:{height:l+i}}}}_resizeRectFreely(t){const{action:e}=this.mouseEvent,{left:i,top:o,width:r,height:a}=this.cropControl[h],n=e.split("");let s={};const l=this._calcSizeFromAction(t);n.forEach(t=>Object.assign(s,l[t]())),s=this._checkSize(s);const c={l:{left:i+r-s.width},t:{top:o+a-s.height},r:{},b:{}};n.forEach(t=>Object.assign(s,c[t])),this._setCropRect(s),this._setProperMatrixOnNeeded(e),this.editor.requestUpdateView()}_resizeRectFixedly(t){let e=this.mouseEvent.action;const i=this.cropControl[h],o=this.ratio,r=(t,e)=>{const{left:o,top:r}=this._calcScaledOffset(t,e/i.width);return{left:o+i.left,top:r+i.top}},a=t=>({width:t*o,height:t}),n=t=>({width:t,height:t/o}),{width:s,height:l}=i,[c,d]={lt:[s,l],t:[s/2,l],rt:[0,l],l:[s,l/2],r:[0,l/2],lb:[s,0],b:[s/2,0],rb:[0,0]}[e];e=e[0];const g=this._calcSizeFromAction(t)[e]();let u={l:n(g.width),t:a(g.height),r:n(g.width),b:a(g.height)}[e];u=this._checkSize(u);const f=r({x:c,y:d},u.width);this._setCropRect(p(p({},u),f)),this._setProperMatrixOnNeeded(e),this.editor.requestUpdateView()}_setProperMatrixOnNeeded(t){const{width:e,height:i}={width:this.editor.width,height:this.editor.height},o=this.editor.ctx.viewportTransform.slice(0),r=n["fabric"].util.invertTransform(o),{left:a,top:s,width:l,height:c}=this.cropControl[h],d=s+c,g=a+l,p=[r[4],r[5]],u={t:[0,20],b:[0,i-20],l:[30,0],r:[e-30,0]},f={t:t=>t.y>s,b:t=>t.y<d,l:t=>t.x>a,r:t=>t.x<g},m={t:t=>p[1]=s-r[3]*t.y,b:t=>p[1]=d-r[3]*t.y,l:t=>p[0]=a-r[0]*t.x,r:t=>p[0]=g-r[0]*t.x};t.split("").forEach(t=>{const e=new n["fabric"].Point(...u[t]),i=n["fabric"].util.transformPoint(e,r),o=f[t](i);o&&m[t](e)}),p[0]===r[4]&&p[1]===r[5]||(r[4]=p[0],r[5]=p[1],this.editor.ctx.setViewportTransform(n["fabric"].util.invertTransform(r)))}_calcScaledOffset(t,e){const i=this.editor.renderOptions.rotate,o=n["fabric"].util.degreesToRadians(i),r=Math.atan2(t.y,t.x),a=Math.hypot(t.x,t.y)*(1-e);return{left:a*Math.cos(r+o),top:a*Math.sin(r+o)}}_setInstanceProps(t,e,i){const o=this.editor.instance;if(!o)return;const r=this.cropControl[0];[o,r].forEach(o=>{o.set(t),e&&o.scale(e),(i||0===i)&&o.rotate(i),o.setCoords()}),this._onChange()}_setMode(t){this.mode=t,this.isModified=!1;const e=this.isFreeMode,i=this.cropControl.slice(h+2,h+14);i.forEach(t=>t.set({visible:e})),this.editor.requestUpdateView()}_calcRotatedCoords(t,e){const{left:i,top:o,width:r,height:a}=t,s=i+r,l=o+a,c=[[i,o],[s,o],[i,l],[s,l]],{rotatePoint:d}=n["fabric"].util,g=new n["fabric"].Point(i+r/2,o+a/2);return c.reduce((t,i)=>{const{x:o,y:r}=d(new n["fabric"].Point(...i),g,e);return t.push([o,r]),t},[])}async active(t,e){this.editor.renderOptions.renderBackground=!1,this.editor.renderOptions.fullEffect=!0;const{canvas:i}=this.editor.getEffectRenderResult(),o=this.editor.getEffectRenderOffset();this.editor.instance.setElement(i,{opacity:0,rotateOffsetX:o.left-o.right,rotateOffsetY:o.top-o.bottom}),this.editor.instance.setCoords(),await this._drawCropControl(t,e),this.editor.requestUpdateView()}inactive(){const t=()=>{this.inAnimationDuration?requestAnimationFrame(()=>{t()}):(this.cropControl&&(this.editor.unstick(...this.cropControl),this.editor.ctx.remove(...this.cropControl),this.cropControl.length=0),this.editor.instance.scale(1),this.editor.renderOptions.renderBackground=!0,this.editor.renderOptions.fullEffect=!1,this.editor.instance.rotate(0),this.editor.instance.set({opacity:1,rotateOffsetX:void 0,rotateOffsetY:void 0,strokeWidth:this.editor.options.imageBorder,stroke:this.editor.options.imageBorderColor}),this.editor.requestRenderImage())};t()}setFreeMode(){this._setMode(o.Free)}setFixedMode(){this._setMode(o.Fixed)}setRatio(t,e=!1){if(this.ratio=t,!t||e)return;this.isModified=!0;const{width:i,height:o}=this.editor.instance;if(!i||!o)return;const r=t>=1?{width:i,height:i/t}:{width:o*t,height:o};this.setCropRect(r,!1),this.editor.requestUpdateView()}resetCrop(t=!1){this.ratio=0,this._setInstanceProps({},1,0);const{left:e,top:i}=this.editor.instance,{width:o,height:r}=this.editor.getImageSize(),{left:a,top:n}=this.editor.getEffectRenderOffset();this._setCropRect({left:e+a,top:i+n,width:o,height:r},t),this.editor.requestUpdateView()}setAspectRatioRect(t){const{ratio:e}=this;return e?t.width?(t.height=t.width/e,this.setCropRect(t)):t.height?(t.width=t.height*e,this.setCropRect(t)):void 0:this.setCropRect(t)}setCropRect(t,e=!1,i=30){const o=this.cropControl[h],r={};t.width&&(r.left=o.left+(o.width-t.width)/2),t.height&&(r.top=o.top+(o.height-t.height)/2),this._setCropRect(p(p({},t),r),e,i),this.editor.requestUpdateView()}setBounding(t,e=!0){const i=this.editor.instance;let o=i.left,r=i.top;if(e){const t=this.cropControl[h];o=t.left,r=t.top}o+=t.left,r+=t.top,this._setInstanceProps({left:o,top:r}),this.editor.requestUpdateView()}setScale(t){this.isModified=!0;const{width:e,height:i,left:o,top:r}=this.editor.instance,a={},n=e*this.scale,s=i*this.scale,l=this._calcScaledOffset({x:n/2,y:s/2},t/this.scale);a.left=o+l.left,a.top=r+l.top,this._setInstanceProps(a,t),this.editor.requestUpdateView()}cropToEdge(){const t=this.editor.instance._element;let{width:e,height:i}=t;const o=this.scale;e*=o,i*=o;const r=e,a=i,{rotate:s}=this.editor.renderOptions,{degreesToRadians:d}=n["fabric"].util,g=d(s),p=this.editor.instance;let{left:u,top:h}=p;if(s%360){const t=this._calcRotatedCoords({left:0,top:0,width:e,height:i},g),o=[],r=[];t.forEach(([t,e])=>{o.push(t),r.push(e)}),e=Math.max(...o)-Math.min(...o),i=Math.max(...r)-Math.min(...r),p.rotate(0),p.setCoords();const{left:a,top:l,width:c,height:d}=p,{left:f,top:m,right:b,bottom:w}=this.editor.getEffectRenderOffset(),x=new n["fabric"].Point(a+(c+f-b)/2,l+(d+m-w)/2),y=Object.values(p.aCoords).map(t=>n["fabric"].util.rotatePoint(t,x,g)),[v,k]=y.reduce((t,e)=>(t[0]=Math.min(t[0],e.x),t[1]=Math.min(t[1],e.y),t),[1/0,1/0]);u=v,h=k,p.rotate(s),p.setCoords()}const{ctx:f,canvas:m}=Object(l["a"])(e,i),b=e/2,w=i/2;f.translate(b,w),f.rotate(g),f.translate(-b,-w),f.drawImage(t,(e-r)/2,(i-a)/2,r,a);const x=f.getImageData(0,0,m.width,m.height),{lOffset:y,tOffset:v,rOffset:k,bOffset:C}=Object(c["a"])(x),_={left:y,top:v,width:k-y,height:C-v};return this._setCropRect({left:u+_.left,top:h+_.top,width:_.width,height:_.height},!1),this.editor.requestUpdateView(),_}setRotate(t){this.isModified=!0,this._setInstanceProps({},void 0,t),this.editor.requestUpdateView()}confirmCrop(){const t=this.editor.getFitMatrix(this.cropControl[h],30),e=this.editor.ctx.viewportTransform.slice(0),i=[[e[0],t[0]],[e[3],t[3]],[e[4],t[4]],[e[5],t[5]]].map(t=>Object(d["a"])("CubicEaseInOut",t[0],t[1],600)),o=Object(d["a"])("CubicEaseOut",this.editor.instance.opacity||0,0,600);this.isModified=!1;let r=16;const a=()=>{r>=600?(this.inAnimationDuration=!1,this.editor.ctx.setViewportTransform(t),this.editor.instance.set({opacity:0}),this.editor.requestUpdateView()):(this.inAnimationDuration=!0,this.editor.ctx.setViewportTransform([i[0](r),0,0,i[1](r),i[2](r),i[3](r)]),this.editor.instance.set({opacity:o(r)}),this.editor.updateView(),r+=16,requestAnimationFrame(a))};requestAnimationFrame(a)}}},546:function(t,e,i){var o=i(648);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var r=i(3).default;r("db8ba3ba",o,!0,{sourceMap:!1})},547:function(t,e,i){var o=i(650);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var r=i(3).default;r("c4c0043a",o,!0,{sourceMap:!1})},548:function(t,e,i){var o=i(652);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var r=i(3).default;r("19c72c23",o,!0,{sourceMap:!1})},549:function(t,e,i){var o=i(654);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var r=i(3).default;r("3111d74c",o,!0,{sourceMap:!1})},550:function(t,e,i){var o=i(657);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var r=i(3).default;r("fa57a6c2",o,!0,{sourceMap:!1})},551:function(t,e,i){var o=i(659);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var r=i(3).default;r("61de8c47",o,!0,{sourceMap:!1})},552:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjkiIGhlaWdodD0iNzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgo8ZGVmcz4KICAgIDxsaW5lYXJHcmFkaWVudCB4MT0iNTAlIiB5MT0iMCUiIHgyPSI1MCUiIHkyPSIxMDAlIiBpZD0iYyI+CiAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iIzBDNzdGRiIgb2Zmc2V0PSIwJSIvPgogICAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiMyMjU0RjQiIG9mZnNldD0iMTAwJSIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxwYXRoIGQ9Ik0yOC41IDQ5LjI3OWMxLjgxNCAwLTEuNzMgNC45MDcgMCA0LjcyQzQ0LjM5IDUyLjI4IDU0IDM3LjMyNSA1NCAyNS4yMDIgNTQgMTEuMjg2IDQyLjU4My4wMDQgMjguNS4wMDRTMyAxMS4yODYgMyAyNS4yMDJzMTEuNDE3IDI0LjA3NyAyNS41IDI0LjA3N3oiIGlkPSJiIi8+CjwvZGVmcz4KPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNiA2KSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgIDx1c2UgZmlsbD0iIzAwMCIgZmlsdGVyPSJ1cmwoI2EpIiB4bGluazpocmVmPSIjYiIvPgogICAgPHVzZSBmaWxsPSJ1cmwoI2MpIiB4bGluazpocmVmPSIjYiIvPgogICAgPGVsbGlwc2UgZmlsbD0iI0ZGRiIgY3g9IjI2LjI1IiBjeT0iMTIiIHJ4PSIyLjI1IiByeT0iMyI+CiAgICAgICAgPGFuaW1hdGUKICAgICAgICAgICAgYXR0cmlidXRlTmFtZT0icnkiCiAgICAgICAgICAgIGF0dHJpYnV0ZVR5cGU9IlhNTCIKICAgICAgICAgICAgZnJvbT0iMyIgdG89IjAuNSIKICAgICAgICAgICAgdmFsdWVzPSIzOyAxOyAzOyAxOyAzOyAzIgogICAgICAgICAgICBrZXlUaW1lcz0iMDsgMC4wMjsgMC4wNDsgMC4wNjsgMC4wODsgMSIKICAgICAgICAgICAgYmVnaW49IjAiIGR1cj0iNnMiCiAgICAgICAgICAgIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIgogICAgICAgIC8+CiAgICA8L2VsbGlwc2U+CiAgICA8ZWxsaXBzZSBmaWxsPSIjRkZGIiBjeD0iMTcuMjUiIGN5PSIxMiIgcng9IjIuMjUiIHJ5PSIzIj4KICAgICAgICA8YW5pbWF0ZQogICAgICAgICAgICBhdHRyaWJ1dGVOYW1lPSJyeSIKICAgICAgICAgICAgYXR0cmlidXRlVHlwZT0iWE1MIgogICAgICAgICAgICBmcm9tPSIzIiB0bz0iMC41IgogICAgICAgICAgICB2YWx1ZXM9IjM7IDE7IDM7IDE7IDM7IDMiCiAgICAgICAgICAgIGtleVRpbWVzPSIwOyAwLjAyOyAwLjA0OyAwLjA2OyAwLjA4OyAxIgogICAgICAgICAgICBiZWdpbj0iMCIgZHVyPSI2cyIKICAgICAgICAgICAgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiCiAgICAgICAgLz4KICAgIDwvZWxsaXBzZT4KICAgIDxwYXRoIGQ9Ik0yNi4xNDYgMjFjLS41OTIgMy40OTYtMi4xOTIgNi00LjA3MyA2LTEuODggMC0zLjQ4LTIuNTA0LTQuMDczLTZ6IiBmaWxsPSIjRkZGIi8+CjwvZz4KPC9zdmc+"},553:function(t,e,i){var o=i(661);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var r=i(3).default;r("8edbbffa",o,!0,{sourceMap:!1})},554:function(t,e,i){var o=i(663);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var r=i(3).default;r("111e666b",o,!0,{sourceMap:!1})},555:function(t,e,i){var o=i(667);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var r=i(3).default;r("d32a7c7a",o,!0,{sourceMap:!1})},556:function(t,e,i){var o=i(669);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var r=i(3).default;r("0519cbf3",o,!0,{sourceMap:!1})},557:function(t,e,i){var o=i(671);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var r=i(3).default;r("e682ea44",o,!0,{sourceMap:!1})},562:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));const o={MATTING_ABTEST_VARIABLE:"matting_api_3_7",MATTING_EDITOR_MAX_SIZE:3e3,SAMPLE_URLS:["https://st-gdx.dancf.com/gaodingx/452/configs/system/20200624-165249-39e4.png","https://st-gdx.dancf.com/gaodingx/452/configs/system/20200624-165335-4c42.jpg","https://st-gdx.dancf.com/gaodingx/452/configs/system/20200624-165349-ff49.jpg","https://st-gdx.dancf.com/gaodingx/452/configs/system/20200624-165407-d9fc.jpg"]}},563:function(t,e,i){var o=i(690);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var r=i(3).default;r("6f2bd27e",o,!0,{sourceMap:!1})},569:function(t,e,i){var o=i(712);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var r=i(3).default;r("3dadb5b3",o,!0,{sourceMap:!1})},589:function(t,e,i){"use strict";function o(t,e){try{if(!/\.(jpg|jpeg|png)/i.test(t))return`${t}.${e}`;const i=t.substr(0,t.lastIndexOf("."))||t;return`${i}.${e}`}catch(i){return t}}i.d(e,"a",(function(){return o}))},605:function(t,e,i){"use strict";var o=i(461),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"editor-root"},[i("div",{staticClass:"editor-header"},[i("div",{staticClass:"header-section home-section"},[t.homeBtnLink?i("a",{staticClass:"home-link",on:{click:t.homeEvent}},[t._t("home-icon",(function(){return[i("Icon2",{class:t.homeBtnLinkIcon+"-icon",attrs:{name:t.homeBtnLinkIcon}})]}))],2):t._e(),t.currentPatchingMode?[t.showSwitchBtn?i("div",{staticClass:"clip-header-label",on:{click:t.switchPatchingMode}},[t._v("\n                    "+t._s(t.$t("mattingEditor.switchOldVersion"))+"\n                ")]):t._e()]:[t.homeBtnLink?i("div",{staticClass:"gap"}):t._e(),i("div",{staticClass:"title"},["switch"===t.sdkMode?i("lg-tabs",{attrs:{currentTab:t.currentMode,tabs:t.modeTabs,beforeSwitch:t.beforeModeSwitch},on:{"update:currentTab":function(e){t.currentMode=e},"update:current-tab":function(e){t.currentMode=e}}}):i("div",[t._v("\n                        "+t._s("manual"===t.sdkMode?t.$t("mattingEditor.general"):t.$t("mattingEditor.auto"))+"\n                    ")])],1),t.showSwitchBtn?i("div",{staticClass:"clip-header-label",on:{click:function(e){return t.switchPatchingMode("new")}}},[t._v("\n                    "+t._s(t.$t("mattingEditor.switchNewVersion"))+"\n                ")]):t._e()]],2),i("ClipTransition",{attrs:{name:"clip-vs"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:""===t.currentResultTool,expression:"currentResultTool === ''"}],staticClass:"header-section snapshot-section"},[i("lg-button",{staticClass:"undo-btn",attrs:{type:"text",disabled:!t.editor.hasUndo},nativeOn:{click:function(e){return t.undo.apply(null,arguments)}}},[i("Icon2",{staticClass:"px-18",attrs:{name:"undo"}}),t._v("\n                    "+t._s(t.$t("mattingEditor.tools.undo"))+"\n                ")],1),i("lg-button",{staticClass:"redo-btn",attrs:{type:"text",disabled:!t.editor.hasRedo},nativeOn:{click:function(e){return t.redo.apply(null,arguments)}}},[i("Icon2",{staticClass:"px-18",attrs:{name:"redo"}}),t._v("\n                    "+t._s(t.$t("mattingEditor.tools.redo"))+"\n                ")],1),i("lg-button",{staticClass:"startover",attrs:{type:"text"},nativeOn:{click:function(e){return t.startover.apply(null,arguments)}}},[i("Icon2",{staticClass:"px-18",attrs:{name:"startover"}}),t._v("\n                    "+t._s(t.$t("mattingEditor.tools.startover"))+"\n                ")],1)],1)]),i("div",{staticClass:"header-section image-section"},[t._t("cancel",(function(){return[i("lg-button",{staticClass:"cancel-btn",attrs:{type:"text"},nativeOn:{click:function(e){return t.$emit("clip-cancel")}}},[t._v("\n                    "+t._s(t.$t("mattingEditor.cancel"))+"\n                ")])]})),t._t("complete",(function(){return[i("lg-button",{staticClass:"download-btn",attrs:{type:"primary"},nativeOn:{click:function(e){return t.$emit("clip-export")}}},[t._v("\n                    "+t._s(t.completeBtnText||t.$t("mattingEditor.finish"))+"\n                ")])]}))],2)],1),i("div",{staticClass:"editor-function-panel"},[i("ClipTransition",[t.currentResultTool?i("div",{key:"lego",staticClass:"editor-function-group lego"},[i("lg-button",{nativeOn:{click:function(e){return t.toggleResultTool("")}}},[t._v("\n                    "+t._s(t.$t("mattingEditor.effects.back"))+"\n                ")])],1):["general"===t.currentMode||t.currentPatchingMode?i("div",{key:"matting",staticClass:"editor-function-group basic-matting"},[i("MattingTools",{attrs:{buttons:t.generalMattingTools(),currentTool:t.currentMattingTool},on:{change:function(e){return t.toggleMattingTool(e)}}}),i("div",{staticClass:"gap"}),i("MattingTools",{attrs:{buttons:t.otherGeneralMattingTools(),currentTool:t.currentMattingTool},on:{change:function(e){return t.toggleMattingTool(e)}}})],1):i("div",{key:"auto",staticClass:"editor-function-group basic-matting"},[i("MattingTools",{attrs:{buttons:[{name:"recognition",icon:"recognition",text:t.$t("mattingEditor.funcs.mode")},{name:"repair-brush",icon:"repair-brush",text:t.$t("mattingEditor.funcs.restore")},{name:"eraser-brush",icon:"erase-brush",text:t.$t("mattingEditor.funcs.erase")}],currentTool:t.currentMattingTool},on:{change:function(e){return t.toggleMattingTool(e)}}})],1)]],2),i("div",{staticClass:"editor-function-group result-function"},[t.postTool.filter&&t.useFilter&&!t.noSupportFilterBrowser?i("lg-sbutton",{staticClass:"filter-btn",attrs:{"select-style":"type2",active:"filter"===t.currentResultTool},nativeOn:{click:function(e){return t.toggleResultTool("filter")}}},[i("lg-icon",{staticClass:"px-18 plain",attrs:{name:"filter"}}),i("lg-icon",{staticClass:"px-18 hover",attrs:{name:"filter-active"}}),i("span",{staticClass:"text"},[t._v(t._s(t.$t("mattingEditor.effects.filter.title")))])],1):t._e(),t.postTool.background?i("lg-sbutton",{attrs:{"select-style":"type2",active:"background"===t.currentResultTool},nativeOn:{click:function(e){return t.toggleResultTool("background")}}},[i("lg-icon",{staticClass:"px-18 plain",attrs:{name:"background"}}),i("lg-icon",{staticClass:"px-18 hover",attrs:{name:"background-active"}}),i("span",{staticClass:"text"},[t._v(t._s(t.$t("mattingEditor.effects.bg.title")))])],1):t._e(),t.postTool.crop?i("lg-sbutton",{attrs:{"select-style":"type2",active:"crop"===t.currentResultTool},nativeOn:{click:function(e){return t.toggleResultTool("crop")}}},[i("lg-icon",{staticClass:"px-18 plain",attrs:{name:"crop"}}),i("lg-icon",{staticClass:"px-18 hover",attrs:{name:"crop-active"}}),i("span",{staticClass:"text"},[t._v(t._s(t.$t("mattingEditor.effects.crop.title")))])],1):t._e(),t.postTool.shadow?i("lg-sbutton",{attrs:{"select-style":"type2",active:"shadow"===t.currentResultTool},nativeOn:{click:function(e){return t.toggleResultTool("shadow")}}},[i("lg-icon",{staticClass:"px-18 plain",attrs:{name:"shadow"}}),i("lg-icon",{staticClass:"px-18 hover",attrs:{name:"shadow-active"}}),i("span",{staticClass:"text"},[t._v(t._s(t.$t("mattingEditor.effects.shadow.title")))])],1):t._e()],1)],1),i("div",{staticClass:"editor-main"},[i("div",{staticClass:"matting-editor-container"},[i("div",{staticClass:"matting-container"},[i("div",{ref:"source",staticClass:"source"},[i("FadeTransition",[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showBrushSizeIndicator,expression:"showBrushSizeIndicator"}],staticClass:"brush-size",class:[t.currentMattingTool],style:t.indicatorGradient(t.brushIndicator.size,t.brushIndicator.feather)})])],1),i("div",{staticClass:"gap"}),i("div",{ref:"result",staticClass:"result"},[i("lg-loading",{directives:[{name:"show",rawName:"v-show",value:t.isMatting.matting||t.isMatting.hair||t.isMatting.auto||t.isMatting.classify||t.isMatting.filter,expression:"\n                            isMatting.matting ||\n                            isMatting.hair ||\n                            isMatting.auto ||\n                            isMatting.classify ||\n                            isMatting.filter\n                        "}],staticClass:"matting-loading"},[i("div",{staticStyle:{"text-align":"center"}},[t._v("\n                            "+t._s(t.$t("mattingEditor.loading."+(t.isMatting.classify?"identifying":"generating")))+"\n                        ")])])],1),i("ClipTransition",{attrs:{name:"clip-vs",mode:"out-in"}},["recognition"===t.currentMattingTool||"premask"===t.currentMattingTool?i("lg-container",{key:"recognition",staticClass:"recognition-control control-panel vertical"},[i("div",{staticClass:"title"},[i("div",[t._v(t._s(t.$t("mattingEditor.funcs.type")))]),"premask"===t.currentMattingTool?i("div",{staticClass:"clip__use-auto-clip"},[i("Checkbox",{on:{input:t.toggleAutoClip},model:{value:t.useAutoClip,callback:function(e){t.useAutoClip=e},expression:"useAutoClip"}},[i("span",[t._v("\n                                        "+t._s(t.$t("mattingEditor.loading.autoIdentifying"))+"\n                                    ")])])],1):t._e()]),i("div",{staticClass:"controls"},[i("lg-sbutton",{staticClass:"recognition-btn icon-highlight-btn",attrs:{selectStyle:"dark"===t.styleMode?"type3":"type1",active:"portrait"===t.recognitionSubTool},nativeOn:{click:function(e){return t.toggleRecognitionTool("portrait")}}},[i("Icon2",{attrs:{name:"portrait"}}),i("span",{staticClass:"text"},[t._v("\n                                    "+t._s(t.$t("mattingEditor.funcs.portrait"))+"\n                                ")])],1),i("lg-sbutton",{staticClass:"recognition-btn icon-highlight-btn",attrs:{selectStyle:"dark"===t.styleMode?"type3":"type1",active:"product"===t.recognitionSubTool},nativeOn:{click:function(e){return t.toggleRecognitionTool("product")}}},[i("Icon2",{attrs:{name:"product"}}),i("span",{staticClass:"text"},[t._v("\n                                    "+t._s(t.$t("mattingEditor.funcs.product"))+"\n                                ")])],1),i("lg-sbutton",{staticClass:"recognition-btn icon-highlight-btn",attrs:{selectStyle:"dark"===t.styleMode?"type3":"type1",active:"graphic"===t.recognitionSubTool},nativeOn:{click:function(e){return t.toggleRecognitionTool("graphic")}}},[i("Icon2",{attrs:{name:"graphic"}}),i("span",{staticClass:"text"},[t._v(t._s(t.$t("mattingEditor.funcs.graph")))])],1)],1)]):t._e(),"repair-brush"!==t.currentMattingTool&&"eraser-brush"!==t.currentMattingTool||t.isOperation?t._e():i("lg-container",{key:"autobrushsize",staticClass:"auto-clip-brush-control brush-size-control control-panel"},[i("div",{staticClass:"title"},[t._v(t._s(t.$t("mattingEditor.funcs.brushSize")))]),i("div",{staticClass:"control"},[i("lg-icon",{staticClass:"px-10",attrs:{name:"minus"}}),i("lg-ranger",{attrs:{max:50,min:1,width:98,styleMode:t.styleMode},model:{value:t.autoBrushSize,callback:function(e){t.autoBrushSize=e},expression:"autoBrushSize"}}),i("lg-icon",{staticClass:"px-10",attrs:{name:"plus"}})],1),i("div",{staticClass:"title feather-range"},[t._v("\n                            "+t._s(t.$t("mattingEditor.funcs.brushHardness"))+"\n                        ")]),i("div",{staticClass:"control"},[i("lg-icon",{staticClass:"px-10",attrs:{name:"feather-enhance"}}),i("lg-ranger",{attrs:{max:99,min:0,width:98,styleMode:t.styleMode},model:{value:t.autoFeatherSize,callback:function(e){t.autoFeatherSize=e},expression:"autoFeatherSize"}}),i("lg-icon",{staticClass:"px-10",attrs:{name:"shrink-abate"}})],1)]),"keep"!==t.currentMattingTool&&"drop"!==t.currentMattingTool&&"eraser"!==t.currentMattingTool||t.isOperation?t._e():i("lg-container",{key:"brushsize",staticClass:"brush-size-control control-panel"},[i("div",{staticClass:"title"},[t._v(t._s(t.$t("mattingEditor.funcs.brushSize")))]),i("div",{staticClass:"control"},[i("lg-icon",{staticClass:"px-10",attrs:{name:"minus"}}),i("lg-ranger",{attrs:{max:50,min:1,width:98,styleMode:t.styleMode},model:{value:t.brushSize,callback:function(e){t.brushSize=e},expression:"brushSize"}}),i("lg-icon",{staticClass:"px-10",attrs:{name:"plus"}})],1)]),"edge"!==t.currentMattingTool||t.isOperation?t._e():i("lg-container",{key:"edge",staticClass:"feather-size-control control-panel"},[i("div",{staticClass:"title"},[t._v(t._s(t.$t("mattingEditor.funcs.feather")))]),i("div",{staticClass:"control"},[i("lg-icon",{staticClass:"px-10",attrs:{name:"shrink-abate"}}),i("lg-ranger",{attrs:{max:6,min:0,width:98,styleMode:t.styleMode},model:{value:t.featherRadius,callback:function(e){t.featherRadius=e},expression:"featherRadius"}}),i("lg-icon",{staticClass:"px-10",attrs:{name:"feather-enhance"}})],1)]),"hair"!==t.currentMattingTool||t.isOperation?t._e():i("lg-container",{key:"hair",staticClass:"hair-control control-panel"},[i("div",{staticClass:"control-section"},[i("div",{staticClass:"title"},[t._v(t._s(t.$t("mattingEditor.funcs.markHair")))]),i("div",{staticClass:"controls"},[i("lg-sbutton",{staticClass:"hair-brush-btn icon-highlight-btn",attrs:{active:"brush"===t.hairSubTool},nativeOn:{click:function(e){return t.toggleHairTool("brush")}}},[i("lg-icon",{staticClass:"plain px-18",attrs:{name:"brush"}}),i("lg-icon",{staticClass:"active px-18",attrs:{name:"brush-highlight"}}),i("span",{staticClass:"text"},[t._v("\n                                        "+t._s(t.$t("mattingEditor.funcs.markPen"))+"\n                                    ")])],1),i("lg-sbutton",{staticClass:"icon-highlight-btn",attrs:{active:"eraser"===t.hairSubTool},nativeOn:{click:function(e){return t.toggleHairTool("eraser")}}},[i("Icon2",{staticClass:"px-18",attrs:{name:"eraser"}})],1)],1)]),i("div",{staticClass:"control-section"},[i("div",{staticClass:"title"},[t._v(t._s(t.$t("mattingEditor.funcs.hairColor")))]),i("div",{staticClass:"controls"},[i("lg-sbutton",{staticClass:"eyedropper icon-highlight-btn",attrs:{active:"hair-eyedropper"===t.hairSubTool},nativeOn:{click:function(e){return t.toggleHairTool("hair-eyedropper")}}},[i("lg-icon",{staticClass:"plain px-18",attrs:{name:"eyedropper"}}),i("lg-icon",{staticClass:"active px-18",attrs:{name:"eyedropper-highlight"}})],1),i("lg-container",{staticClass:"palettes"},t._l(6,(function(e){return i("div",{key:e,staticClass:"color",class:{even:e%2===0,filled:!!t.editor.hairColors[e-1]},style:{backgroundColor:t.editor.hairColors[e-1]?"#"+t.editor.hairColors[e-1]:""},on:{click:function(i){t.editor.hairColors[e-1]&&t.removeColor(e-1,"hair")}}},[i("lg-icon",{staticClass:"px-11",attrs:{name:"cross"}})],1)})),0)],1)]),i("div",{staticClass:"control-section"},[i("div",{staticClass:"title"},[t._v(t._s(t.$t("mattingEditor.funcs.bgColor")))]),i("div",{staticClass:"controls"},[i("lg-sbutton",{staticClass:"eyedropper icon-highlight-btn",attrs:{active:"bg-eyedropper"===t.hairSubTool},nativeOn:{click:function(e){return t.toggleHairTool("bg-eyedropper")}}},[i("lg-icon",{staticClass:"plain px-18",attrs:{name:"eyedropper"}}),i("lg-icon",{staticClass:"active px-18",attrs:{name:"eyedropper-highlight"}})],1),i("lg-container",{staticClass:"palettes"},t._l(6,(function(e){return i("div",{key:e,staticClass:"color",class:{even:e%2===0,filled:!!t.editor.bgColors[e-1]},style:{backgroundColor:t.editor.bgColors[e-1]?"#"+t.editor.bgColors[e-1]:""},on:{click:function(i){t.editor.bgColors[e-1]&&t.removeColor(e-1,"bg")}}},[i("lg-icon",{staticClass:"px-11",attrs:{name:"cross"}})],1)})),0)],1)])])],1),i("div",{staticClass:"zoom-pan-panel"},[i("Tooltip",{staticStyle:{height:"18px"},attrs:{placement:"top"}},[i("template",{slot:"content"},[i("span",[t._v(t._s(t.$t("mattingEditor.tools.pan")))])]),i("lg-icon",{staticClass:"px-18 pan-icon",attrs:{name:"pan-active","hover-name":"pan"},nativeOn:{click:function(e){return t.usePan.apply(null,arguments)}}})],2),i("Tooltip",{staticStyle:{height:"18px"},attrs:{placement:"top"}},[i("template",{slot:"content"},[i("span",[t._v(t._s(t.$t("mattingEditor.tools.zoomout")))])]),i("lg-icon",{staticClass:"px-18",attrs:{name:"zoomout-active","hover-name":"zoomout"},nativeOn:{click:function(e){return t.setZoom("out")}}})],2),i("span",{staticClass:"zoom-level",on:{click:t.fitOrActualSize}},[i("span",{staticClass:"text"},[t._v(t._s(Math.floor(100*t.editor.zoomLevel))+"%")]),i("lg-icon",{class:{hover:1===t.editor.zoomLevel},attrs:{name:"fit-image px-18"}}),i("lg-icon",{class:{hover:1!==t.editor.zoomLevel},attrs:{name:"real-size px-18"}})],1),i("Tooltip",{staticStyle:{height:"18px"},attrs:{placement:"top"}},[i("template",{slot:"content"},[i("span",[t._v(t._s(t.$t("mattingEditor.tools.zoomin")))])]),i("lg-icon",{staticClass:"px-18",attrs:{name:"zoomin-active","hover-name":"zoomin"},nativeOn:{click:function(e){return t.setZoom("in")}}})],2)],1)],1),i("LegoEditor",{ref:"LegoEditor",staticClass:"lego-editor-container",attrs:{type:t.currentResultTool,useClipFaceDetect:t.useClipFaceDetect,useFilter:t.postTool.filter&&t.useFilter,useWatermark:t.useWatermark,useBackground:t.postTool.background,styleMode:t.styleMode},on:{background:t.setBackground,crop:t.setCrop,rotate:t.setRotate,shadow:t.setShadow,outline:t.setOutline,filter:t.setFilter}}),t.isGD&&t.useHelp?i("helpButton",{attrs:{externalStyle:{right:""===t.currentResultTool?"10px":"274px"},showCustomService:t.showCustomService},on:{"help-click":t.showHelp,"customer-service":function(e){return t.$emit("customer-service")}}}):t._e()],1)]),i("LoadingDialog",{attrs:{styleMode:t.styleMode,show:t.loading.show,progress:t.loading.progress,title:t.loading.title}}),t.useHelp?i("MiniGuide",{ref:"guide",attrs:{article:t.helpArticle,showCustomService:t.showCustomService,innerStyle:{right:t.currentResultTool?"274px":"10px"}},on:{"customer-service":function(e){return t.$emit("customer-service")},close:function(e){t.helpVisible=!1}}}):t._e(),i("ClipFocus",{attrs:{active:t.focusActive,left:t.currentPatchingMode?131:43},on:{click:function(e){return t.markUsed()}}},[i("span",[t._v(t._s(t.$t("mattingEditor.guide.blueBrush"))+" ")]),i("span",{staticClass:"icon keep"}),i("span",[t._v("，"+t._s(t.$t("mattingEditor.guide.markRetention"))+"；")]),i("br"),i("span",[t._v(t._s(t.$t("mattingEditor.guide.redBrush"))+" ")]),i("span",[i("span",{staticClass:"icon drop"})]),i("span",[t._v("，"+t._s(t.$t("mattingEditor.guide.markRemoval"))+"。")])])],1)},a=[],n=i(495),s=i.n(n),l=i(470),c=i(740),d=i(522),g=(i(236),i(458)),p=i(494),u=i.n(p),h=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Dialog",{staticClass:"clip-loading-dialog",attrs:{visible:t.show,showClose:!1}},[[i("div",[i("h3",{staticClass:"title"},[t._v(t._s(t.title))])]),i("UIProgress",{attrs:{value:t.progress,styleMode:t.styleMode}})]],2)},f=[],m=l["a"].create({name:"LoadingDialog",components:{Dialog:l["a"],UIProgress:i(741).default},props:{show:{type:Boolean,required:!0},progress:{type:Number,required:!0},styleMode:{type:String,default:"blue"},title:{type:String,required:!0}}}),b=m,w=(i(649),i(0)),x=Object(w["a"])(b,h,f,!1,null,null,null),y=x.exports,v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.show||t.isLoading,expression:"show || isLoading"}],staticClass:"lego-editor-container",style:{opacity:t.show?1:0,zIndex:t.show?null:-1}},[i("div",{ref:"container",staticClass:"lego-container"},[i("div",{staticClass:"zoom-pan-panel"},[i("Tooltip",{staticStyle:{height:"18px"},attrs:{placement:"top"}},[i("template",{slot:"content"},[i("span",[t._v(t._s(t.$t("mattingEditor.tools.zoomout")))])]),i("lg-icon",{staticClass:"px-18",attrs:{name:"zoomout-active","hover-name":"zoomout"},nativeOn:{click:function(e){return t.setZoom("out")}}})],2),i("span",{staticClass:"zoom-level",on:{click:t.fitOrActualSize}},[i("span",{staticClass:"text"},[t._v(t._s(Math.floor(t.editor.zoomLevel))+"%")]),i("lg-icon",{class:{hover:100===t.editor.zoomLevel},attrs:{name:"fit-image px-18"}}),i("lg-icon",{class:{hover:100!==t.editor.zoomLevel},attrs:{name:"real-size px-18"}})],1),i("Tooltip",{staticStyle:{height:"18px"},attrs:{placement:"top"}},[i("template",{slot:"content"},[i("span",[t._v(t._s(t.$t("mattingEditor.tools.zoomin")))])]),i("lg-icon",{staticClass:"px-18",attrs:{name:"zoomin-active","hover-name":"zoomin"},nativeOn:{click:function(e){return t.setZoom("in")}}})],2),t.useFilter&&"filter"===t.type&&(t.filterInfo.selectedFilter[0]||t.filterInfo.selectedFilter[1])?i("Tooltip",{staticStyle:{height:"18px"},attrs:{placement:"top"}},[i("span",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(t.$t("mattingEditor.effects.filter.origin")))]),i("lg-icon",{staticClass:"compare-icon px-18",attrs:{name:"compare-active","hover-name":t.comparing?"compare-pressed":"compare"},nativeOn:{mousedown:function(e){return t.showOriginImage(!0)},mouseup:function(e){return t.showOriginImage(!1)}}})],1):t._e()],1)]),i("div",{staticClass:"lego-sidebars"},[i("CropPanel",{directives:[{name:"show",rawName:"v-show",value:"crop"===t.type,expression:"type === 'crop'"}],ref:"cropPanel",staticClass:"lego-sidebar crop",attrs:{sourceImage:t.$parent.editor.sourceImage,sourceWidth:t.sourceWidth,sourceHeight:t.sourceHeight,useClipFaceDetect:t.useClipFaceDetect,cropRect:t.cropRect,scale:t.scale,rotate:t.rotate,styleMode:t.styleMode},on:{"update:rotate":function(e){t.rotate=e},"set-normal-type":t.properZoom,"update-result":t.updateImageResult,toggleLoading:t.setLoadingDialog}}),i("div",{directives:[{name:"show",rawName:"v-show",value:"background"===t.type,expression:"type === 'background'"}],staticClass:"lego-sidebar background"},[i("div",{staticClass:"title"},[i("h2",{staticClass:"text"},[t._v(t._s(t.$t("mattingEditor.effects.bg.color")))])]),i("div",{staticClass:"content"},["background"===t.type?i("ColorPanel",{attrs:{styleMode:t.styleMode,preset:t.background.presetColors,value:t.background.backgroundInfo.color||"transparent",transparentName:t.$t("mattingEditor.effects.bg.transparent")},on:{input:function(e){return t.setBackground("transparent"===e?null:e)}}}):t._e()],1),i("div",{staticClass:"title"},[i("h2",{staticClass:"text"},[t._v(t._s(t.$t("mattingEditor.effects.bg.template")))])]),i("div",{staticClass:"content"},[i("ImagePicker",{ref:"bgImagePicker",on:{error:t.errorMsg,change:t.uploadBg}}),i("ul",{staticClass:"material-list"},[i("lg-button",{staticClass:"background-material custom",nativeOn:{click:function(e){return t.$refs.bgImagePicker.showFileDialog()}}},[i("span",{staticClass:"icon"}),i("span",[t._v(t._s(t.$t("mattingEditor.effects.bg.customize")))])]),t._l(t.background.materials,(function(e){return i("li",{key:e.id,staticClass:"background-material",class:[t.templateBorder,e.url===t.background.backgroundInfo.image?"active":""],style:{backgroundImage:"url("+e.preview+")"},attrs:{role:"button"},on:{click:function(i){return t.setBackground(e.url)}}})}))],2)],1)]),i("div",{directives:[{name:"show",rawName:"v-show",value:"shadow"===t.type,expression:"type === 'shadow'"}],staticClass:"lego-sidebar shadow"},[i("div",{staticClass:"shadow-type",class:{active:t.shadow.useNormal}},[i("div",{staticClass:"title"},[i("lg-checkbox",{attrs:{styleMode:t.styleMode,value:t.shadow.useNormal,label:t.$t("mattingEditor.effects.shadow.cast")},on:{change:t.toggleNormalShadow}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:t.shadow.useNormal,expression:"shadow.useNormal"}],staticClass:"panel"},[i("div",{staticClass:"panel-item"},[i("div",{staticClass:"panel-label"},[t._v("\n                            "+t._s(t.$t("mattingEditor.effects.shadow.distance"))+"\n                        ")]),i("div",{staticClass:"panel-control"},[i("lg-icon",{staticClass:"px-10",attrs:{name:"spread-reduce"}}),i("lg-ranger",{attrs:{styleMode:t.styleMode,value:t.shadow.normal.spread,min:0,max:100,width:172},on:{change:function(e){return t.setShadowProperty("spread",e)}}}),i("lg-icon",{staticClass:"px-10",attrs:{name:"spread-enhance"}})],1)]),i("div",{staticClass:"panel-item"},[i("div",{staticClass:"panel-label value-display"},[i("span",{staticClass:"title"},[t._v("\n                                "+t._s(t.$t("mattingEditor.effects.shadow.blur"))+"\n                            ")]),i("span",{staticClass:"value"},[t._v(t._s(t.shadow.normal.blur)+" %")])]),i("div",{staticClass:"panel-control"},[i("lg-icon",{staticClass:"px-10",attrs:{name:"blur-reduce"}}),i("lg-ranger",{attrs:{styleMode:t.styleMode,value:t.shadow.normal.blur,min:0,max:100,width:172},on:{change:function(e){return t.setShadowProperty("blur",e)}}}),i("lg-icon",{staticClass:"px-10",attrs:{name:"blur-enhance"}})],1)]),i("div",{staticClass:"panel-item"},[i("div",{staticClass:"panel-label value-display"},[i("span",{staticClass:"title"},[t._v("\n                                "+t._s(t.$t("mattingEditor.effects.shadow.opacity"))+"\n                            ")]),i("span",{staticClass:"value"},[t._v(t._s(t.shadow.normal.opacity)+" %")])]),i("div",{staticClass:"panel-control"},[i("lg-icon",{staticClass:"px-10",attrs:{name:"opacity-reduce"}}),i("lg-ranger",{attrs:{styleMode:t.styleMode,value:t.shadow.normal.opacity,min:0,max:100,width:172},on:{change:function(e){return t.setShadowProperty("opacity",e)}}}),i("lg-icon",{staticClass:"px-10",attrs:{name:"blur-reduce"}})],1)]),i("div",{staticClass:"panel-item horizontal"},[i("div",{staticClass:"panel-label"},[t._v("\n                            "+t._s(t.$t("mattingEditor.effects.shadow.angle"))+"\n                        ")]),i("div",{staticClass:"panel-control"},[i("lg-angleball",{attrs:{styleMode:t.styleMode,value:t.shadow.normal.angle},on:{change:function(e){return t.setShadowProperty("angle",e)}}}),i("div",{staticClass:"angle-input-field",class:{active:t.shadow.normalInputActive}},[i("input",{staticClass:"angle-input",attrs:{type:"number"},domProps:{value:t.shadow.normal.angle},on:{focus:function(e){t.shadow.normalInputActive=!0},blur:function(e){t.shadow.normalInputActive=!1},input:t.setShadowAngle}})])],1)])])]),i("div",{staticClass:"shadow-type",class:{active:t.outline.active}},[i("div",{staticClass:"title"},[i("lg-checkbox",{attrs:{styleMode:t.styleMode,value:t.outline.active,label:t.$t("mattingEditor.effects.shadow.outline")},on:{change:t.toggleOutline}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:t.outline.active,expression:"outline.active"}],staticClass:"panel outline-panel"},[i("div",{staticClass:"panel-item"},[i("div",{staticClass:"panel-label value-display"},[i("span",{staticClass:"title"},[t._v("\n                                "+t._s(t.$t("mattingEditor.effects.shadow.outlineWidth"))+"\n                            ")]),i("span",{staticClass:"value"},[t._v(t._s(t.outline.group[0].width)+" px")])]),i("div",{staticClass:"panel-control"},[i("lg-icon",{staticClass:"px-10",attrs:{name:"outline-abate"}}),i("lg-ranger",{attrs:{styleMode:t.styleMode,value:t.outline.group[0].width,min:1,max:50,width:172},on:{change:function(e){return t.setOutlineProperty("width",e)}}}),i("lg-icon",{staticClass:"px-10",attrs:{name:"outline-enhance"}})],1)]),i("div",{staticClass:"panel-item"},[i("div",{staticClass:"panel-label"},[t._v("\n                            "+t._s(t.$t("mattingEditor.effects.shadow.outlineColor"))+"\n                        ")]),i("div",{staticClass:"content"},[t.outline.active?i("ColorPanel",{attrs:{styleMode:t.styleMode,preset:t.outline.presetColors,value:t.outline.group[0].fill},on:{input:function(e){return t.setOutlineProperty("fill",e)}}}):t._e()],1)])])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:"filter"===t.type,expression:"type === 'filter'"}],staticClass:"lego-sidebar shadow filter"},[t._l(t.filterInfo.filters,(function(e,o){return[i("div",{key:"categorytitle"+o,staticClass:"title"},[t._v("\n                    "+t._s(e.categoryName)+"\n                ")]),i("div",{key:"categorycontent"+o,staticClass:"content"},[i("div",{staticClass:"filter-options"},[t._l(e.filters,(function(e,r){return[i("div",{key:"filter"+r,staticClass:"filter-options__item",class:[t.isSeletcedFilter(o,r)&&"filter-options__item--active"],on:{click:function(e){return t.selectFilter(o,r)}}},[e.preview?i("div",{staticClass:"filter-options__item__img"},[i("img",{attrs:{src:t.ossUrl(e.preview.url,{width:132,type:"png"}),alt:""}})]):i("div",{staticClass:"filter-options__item__img filter-options__item__origin"},[i("icon2",{attrs:{name:"crop-original"}})],1),i("div",[t._v(t._s(e.name))])]),r%3!==2&&r!==t.filterInfo.filters[o].length-1||!t.shouldShowRanger(o,r)?t._e():i("div",{key:"filterStrong"+r,staticClass:"panel"},[i("div",{staticClass:"panel-item"},[i("div",{staticClass:"panel-control"},[t._v("\n                                        强度\n                                        "),i("lg-ranger",{attrs:{styleMode:t.styleMode,value:100*t.filterInfo.filterObject.strong,min:0,max:100,width:120},on:{change:function(e){return t.setFilterStrong(e)}}}),i("span",[t._v("\n                                            "+t._s(Math.floor(100*t.filterInfo.filterObject.strong))+"%\n                                        ")])],1)])])]}))],2)])]}))],2)],1),i("LoadingDialog",{attrs:{styleMode:t.styleMode,show:t.loading.show,progress:t.loading.progress,title:t.loading.title}}),t.isFilterLoading?i("div",{staticClass:"lego-modal"},[i("LgLoading",[t._v(t._s(t.$t("mattingEditor.loading.generating")))])],1):t._e()],1)},k=[],C=i(57);let _=!1;function I(t,e){if(!/dancf\.com/.test(t))return t;const{width:i,height:o,type:r="webp",resizeMode:a}=e,n=e.dpr?Math.max(1,Math.min(2,e.dpr)):1;let s=t+"?x-oss-process=";return(i||o)&&(s+="image/resize",i&&(s+=",w_"+Math.round(i*n)),o&&(s+=",h_"+Math.round(o*n)),a&&(s+=",m_"+a),s+=",type_6",s+="/interlace,1,"),r&&!/\.svg$/.test(t)&&("webp"===r&&e.forceWebp,s+=`image/format,${r},`),/\?x-oss-process=$/.test(s)?t:s.replace(/,$/,"")}_=function(){try{return 0===document.createElement("canvas").toDataURL("image/webp",.5).indexOf("data:image/webp")}catch(t){return!1}}();var M=i(645),A=i(544);function j(t){return{offsetX:Math.round(t.spread*Math.cos(t.angle*Math.PI/180)),offsetY:-Math.round(t.spread*Math.sin(t.angle*Math.PI/180)),blur:t.blur,color:`rgba(0, 0, 0, ${t.opacity/100})`}}function z(t){const e=t.offsetX||t.offsetY?-t.offsetX/Math.hypot(t.offsetX,t.offsetY):-1,i=Math.round(Math.acos(e)/Math.PI*180),o=((t.offsetY<0?360-i:i)+180)%360;return{spread:Math.round(Math.hypot(t.offsetX,t.offsetY)),blur:t.blur,opacity:Math.round(100*u()(t.color).getAlpha()),angle:o}}function O(){return{offsetX:0,offsetY:0,blur:0,color:"rgba(0,0,0,0)"}}function T(){return{spread:32,blur:30,opacity:50,angle:315}}var E=i(935);async function S(t){if("string"===typeof t){const{naturalWidth:e,naturalHeight:i}=await Object(M["b"])(t);return{url:t,width:e,height:i}}return t instanceof HTMLCanvasElement?{url:URL.createObjectURL(await Object(E["a"])(t)),width:t.width,height:t.height}:null}var P=i(514),D=i.n(P),R=i(216),N=i.n(R),B=i(4),L=i(493);const F=!1;var $={data(){return{isGD:!0}},created(){this.$t?!F&&this.$i18n&&Object.keys(L["a"]).forEach(t=>this.$i18n.mergeLocaleMessage(t,L["a"][t])):B["default"].prototype.$t=function(t){return N()(L["a"][o["b"].locale||"cn"],t)}},mounted(){this.isGD="cn"===o["b"].locale}},U=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"lego-sidebars crop"},[i("lg-tabs",{attrs:{currentTab:t.currTab,tabs:t.isGD?t.tabs:[{name:t.$t("mattingEditor.effects.crop.regular"),key:"normal"}],beforeSwitch:t.onModeCropSwitch},on:{"update:currentTab":function(e){t.currTab=e},"update:current-tab":function(e){t.currTab=e},switch:t.setCropMode}}),i("div",{staticClass:"crop__tab-container"},["normal"===t.currTab?i("div",{staticClass:"crop__section"},[i("ul",{staticClass:"crop__types"},[i("li",{class:{"crop__type--active":!t.isOriginSize&&!t.isTrimmed&&-1===t.currNormalType},on:{click:t.resetRatio}},[t._v("\n                    "+t._s(t.$t("mattingEditor.effects.crop.customize"))+"\n                ")]),i("li",{class:{"crop__type--active":t.isOriginSize},on:{click:function(e){return t.resetCrop(!1)}}},[t._v("\n                    "+t._s(t.$t("mattingEditor.effects.crop.origin"))+"\n                ")]),i("li",{class:{"crop__type--active":-2===t.currNormalType&&!t.isOriginSize},on:{click:t.cropToEdge}},[t._v("\n                    "+t._s(t.$t("mattingEditor.effects.crop.trim"))+"\n                    "),i("icon2",{attrs:{name:"auto-crop"}})],1),t._l(t.normalTypes,(function(e,o){return i("li",{key:"normal"+o,class:{"crop__type--active":t.currNormalType===o},on:{click:function(i){return t.setCropType(o,e.val)}}},[t._v("\n                    "+t._s(e.label)+"\n                ")])}))],2),i("div",{staticClass:"crop__section input-area"},[i("div",{staticClass:"crop__title"},[t._v(t._s(t.$t("mattingEditor.effects.crop.size")))]),i("div",{staticClass:"crop__inputs"},[i("label",{staticClass:"crop-input-label"},[i("span",[t._v(t._s(t.$t("mattingEditor.effects.crop.w")))]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.cropRectCmt.width,expression:"cropRectCmt.width"}],attrs:{type:"number"},domProps:{value:t.cropRectCmt.width},on:{input:[function(e){e.target.composing||t.$set(t.cropRectCmt,"width",e.target.value)},function(e){return t.cropPlugin.setAspectRatioRect({width:+t.cropRect.width})}]}}),i("span",[t._v("px")])]),t.currNormalType>-1||t.aspectRatioLock?i("icon2",{attrs:{name:"lock"},nativeOn:{click:function(e){return t.toggleAspectRatioLock(!1)}}}):i("icon2",{attrs:{name:"unlock"},nativeOn:{click:function(e){return t.toggleAspectRatioLock(!0)}}}),i("label",{staticClass:"crop-input-label"},[i("span",[t._v(t._s(t.$t("mattingEditor.effects.crop.h")))]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.cropRectCmt.height,expression:"cropRectCmt.height"}],attrs:{type:"number"},domProps:{value:t.cropRectCmt.height},on:{input:[function(e){e.target.composing||t.$set(t.cropRectCmt,"height",e.target.value)},function(e){return t.cropPlugin.setAspectRatioRect({height:+t.cropRect.height})}]}}),i("span",[t._v("px")])])],1)])]):t._e(),"portrait"===t.currTab?i("div",{staticClass:"crop__section"},[i("ul",{staticClass:"crop__types"},t._l(t.portraitTypes,(function(e,o){return i("li",{key:"normal"+o,class:{"crop__type--active":t.currPortraitType===o},on:{click:function(i){return t.setPortraitType(o,e.val)}}},[i("span",{staticClass:"title"},[t._v(t._s(e.title))]),i("span",{staticClass:"subtitle"},[t._v(t._s(e.subtitle))])])})),0)]):t._e(),i("div",{staticClass:"crop__section"},[i("div",{staticClass:"crop__title"},[t._v(t._s(t.$t("mattingEditor.effects.crop.scale")))]),i("div",{staticClass:"crop__range"},[i("lg-ranger",{attrs:{min:10,max:150,width:174,defaultValue:100,styleMode:t.styleMode},model:{value:t.percentageScale,callback:function(e){t.percentageScale=e},expression:"percentageScale"}}),i("span",[t._v(t._s(t.percentageScale)+"%")])],1)]),i("div",{staticClass:"crop__section"},[i("div",{staticClass:"crop__title"},[t._v(t._s(t.$t("mattingEditor.effects.crop.rotate")))]),i("div",{staticClass:"crop__range"},[i("lg-ranger",{attrs:{min:-45,max:44,width:174,defaultValue:0,styleMode:t.styleMode},model:{value:t.innerRotate,callback:function(e){t.innerRotate=e},expression:"innerRotate"}}),i("span",[t._v(t._s(t.innerRotate)+"°")])],1)]),i("div",{staticClass:"crop__section crop__flip"},[i("div",{on:{click:function(e){return t.rotateClockward(90)}}},[i("icon2",{attrs:{name:"rotate"}})],1),i("div",{on:{click:function(e){return t.rotateClockward(-90)}}},[i("icon2",{attrs:{name:"rotate"}})],1)]),i("div",{staticClass:"confirm-area"},[i("lg-button",{staticClass:"crop-btn",style:t.lgBtnDarkStyle,attrs:{type:"primary"},nativeOn:{click:function(e){return t.confirmCrop.apply(null,arguments)}}},[t._v("\n                "+t._s(t.$t("mattingEditor.effects.crop.apply"))+"\n            ")])],1)])],1)},H=[],G={components:{lgTabs:g["Tabs"],lgButton:g["Button"],lgRanger:g["Ranger"],Icon2:g["Icon2"]},mixins:[$],props:{sourceImage:{type:String,required:!0},sourceWidth:{type:Number,required:!0},sourceHeight:{type:Number,required:!0},useClipFaceDetect:{type:Boolean,default:!1},cropRect:{type:Object,required:!0},scale:{type:Number,required:!0},rotate:{type:Number,required:!0},styleMode:{type:String,default:"blue"}},data(){return{currTab:"normal",tabs:[{name:this.$t("mattingEditor.effects.crop.regular"),key:"normal"},{name:this.$t("mattingEditor.effects.crop.idPhoto"),key:"portrait"}],normalTypes:[{label:"1:1",val:1},{label:"3:2",val:1.5},{label:"2:3",val:2/3},{label:"4:3",val:4/3},{label:"3:4",val:3/4},{label:"16:9",val:16/9},{label:"9:16",val:9/16}],portraitTypes:[{title:this.$t("mattingEditor.effects.crop.oneInch1"),subtitle:"22x32mm",val:[259,377]},{title:this.$t("mattingEditor.effects.crop.oneInch2"),subtitle:"25x35mm",val:[295,413]},{title:this.$t("mattingEditor.effects.crop.oneInch3"),subtitle:"33x48mm",val:[389,566]},{title:this.$t("mattingEditor.effects.crop.twoInch1"),subtitle:"35x45mm",val:[413,531]},{title:this.$t("mattingEditor.effects.crop.twoInch2"),subtitle:"35x49mm",val:[413,579]},{title:this.$t("mattingEditor.effects.crop.twoInch3"),subtitle:"35x53mm",val:[413,626]}],currNormalType:-1,currPortraitType:-1,faceRect:null,trimRect:{left:0,top:0,width:0,height:0},aspectRatioLock:!1,lgBtnDarkStyle:{}}},computed:{cropRectCmt(){return this.cropRect},isOriginSize(){const{left:t,top:e,width:i,height:o}=this.cropRect,{sourceWidth:r,sourceHeight:a}=this;return 0===t&&0===e&&r===i&&a===o},isTrimmed(){for(const t in this.trimRect)if(this.trimRect[t]!==this.cropRect[t])return!1;return!0},percentageScale:{get(){return parseInt(100*this.scale)},set(t){this.cropPlugin.setScale(t/100)}},innerRotate:{get(){return this.rotate-90*Math.floor((this.rotate+45)/90)},set(t){this.setRotate(90*Math.floor((this.rotate+45)/90)+t)}},cropPlugin(){return o["b"].lego.plugins.CropPlugin}},watch:{sourceImage(){this.faceRect=null}},created(){"dark"===this.styleMode&&(this.lgBtnDarkStyle={backgroundColor:"#000000",borderColor:"#000000",borderRadius:"unset"})},mounted(){window.lego=o["b"].lego},methods:{async onModeCropSwitch(t){return this.resetCrop(!0),"portrait"!==t||this.faceRect||this.useClipFaceDetect&&await this.updateFaceRect(),!0},setCropMode(t){this.currTab=t,"normal"===t?this.cropPlugin.setFreeMode():(this.cropPlugin.setFixedMode(),this.setPortraitType(0,this.portraitTypes[0].val))},cropToEdge(){this.currNormalType=-2,this.trimRect=this.cropPlugin.cropToEdge()},setCropType(t,e){const i=o["b"].lego.plugins.CropPlugin;this.currNormalType=t,i.setRatio(e)},confirmCrop(){const t=o["b"].lego.plugins.CropPlugin;t.confirmCrop();let e=this.currNormalType;e||(e=this.isOriginSize?"原图":"自定义");const i=o["b"].editor;o["c"].editorCropType({scene:i.mattingRecord.scene,work_id:i.id,size:e})},async setPortraitType(t,[e,i]){const{width:r,height:a}=o["b"].lego.source;if(r===e&&a===i){let t=!1;if(await l["a"].open({title:this.$t("mattingEditor.effects.cropPanel.title"),content:this.$t("mattingEditor.effects.cropPanel.content"),okText:this.$t("mattingEditor.effects.cropPanel.ok"),cancelText:this.$t("mattingEditor.effects.cropPanel.cancel"),onOk(){t=!0}}),!t)return}let n,s;if((r<e||a<i)&&o["b"].message(this.$t("mattingEditor.effects.cropPanel.message")),this.faceRect&&this.faceRect.rect){const t=this.faceRect.rect,o=this.faceRect.points;s=.55*e/t.width,s>1&&(s=1),s<.1&&(s=.1);const r=o[2][1]*s-.5*i,a=(e-t.width*s)/2,l=t.left*s-a;n={width:e,height:i,top:-r,left:-l}}else s=.5,n={width:e,height:i,top:-(a*s-i)/2,left:-(r*s-e)/2};this.currPortraitType=t,this.cropPlugin.setScale(s,!1),this.cropPlugin.setCropRect({width:e,height:i},!1),this.cropPlugin.setBounding(n)},resetCrop(t){this.currNormalType=-1,o["b"].lego.renderOptions.rotate=0,this.cropPlugin.resetCrop(t)},setCrop(t,e=!1){const{left:i,top:r,width:a,height:n,scale:s}=t,l=this.cropPlugin;l.setCropRect({width:a,height:n},e);const c=o["b"].lego.getEffectRenderOffset();s&&l.setScale(s),l.setBounding({left:-i-c.left,top:-r-c.top})},setRotate(t){t>180&&(t-=360),t<-180&&(t+=360),o["b"].lego.renderOptions.rotate=t,this.cropPlugin.setRotate(t)},autoSetCropMode(){const{cropRect:t}=this;if(this.isGD)for(let e=0;e<this.portraitTypes.length;e++){const i=this.portraitTypes[e],[o,r]=i.val;if(t.width===o&&t.height===r)return this.useClipFaceDetect&&this.updateFaceRect(),this.currTab="portrait",this.currPortraitType=e,void this.cropPlugin.setFixedMode()}this.currTab="normal",this.currNormalType=-1,this.cropPlugin.setFreeMode()},async updateFaceRect(){if(!this.faceRect){this.$emit("toggleLoading",{show:!0,title:this.$t("mattingEditor.effects.crop.facialDetecting"),progress:50});try{const t=await o["b"].editor.apiInstance.faceRect({url:this.sourceImage}),e=t.rect[0],i=t.points[0];this.faceRect={rect:e?{left:e[0],top:e[1],width:e[2],height:e[3]}:null,points:i||null}}catch(t){this.faceRect=null}this.$emit("toggleLoading",{show:!0,title:this.$t("mattingEditor.effects.crop.facialDetecting"),progress:100}),setTimeout(()=>this.$emit("toggleLoading",{show:!1})),this.faceRect&&this.faceRect.rect||o["b"].message(this.$t("mattingEditor.effects.crop.facialFail"))}},resetRatio(){this.cropPlugin.setRatio(0),this.currNormalType=-1,this.aspectRatioLock=!1},rotateClockward(t){this.setRotate(this.rotate+t)},toggleAspectRatioLock(t){if(this.aspectRatioLock=t,t){const t=this.cropRect.width/this.cropRect.height;this.cropPlugin.setRatio(t,!0),this.currNormalType=this.normalTypes.findIndex(e=>Math.abs(e.val-t)<.05)}else this.currNormalType=-1,this.cropPlugin.setRatio(0)}}},Z=G,W=(i(651),Object(w["a"])(Z,U,H,!1,null,null,null)),V=W.exports;function Y(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function Q(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Y(Object(i),!0).forEach((function(e){X(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Y(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function X(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}async function q(t){t="string"===typeof t?await Object(M["b"])(t):t;const{canvas:e,ctx:i}=Object(A["a"])(t.width,t.height);return i.drawImage(t,0,0),e}let J=null,K={},tt=null,et=null;const it=[];var ot,rt,at,nt,st={components:{lgIcon:g["Icon"],lgButton:g["Button"],lgRanger:g["Ranger"],lgCheckbox:g["Checkbox"],lgAngleball:g["Angleball"],Tooltip:d["a"],ImagePicker:g["ImagePicker"],LoadingDialog:y,LgLoading:g["Loading"],CropPanel:V,Icon2:g["Icon2"],ColorPanel:g["ColorPanel"]},mixins:[$],props:{type:{type:String,default:"background"},useWatermark:{type:Boolean,default:!1},useClipFaceDetect:{type:Boolean,default:!1},useFilter:{type:Boolean,default:!1},useBackground:{type:Boolean,default:!0},styleMode:{type:String,default:"blue"}},data(){return{noSupportFilterBrowser:/edge/i.test(navigator.userAgent),zoomLevels:[.15,.2,.3,.5,.8,1,1.5,2,3,4,5,6,7,8,9,10],editor:{zoomLevel:1},loading:{show:!1,progress:0,title:""},preserveEvent:!1,isLoading:!0,shadow:{normalInputActive:!1,useNormal:!1,normal:{spread:0,blur:0,opacity:0,angle:0}},background:{backgroundInfo:{color:null,image:null,position:["center","center"],size:"cover",repeat:"no-repeat"},backgroundImage:null,materials:[],presetColors:["transparent","#000000","#9F9F9F","#BABABA","#FFF","#976BEE","#FF0000","#E65352","#FFD835","#438EDB","#5EA8E5"]},outline:{group:[{fill:"#FFF",width:0}],active:!1,presetColors:["#FFF","#000000","#FFD835","#33E1FF","#FFBEB2"]},imgWidth:0,imgHeight:0,sourceWidth:0,sourceHeight:0,colorPicker:{show:!1,color:""},filterInfo:{filters:[],selectedFilter:[0,0],filterObject:{}},isFilterLoading:!1,comparing:!1,cropRect:{left:0,top:0,width:0,height:0},scale:1,rotate:0}},computed:{show(){return!!this.type},ossUrl(){return(t,e)=>I(t,e)},isSeletcedFilter(){return(t,e)=>{const{selectedFilter:i}=this.filterInfo;return i[0]===t&&i[1]===e}},shouldShowRanger(){return(t,e)=>{const{selectedFilter:i}=this.filterInfo;return!(!i[0]&&!i[1])&&(i[0]===t&&Math.floor(i[1]/3)===Math.floor(e/3))}},lego(){return o["b"].lego},templateBorder(){return"dark"===this.styleMode?"black-color":"blue-color"}},watch:{async type(t,e){const{watermark:i,watermarkUrl:r}=o["b"].editor.config;switch(e){case"background":!this.preserveEvent&&this.$emit("background",this.background.backgroundInfo);break;case"shadow":if(!this.preserveEvent){this.$emit("shadow",this.shadow.useNormal?j(this.shadow.normal):O());const{active:t,group:e}=this.outline,{fill:i,width:o}=e[0];this.$emit("outline",t?[{fill:i,width:o}]:[])}break;case"crop":this.preserveEvent||(this.$emit("crop",Q({scale:this.scale},this.cropRect)),this.$emit("rotate",{rotate:this.rotate})),o["b"].lego.stopPlugin();break;case"filter":!this.preserveEvent&&this.$emit("filter",this.filterInfo.filterObject);break}switch(t){case"background":case"shadow":case"filter":o["b"].lego.usePlugin("Pan"),this.setClip(),this.properZoom();break;case"crop":this.removeClip(),await o["b"].lego.usePlugin("CropPlugin",i,r),this.$refs.cropPanel.setCrop(Q({scale:this.scale},this.cropRect),!0),this.$refs.cropPanel.setRotate(this.rotate),this.$refs.cropPanel.autoSetCropMode();break}}},async created(){this.getBackgroundMeterial()},beforeDestroy(){this.$emit("destroy");const t=o["b"].lego;t.setEffectRenderers([]),t.setBackgroundRenderers([]),t.setGlobalRenderers([])},async mounted(){this.loadLego(),this.useFilter&&this.fetchFilters()},destroyed(){J=null,K={},tt=null,et=null},methods:{fitOrActualSize(){if(100===this.editor.zoomLevel)o["b"].lego.fitImage();else{const t=o["b"].lego.height,e=o["b"].lego.width;o["b"].lego.setZoom(1,{x:e/2,y:t/2}),o["b"].lego.centerImage()}o["b"].lego.requestUpdateView()},setZoom(t){const e=o["b"].lego.height,i=o["b"].lego.width,r=this.editor.zoomLevel/100,a="out"===t,n="in"===t;let s=0;for(;s<this.zoomLevels.length;s++){if(a&&this.zoomLevels[s]>=r){s--;break}if(n&&this.zoomLevels[s]>r)break}s<0||s===this.zoomLevels.length||o["b"].lego.setZoom(this.zoomLevels[s],{x:i/2,y:e/2})},toggleOutline(t){this.outline.active=t,this.outline.group[0]={fill:"#fff",width:t?10:0},this.updateImageResult()},setOutline(t){if(t.length>0){const e=t[0];this.outline.active=!0,this.outline.group[0].width=e.width,this.outline.group[0].fill=e.fill}else this.outline.active=!1},setOutlineProperty(t,e){const i=this.outline.group[0];i[t]=e,this.$set(this.outline.group,0,i),this.updateImageResult()},setShadowProperty(t,e){this.shadow.normal[t]=e,this.updateImageResult()},toggleNormalShadow(t){this.shadow.useNormal=t,t&&(this.shadow.normal=T()),this.updateImageResult()},setLoadingDialog({title:t,progress:e,show:i}){const o=this.loading;o.show="boolean"===typeof i?i:o.show,o.progress="number"===typeof e?e:o.progress,o.title="string"===typeof t?t:o.title},async uploadBg(t){let e=t[0];this.setLoadingDialog({title:this.$t("mattingEditor.effects.bg.upload"),progress:30,show:!0}),e=await o["b"].resizeFileImage(e,{maxWidth:2e3,maxHeight:2e3,type:e.type,quality:.92});const{url:i}=await o["b"].uploadImage(e);this.setLoadingDialog({title:this.$t("mattingEditor.effects.bg.loadImage"),progress:80}),await this.setBackground(i),this.setLoadingDialog({progress:100}),setTimeout(()=>{this.setLoadingDialog({show:!1})},150)},async loadLego(){const t=o["b"].lego.el;this._lego=o["b"].lego,this.$refs.container.appendChild(t),this.$on("destroy",()=>{this.$refs.container.removeChild(t)}),o["b"].lego.fitToContainer(),o["b"].lego.registerBackgroundRenderer({renderer:this.renderBackground}),o["b"].lego.registerEffectRenderer({renderer:this.renderFormatShadow,offset:()=>({shadow:j(this.shadow.normal)})}),o["b"].lego.registerEffectRenderer({renderer:this.renderOutline,offset:()=>({outline:Q({},this.outline.group[0])})}),o["b"].lego.registerGlobalRenderer({renderer:this.renderWatermark});const e=o["b"].lego.plugins.CropPlugin;e&&(e.changeHook=(t,e,i)=>{this.cropRect=t,this.scale=e,this.rotate=i}),this.editor.zoomLevel=Math.round(100*o["b"].lego.zoom),o["b"].lego._event.on("editor.zoomed",t=>{this.editor.zoomLevel=Math.round(100*t)}),this.initWindowResizeEvent(),this.isLoading=!1},renderWatermark(t,e){const i=Object(A["b"])(e);return this.watermarkEl?(i.save(),i.globalCompositeOperation="source-over",i.fillStyle=this.watermarkEl,i.fillRect(0,0,e.width,e.height),i.restore(),e):e},initWindowResizeEvent(){const t=s()(()=>{(this.isLoading||this.show)&&("none"===this.$el.style.display?this.$nextTick(()=>{}):Promise.resolve()).then(()=>{"crop"===this.type&&"portrait"===this.$refs.cropPanel.currTab||o["b"].lego.fitToContainer()})},500,{trailing:!0});window.addEventListener("resize",t,!1),this.$on("destroy",()=>{window.removeEventListener("resize",t,!1)})},async importImage(t){this.isLoading=!0,J=await q(t),this.noSupportFilterBrowser?tt=J:tt||(tt=await this.createFilterTask(t));try{if(await o["b"].lego.importImage(tt),this.useWatermark){const t=await Object(M["b"])(D.a,!0),{canvas:e,ctx:i}=Object(A["a"])(t.naturalWidth,t.naturalHeight);i.drawImage(t,0,0),this.watermarkEl=i.createPattern(e,"repeat")}const{width:t,height:e}=o["b"].lego.source;this.imgWidth=t,this.imgHeight=e,this.sourceWidth=t,this.sourceHeight=e}catch(e){o["b"].errorMessage(this.$t("mattingEditor.loadError"))}finally{this.isLoading=!1}},properZoom(){const t=!this.isLoading;this.isLoading=!0,this.$nextTick().then(()=>{o["b"].lego.fitToContainer();const e=o["b"].lego.el.getBoundingClientRect(),i=o["b"].lego.getRenderImageSize();o["b"].lego.instance&&(i.width>e.width||i.height>e.height?o["b"].lego.fitImage():(o["b"].lego.setZoom(1),o["b"].lego.centerImage()),t&&(this.isLoading=!1))})},async setBackgroundImage(t){this.background.backgroundInfo.image=t,this.background.backgroundImage=t?await Object(M["b"])(t):null},setBackgroundColor(t){this.background.backgroundInfo.color=t},async setBackground(t,e=!0){const i="string"===typeof t,o=null===t;i?t.startsWith("http")?(this.setBackgroundColor(null),await this.setBackgroundImage(t)):(await this.setBackgroundImage(null),this.setBackgroundColor(t)):o?(await this.setBackgroundImage(null),this.setBackgroundColor(null)):(await this.setBackgroundImage(t.image),this.setBackgroundColor(t.color)),e&&this.updateImageResult()},updateImageResult(t){t?o["b"].lego.renderImage():o["b"].lego.requestRenderImage()},openColorPicker(t){this.colorPicker.show=!0;let e="#00000";switch(this.type){case"background":e=this.background.backgroundInfo.color;break;case"shadow":e=this.outline.group[0].fill;break}this.colorPicker.color=e,this.$refs.colorPicker.$vnode.elm.style=`left: ${t.clientX-256}px; top: ${t.clientY}px`},closeColorPicker(){this.colorPicker.show=!1},changeColorPicker(t){switch(this.type){case"background":this.setBackground(t);break;case"shadow":this.setOutlineProperty("fill",t);break}},renderBackground(t,e){const i=this.background.backgroundInfo,o=Object(A["b"])(e),r=e.width,a=e.height;if(!i)return e;if(o.save(),o.globalCompositeOperation="destination-over",i.color&&(o.fillStyle=i.color,o.fillRect(0,0,r,a),o.restore()),i.image&&this.background.backgroundImage){o.imageSmoothingEnabled=!0,o.imageSmoothingQuality="high";const t=this.background.backgroundImage,e=t.width/t.height;let[n,s]=i.position,[l,c]="string"===typeof i.size?[0,0]:i.size;if("contain"===i.size?r>a?(c=a,l=c*e):(l=r,c=r/e):"cover"===i.size?t.width/r<t.height/a?(l=r,c=l/e):(c=a,l=c*e):("number"===typeof l&&(l=l<=1?r*l:r),"number"===typeof c&&(c=c<=1?a*c:a),"string"===typeof l&&"string"===typeof c&&(l=t.width,c=t.height),"auto"===l&&(l=Math.round(c*e)),"auto"===c&&(c=Math.round(l/e))),"string"===typeof n)switch(n){case"left":n=0;break;case"center":n=(l-r)/2;break;case"right":n=l-r;break}if("string"===typeof s)switch(s){case"top":s=0;break;case"center":s=(c-a)/2;break;case"bottom":s=c-a;break}const d=t.width/l;o.drawImage(t,n*d,s*d,r*d,a*d,0,0,r,a),o.restore()}return e},renderFormatShadow(t,e){const i=e.getContext("2d"),r=Q({},this.shadow.normal),{renderOptions:a}=o["b"].lego;a.rotate&&!a.fullEffect&&(r.angle-=a.rotate);const n=j(r);return i.save(),this.shadow.useNormal&&(i.shadowOffsetX=n.offsetX,i.shadowOffsetY=n.offsetY,i.shadowBlur=n.blur,i.shadowColor=n.color),i.imageSmoothingEnabled=!0,i.drawImage(t,0,0),i.restore(),e},isColorEqual(t){let e="";switch(this.type){case"background":e=this.background.backgroundInfo.color;break;case"shadow":e=this.outline.group[0].fill;break}return e?u.a.equals(e,t):!t},setCrop(t){const{width:e,height:i,left:o,top:r,scale:a}=t;this.cropRect={width:e,height:i,left:o,top:r},this.scale=a||1},setRotate(t){this.rotate=t,o["b"].lego.renderOptions.rotate=t},setClip(){const t=o["b"].lego,e=t.source,{cropRect:i,scale:r}=this,{left:a,top:n,width:s,height:l}=i;t.instance.strokeWidth=1,t.setRenderSize({width:s,height:l}),t.setImageRenderBounding({left:-a,top:-n,width:e.width*r,height:e.height*r}),this.imgWidth=s,this.imgHeight=l,this.updateImageResult(!0),t.requestUpdateView()},removeClip(){const t=o["b"].lego,{width:e,height:i}=t.getImageSize();t.setRenderSize({width:e,height:i}),t.setImageRenderBounding({left:0,top:0,width:e,height:i}),t.instance.strokeWidth=0,this.updateImageResult(!0),t.requestUpdateView()},setShadowAngle(t){let e=parseInt(t.target.value);e>359&&(e=359),isNaN(e)&&(e=0),t.target.value=this.shadow.normal.angle=e},setShadow(t){const e=u()(t.color);t.offsetX||t.offsetY||t.blur||0!==e.getAlpha()?this.shadow.useNormal=!0:this.shadow.useNormal=!1,this.shadow.normal=z(t)},renderOutline(t,e){const i=Object(A["b"])(e);if(this.outline.active){i.save();const o=this.outline.group[0].width,r=Math.PI/180,{canvas:a,ctx:n}=Object(A["a"])(e.width,e.height);for(let e=0;e<360;e+=4){const i=r*e;n.drawImage(t,Math.sin(i)*o,Math.cos(i)*o)}n.globalCompositeOperation="source-in",n.fillStyle=this.outline.group[0].fill,n.fillRect(0,0,a.width,a.height),i.globalCompositeOperation="source-over",i.drawImage(a,0,0),i.drawImage(t,0,0),i.restore()}return e},async fetchFilters(){const t=await o["b"].api.queryFilters();t[0]&&t[0].filters.unshift({name:this.$t("mattingEditor.effects.filter.origin")}),this.filterInfo.filters=t},setFilter(t){const{filters:e}=this.filterInfo;this.filterInfo.filterObject=Q({},t);for(let i=0;i<e.length;i++)for(let o=0;o<e[i].filters.length;o++)if(e[i].filters[o].id===t.id)return void(this.filterInfo.selectedFilter=[i,o]);this.filterInfo.selectedFilter=[0,0]},async selectFilter(t,e){if(!this.useFilter)return;const{selectedFilter:i}=this.filterInfo;if(i[0]!==t||i[1]!==e){if(this.filterInfo.selectedFilter=[t,e],!t&&!e)return tt=null,this.filterInfo.filterObject={},await o["b"].lego.importImage(J),void this.setClip();try{this.isFilterLoading=!0,tt=await this.createFilterTask(J),await o["b"].lego.importImage(tt),this.setClip()}catch(r){console.error(r)}finally{this.isFilterLoading=!1}}},setFilterStrong(t){if(!this.useFilter)return;const e=t/100;this.filterInfo.filterObject.strong=e,clearTimeout(et),et=setTimeout(async()=>{const t=await o["b"].filterRenderer.adjustFilterStrong(tt,K.url,e);o["b"].lego.importImage(t),this.setClip()},32)},clearFilterCache(){tt=null,this.selectedFilter=[0,0]},async createFilterTask(t){if(!this.useFilter)return t;const{selectedFilter:e,filters:i}=this.filterInfo,[r,a]=e;if(!r&&!a)return t;const n=await S(t);K=n;const s=i[r].filters[a],l=await o["b"].api.getFilter(s.id);this.filterInfo.filterObject=JSON.parse(l).model.filterInfo,this.filterInfo.filterObject.id=s.id,this.filterInfo.filterObject.name=s.name;try{await o["b"].filterRenderer.checkLoaded();const t=await o["b"].filterRenderer.createTask(n.url,this.filterInfo.filterObject.prunedZipUrl,n.width,n.height,.8,0);return t.canvas}catch(c){return console.log(c),o["b"].errorMessage(this.$t("mattingEditor.filterLoadError")),t}},async showOriginImage(t){this.useFilter&&(this.comparing=t,it.push(t),1===it.length&&this.executePipe())},async executePipe(){if(it.length){if(it[0])await o["b"].lego.importImage(J);else{const t=await o["b"].filterRenderer.adjustFilterStrong(tt,K.url,this.filterInfo.filterObject.strong);await o["b"].lego.importImage(t)}this.setClip(),it.shift(),this.executePipe()}},errorMsg(t){C["a"].error(t)},async getBackgroundMeterial(){const t=[{url:"https://st-gdx.dancf.com/assets/20190918-174006-f787.png"},{url:"https://st-gdx.dancf.com/assets/20190917-095141-2cb3.jpg"},{url:"https://st-gdx.dancf.com/assets/20190917-095301-49ad.jpg"},{url:"https://st-gdx.dancf.com/assets/20190917-095535-370c.jpg"},{url:"https://st-gdx.dancf.com/assets/20190917-095609-7b1a.jpg"},{url:"https://st-gdx.dancf.com/assets/20190917-095659-85d1.jpg"},{url:"https://st-gdx.dancf.com/assets/20190917-095721-595a.jpg"},{url:"https://st-gdx.dancf.com/assets/20190917-095746-fcda.jpg"},{url:"https://st-gdx.dancf.com/assets/20190917-095819-236e.jpg"},{url:"https://st-gdx.dancf.com/assets/20190917-095843-5439.jpg"},{url:"https://st-gdx.dancf.com/assets/20190917-095903-94ee.jpg"},{url:"https://st-gdx.dancf.com/assets/20190917-095940-bfca.jpg"},{url:"https://st-gdx.dancf.com/assets/20190917-100006-afc5.jpg"},{url:"https://st-gdx.dancf.com/assets/20190917-100030-9b5a.jpg"},{url:"https://st-gdx.dancf.com/assets/20190917-100054-6937.jpg"},{url:"https://st-gdx.dancf.com/assets/20190917-100119-2936.jpg"},{url:"https://st-gdx.dancf.com/assets/20190917-100139-97b6.jpg"},{url:"https://st-gdx.dancf.com/assets/20190917-100200-f501.jpg"},{url:"https://st-gdx.dancf.com/assets/20190917-100220-75a5.jpg"},{url:"https://st-gdx.dancf.com/assets/20190917-100250-2eba.jpg"},{url:"https://st-gdx.dancf.com/assets/20190917-100312-e19d.jpg"}];let e=[];if(this.isGD)try{e=await o["b"].api.getBackgroundMaterial(),e=e.length?e.map(t=>({url:t.preview.url})):t}catch(i){e=t}else e=t;e.forEach(t=>{const e=_?"webp":"png";t.preview=I(t.url,{width:88,height:88,type:e,resizeMode:"fill"})}),this.background.materials=e}}},lt=st,ct=(i(653),Object(w["a"])(lt,v,k,!1,null,null,null)),dt=ct.exports,gt={functional:!0,props:{mode:{type:String,default:""},name:{type:String,default:"clip-hf"}},render(t,e){const i={props:{name:e.props.name,mode:e.props.mode}};return t("transition",i,e.children)}},pt=gt,ut=(i(656),Object(w["a"])(pt,ot,rt,!1,null,null,null)),ht=ut.exports,ft={functional:!0,render(t,e){const i={props:{name:"clip-fade"}};return t("transition",i,e.children)}},mt=ft,bt=(i(658),Object(w["a"])(mt,at,nt,!1,null,null,null)),wt=bt.exports,xt=i(475),yt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"clip-guide"},[o("ClipTransition",{attrs:{name:"clip-opacityfade"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.expand,expression:"expand"}],staticClass:"guide-background",style:{pointerEvents:t.show&&t.expand?"auto":"none"}})]),o("ClipTransition",{attrs:{name:"clip-brs"}},[o("lgContainer",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"clip-mini-guide",class:{expand:t.expand},style:t.innerStyle},[o("div",{directives:[{name:"show",rawName:"v-show",value:!t.expand,expression:"!expand"}],staticClass:"mini-content"},[o("div",{staticClass:"guide-title-wrap"},[o("h2",{staticClass:"title"},[t._v(t._s(t.guideContent.title))]),t.showCustomService?o("lg-button",{staticClass:"customer-service-btn",attrs:{type:"text"},nativeOn:{click:function(e){return t.$emit("customer-service")}}},[o("img",{staticClass:"icon",attrs:{src:i(552),alt:"客服"}}),o("span",[t._v("客服")])]):t._e()],1),o("div",{staticClass:"guide-video-wrap"},[o("video",{staticClass:"guide-video",attrs:{src:t.show?t.guideContent.video:"",loop:"",muted:"",autoplay:""},domProps:{muted:!0}}),o("lg-button",{directives:[{name:"show",rawName:"v-show",value:t.article&&t.guideContent.articleId,expression:"article && guideContent.articleId"}],staticClass:"help-expand",attrs:{type:"text"},nativeOn:{click:function(e){return t.expandHelp()}}},[o("span",{staticClass:"icon"})])],1),o("div",{staticClass:"guide-controls"},[o("lg-button",{staticClass:"close",attrs:{type:"primary"},nativeOn:{click:function(e){return t.hideGuide(t.guideContent.id)}}},[t._v("\n                        我学会了\n                    ")]),o("lg-button",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"skip",attrs:{type:"text"},nativeOn:{click:function(e){return t.hideGuide("all")}}},[t._v("\n                        不再提示\n                    ")])],1)]),t.article&&t.expand?o("div",{staticClass:"expand-content"},[o("lg-button",{staticClass:"close",attrs:{type:"text"},nativeOn:{click:function(e){t.expand=!1,t.hideGuide(t.guideContent.id)}}},[o("lg-icon",{attrs:{name:"cross2"}})],1),o("div",{staticClass:"title"},[t._v(t._s(t.article.title))]),t.article.more?o("a",{staticClass:"link",attrs:{href:t.article.more,target:"__blank"}},[t._v("\n                    查看更多功能教程\n                ")]):t._e(),o("div",{ref:"articleContent",staticClass:"content",domProps:{innerHTML:t._s(t.article.content)}})],1):t._e()])],1)],1)},vt=[],kt=i(125);const Ct=new kt["a"],_t={FIRST_CLIP_CLOSE:"first.guide.close"};Object.defineProperty(Ct,"name",{value:_t});const It="clip.guide.all",Mt={basic:{id:"",title:"如何使用蓝色保留笔和红色去除笔？",video:"https://st-gdx.dancf.com/gaodingx/425/help/75/20201027-225328-a885.mp4",articleId:"matting_basic"},keep:{id:"clip.guide.matting",title:"如何使用蓝色保留笔和红色去除笔？",video:"https://st-gdx.dancf.com/gaodingx/425/help/75/20201027-225328-a885.mp4",articleId:"matting_basic"},drop:{id:"clip.guide.matting",title:"如何使用蓝色保留笔和红色去除笔？",video:"https://st-gdx.dancf.com/gaodingx/425/help/75/20201027-225328-a885.mp4",articleId:"matting_basic"},eraser:{id:"clip.guide.eraser",title:"如何使用橡皮擦？",video:"https://st-gdx.dancf.com/assets/20190816-164223-5bad.mp4",articleId:"matting_eraser"},edge:{id:"clip.guide.edge",title:"如何使用调整边缘？",video:"https://st-gdx.dancf.com/assets/20190816-164248-47d1.mp4",articleId:"matting_feather"},path:{id:"clip.guide.path",title:"使用修边工具功能，调整不满意的边缘细节。",video:"https://st-gdx.dancf.com/gaodingx/425/help/75/20201225-164033-febe.mp4",articleId:"matting_path"},hair:{id:"clip.guide.hair",title:"如何处理发丝？",video:"https://st-gdx.dancf.com/assets/20190816-164314-1d68.mp4",articleId:"matting_hair"},"repair-brush":{id:"clip.guide.auto-repair",title:"如何使用修补和擦除？",video:"https://st-gdx.dancf.com/assets/20191227-154910-2ec3.mp4",articleId:"matting_auto"},"eraser-brush":{id:"clip.guide.auto-repair",title:"如何使用修补和擦除？",video:"https://st-gdx.dancf.com/assets/20191227-154910-2ec3.mp4",articleId:"matting_auto"},recognition:{id:"clip.guide.auto-repair",title:"如何使用修补和擦除？",video:"https://st-gdx.dancf.com/assets/20191227-154910-2ec3.mp4",articleId:"matting_auto"}};var At={name:"ClipMiniGuide",components:{lgButton:g["Button"],lgContainer:g["Container"],lgIcon:g["Icon"],ClipTransition:ht},props:{innerStyle:{type:Object,default(){return{}}},showCustomService:{type:Boolean,default:!0},article:{type:Object,default:null}},data(){return{expand:!1,show:!1,guideContent:{video:"",title:"",id:"",articleId:""}}},methods:{async expandHelp(){this.expand=!0,this.$nextTick(()=>{const t=this.$refs.articleContent,e=t.querySelector("#"+this.guideContent.articleId);t.scrollTop=e?e.offsetTop-90:0})},showGuide(t,e){const i=Mt[t]||Mt.basic;this.guideContent=i,(!e||o["b"].store.get(i.id)||o["b"].store.get(It))&&e||(this.show=!0)},hideGuide(t){t=t||this.guideContent.id,this.show=!1,"all"===t?o["b"].store.set(It,!0):("clip.guide.matting"!==t||o["b"].store.get(t)||Ct.emit(_t.FIRST_CLIP_CLOSE),o["b"].store.set(t,!0)),this.$emit("close")},hideGuideIfNoMatchContent(t){const e=Mt[t];e?this.guideContent=e:(this.show=!1,this.$emit("close"))},emitCustomService(){this.$emit("customer-service")}}},jt=At,zt=(i(660),Object(w["a"])(jt,yt,vt,!1,null,null,null)),Ot=zt.exports,Tt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.active?i("div",{staticClass:"clip-focus",style:{left:t.left-27+"px",top:t.top-27+"px"}},[i("div",{staticClass:"bg"},[i("svg",[i("mask",{attrs:{id:"mask"}},[i("rect",{attrs:{x:"0",y:"0",width:"100%",height:"100%",fill:"white",mask:"url(#mask)"}}),i("circle",{attrs:{cx:t.left,cy:t.top,r:"27",fill:"black"}})]),i("rect",{attrs:{x:"0",y:"0",width:"100%",height:"100%",fill:"rgba(0,0,0,0.2)",mask:"url(#mask)"}})])]),i("div",{staticClass:"circle",on:{click:function(e){return e.target!==e.currentTarget?null:t.focusClicked.apply(null,arguments)}}}),i("div",{staticClass:"content"},[t._t("default")],2)]):t._e()},Et=[],St={props:{active:{type:[Boolean,Number],default:!1},tool:{type:String,default:"keep"},left:{type:Number,default:43},top:{type:Number,default:74}},data(){return{}},watch:{},methods:{focusClicked(){this.$emit("click")}}},Pt=St,Dt=(i(662),Object(w["a"])(Pt,Tt,Et,!1,null,null,null)),Rt=Dt.exports;function Nt(t,e){return t.image===e.image&&!((t.color||e.color)&&!u.a.equals(t.color,e.color))}var Bt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"editor-helpbtn-wrap",style:t.externalStyle},[t.showCustomService?o("lgMsgPopper",{attrs:{show:t.showPopper,closeBtn:!0,offset:5,transitionName:"clip-opacityfade",placement:"top"},on:{"update:show":function(e){t.showPopper=e}}},[o("h2",{staticClass:"cs-popper-title"},[t._v("客官！抠图客服来了！")]),o("p",{staticClass:"cs-popper-desc"},[t._v("抠图任何问题点我！")]),o("lg-button",{staticClass:"custom-service",attrs:{slot:"bind",type:"text"},nativeOn:{click:function(e){return t.$emit("customer-service")}},slot:"bind"},[o("img",{staticClass:"icon",attrs:{src:i(552),alt:"客服按钮"}})])],1):t._e(),o("lg-button",{staticClass:"editor-help",nativeOn:{click:function(e){return t.$emit("help-click")}}},[o("lg-icon",{staticClass:"px-16",attrs:{name:"help"}}),o("span",[t._v("帮助")])],1)],1)},Lt=[],Ft={components:{lgIcon:g["Icon"],lgButton:g["Button"],lgMsgPopper:g["MsgPopper"]},props:{externalStyle:{type:Object,default(){return{}}},showCustomService:{type:Boolean,default:!0}},data(){return{showPopper:!1}},created(){Ct.once(_t.FIRST_CLIP_CLOSE,()=>{setTimeout(()=>{this.showPopper=!0},500)})}},$t=Ft,Ut=(i(666),Object(w["a"])($t,Bt,Lt,!1,null,null,null)),Ht=Ut.exports,Gt=i(644),Zt=i(496),Wt={methods:{importDapter(t,e={}){let{mode:i="",filename:r="",fromType:a="",userAttr:n=""}=e;const{maxImageWidth:s,maxImageHeight:l}=o["b"].editor.config,c={maxWidth:s,maxHeight:l};if("string"===typeof t){if(/^http/.test(t))return Object(M["b"])(t).then(e=>e.naturalWidth<=s&&e.naturalHeight<=l?this.blockingRecordMode?this.createFileData(t,r,a,n):this.createAsyncFileData(t,r,a,n):Object(Gt["b"])(e,c).then(t=>this.importDapter(new File([t],r,{type:t.type}),i,r)));if(/^data/.test(t)){const e=Object(Zt["a"])(t);return this.importDapter(new File([e],r,{type:e.type}),i,r)}if(/^blob:/.test(t))return fetch(t).then(t=>t.blob()).then(t=>this.importDapter(new File([t],r,{type:t.type}),i,r));if(/\d+/.test(t))return this.getFileData(t)}if("number"===typeof t)return this.getFileData(t);if(t instanceof File||t instanceof Blob)return t.name&&(r=t.name),Promise.resolve(t).then(t=>{const e=Object.assign({type:t.type,quality:1},c);return t.size>12582912?o["b"].resizeFileImage(t,e):o["b"].compressBeforeUpload?t.width&&t.height?t.width<=s&&t.height<=l?t:o["b"].resizeFileImage(t,e):Object(M["b"])(URL.createObjectURL(t)).then(i=>i.naturalWidth<=s&&i.naturalHeight<=l?t:o["b"].resizeFileImage(t,e)):t}).then(t=>{if(!o["b"].uploadImage)throw new Error("如果传入的为File类型数据，请配置uploadImage属性");return o["b"].uploadImage(t).catch(t=>{throw this.$emit("upload-fail"),new Error("upload-fail",t.message)})}).then(async t=>{this.$emit("upload-success");let i=t.url;e.showProgress&&this.setLoadingDialog({title:this.$t("mattingEditor.import.uploading"),progress:70});const c=await Object(M["b"])(t.url);if(!o["b"].compressBeforeUpload&&(c.naturalWidth>s||c.naturalHeight>l)&&(i+=`?x-oss-process=image/resize,w_${s},h_${l}`),i)return this.blockingRecordMode?this.createFileData(i,r,a,n):this.createAsyncFileData(i,r,a,n);this.$message(this.$t("mattingEditor.import.retryUpload"))});if(t.id&&t.recordId)return this.getFileData(t.id,t.recordId);throw new Error(this.$t("mattingEditor.import.analyFail"))},async importMatting(t,e={showProgress:!0,fromType:"koutu",userAttr:""}){this.currentResultTool&&this.toggleResultTool("",!1),e.recordlessMode&&(this.$options.recordlessMode=e.recordlessMode);const i=t=>{e.showProgress&&this.setLoadingDialog(t)};i({title:this.$t("mattingEditor.import.importing"),progress:40});const{mode:r=""}=e;this.importing=!0;const a=Date.now();this.toggleMattingTool("");const n=0!==o["b"].editor.status;o["b"].editor.reset();try{await this.importDapter(t,e)}catch(g){console.error(g.message),i({show:!1}),this.importing=!1;const t=this.$t("mattingEditor.import.failed");throw this.isGD?o["b"].errorMessage(g.message||t):o["b"].errorMessage(t),g}const{mattingRecord:s}=o["b"].editor,l=this.$options.fileData.id,c=s.scene,d=t===l;this.currentMode=!c&&d||"manual"===r?"general":"auto","auto"===this.currentMode&&await this.switchMode(this.currentMode,!d),n&&o["c"].editorReplaceImage({id:l,scene:c}),i({title:this.$t("mattingEditor.import.loaded"),progress:100,show:!1}),this.importing=!1,this.editor.featherRadius=s.featheringRadius,this.editor.hairColors=s.hairKeepColors,this.editor.bgColors=s.hairDropColors,this.editor.snapshotLength=o["b"].editor.snapshot.length,this.editor.snapshotIdx=o["b"].editor.snapshot.$index,this.editor.hasUndo=o["b"].editor.snapshot.hasUndo,this.editor.hasRedo=o["b"].editor.snapshot.hasRedo,this.editor.sourceImage=o["b"].editor.mattingRecord.sourceImage,o["c"].editorLoaded({scene:c,time:a,work_id:l})},importFile(t,e){return this.importMatting(t,{mode:e})},importRecord(t,e,i,o=!0){return this.importMatting(t,{mode:e,filename:i,showProgress:o})},async importMask(t,e,i={}){i.recordlessMode&&(this.$options.recordlessMode=i.recordlessMode),this.importing=!0,this.currentMode="auto",0!==o["b"].editor.status&&o["b"].editor.reset(),await o["b"].editor.importMask(t,e),this.toggleMattingTool("repair-brush"),this.importing=!1}}},Vt=i(583),Yt=i.n(Vt),Qt=i(118),Xt=i.n(Qt),qt=i(580);async function Jt(t){let e,i="";if(t instanceof HTMLImageElement&&t.width?e=t:i=t instanceof HTMLImageElement?t.src:t,i){const t=performance.getEntriesByName(i)[0].transferSize;if(t)return Promise.resolve(t);e=await Object(M["b"])(i)}const o=document.createElement("canvas");return o.width=e.width,o.height=e.height,o.getContext("2d").drawImage(e,0,0),new Promise(t=>{o.toBlob(e=>{e&&t(e.size),t(0)})})}function Kt(){const{mattingRecord:t}=o["b"].editor;return o["b"].editor.exportImage({type:"canvas"}).then(t=>Object(E["a"])(t,"image/png",.92)).then(t=>o["b"].uploadImage(t)).then(e=>({url:e.url,width:t.crop.width,height:t.crop.height}))}var te={created(){this.updatePreview=Xt()(this.updatePreview.bind(this),1e3),this.updateContent=Xt()(this.updateContent.bind(this),200)},recordlessMode:!1,fileData:{},layoutData:{},methods:{updateLayoutData(){const{mattingRecord:t}=o["b"].editor;return this.$emit("update",t),t.id&&(this.$options.layoutData.refs[t.id]=t),this.$options.layoutData},createDefaultLayoutData(t){const e=this.$options.fileData.id;t.id=e;const i=Object(qt["createEmptyMatting"])(),o=Object(qt["createEmptyLayout"])();return o.elements[0].metaInfo.thirdParty.matting.id=e,o.elements[0].metaInfo.thirdParty.matting.refId=e,i.layouts.push(o),i.refs[e]=t,i},parseMattingRecord(t,e){const i=Yt()(t,...qt["fildDataDefaultKeys"]);if(this.$options.fileData=i,!i.content){const e=Object(qt["createEmptyRecord"])({url:t.source_url||t.origin_url||t.preview.url,title:t.title,width:t.preview.width||300,height:t.preview.height||150,id:t.id});return this.$options.layoutData=this.createDefaultLayoutData(e),e}const o=JSON.parse(i.content);if(!o.refs){const t=o;return this.$options.layoutData=this.createDefaultLayoutData(t),t}return this.$options.layoutData=o,e&&o.refs[e]?o.refs[e]:Object.values(o.refs)[0]},async createFileData(t,e,i,r){e=e||"稿定抠图",this.$options.fileData={};const a=await Object(M["b"])(t),n=await Jt(a),s={url:t,width:a.naturalWidth,height:a.naturalHeight,title:e,size:n,is_hide:o["b"].isHide},l=this.usePatching?"2.16.6":"2.16.5";return o["b"].editor.apiInstance.createMattingFileData([s],{version:l,fromType:i,userAttr:r}).then(t=>{const e=this.parseMattingRecord(t);return o["b"].editor.importRecord(e)})},async createAsyncFileData(t,e,i,r){e=e||"稿定抠图",this.$options.fileData={};const a=await Object(M["b"])(t),n=await Jt(a),s={url:t,width:a.naturalWidth,height:a.naturalHeight,title:e,size:n,is_hide:o["b"].isHide},l=this.usePatching?"2.16.6":"2.16.5",c=Object(qt["createEmptyRecord"])({url:t,width:a.naturalWidth,height:a.naturalHeight});return await o["b"].editor.importRecord(c),o["b"].editor.apiInstance.createMattingFileData([s],{version:l,fromType:i,userAttr:r}).then(t=>{try{const e=Yt()(t,...qt["fildDataDefaultKeys"]),i=JSON.parse(e.content),r=Object.values(i.refs)[0],a=o["b"].editor.mattingRecord;a.id=r.id,i.refs[r.id]=JSON.parse(JSON.stringify(a)),this.$options.layoutData=i,e.content=JSON.stringify(i),this.$options.fileData=e,this.$emit("generated-record"),this.updateContent()}catch(e){console.error("matting record create fail")}}),Promise.resolve()},getFileData(t,e){return o["b"].editor.apiInstance.getFileData(t).then(t=>{const i=this.parseMattingRecord(t,e);return o["b"].editor.importRecord(i)})},updateFileData(t){const{id:e}=this.$options.fileData,i=Object.assign({},this.$options.fileData,t,{content:JSON.stringify(this.updateLayoutData())});return o["b"].editor.apiInstance.updateFileData(e,i).then(t=>(this.$options.fileData=Yt()(t,...qt["fildDataDefaultKeys"]),t))},async updateContent(){if(this.$options.recordlessMode)return;const{id:t}=this.$options.fileData;if(!t)return;const e=Date.now(),{scene:i}=o["b"].editor.mattingRecord;o["c"].editorSaving({scene:i,work_id:t});const r={content:JSON.stringify(this.updateLayoutData())};let a=null;try{a=await Kt()}catch(s){console.log(s)}a&&(r.preview=a);const n=await this.updateFileData(r);return o["c"].editorSaved({scene:i,work_id:t,time:e}),n},async updatePreview(){try{return this.updateFileData({preview:await Kt()})}catch(t){console.error(t)}},saveFileData(){const t=this.$options.fileData;"PERSON"!==t.repository_type&&o["b"].editor.apiInstance.saveFileData(t.id,Object.assign({},t))}}};function ee(t){const e={recognition:!1,"repair-brush":!1,"eraser-brush":!1,keep:!1,drop:!1,edge:!1,path:!1,hair:!1},i=localStorage.getItem("smart-mode")||"";i&&t.scene&&t.scene!==i&&(e.recognition=!0);const o=t.recoLines||[];e["repair-brush"]=o.some(t=>"keep"===t.action),e["eraser-brush"]=o.some(t=>"eraser"===t.action);const r=t.lines||[];return e.keep=r.some(t=>"keep"===t.action),e.drop=r.some(t=>"drop"===t.action),e.edge=2!==t.featheringRadius,e.path=!!t.pen.length,t.hairDropColors.length>0&&t.hairKeepColors.length>0&&t.hairLines.length>0&&(e.hair=!0),e}function ie(t,{width:e,height:i}){const o={background:!1,crop:!1,shadow:!1,filter:!1,outline:!1};return(t.backgroundColor||t.background&&(t.background.image||t.background.color))&&(o.background=!0),(t.shadow.blur||t.shadow.offsetX||t.shadow.offsetY)&&(o.shadow=!0),(t.crop.width!==e||t.crop.height!==i||1!==t.crop.scale||t.crop.left||t.crop.top)&&(o.crop=!0),t.filter.id&&(o.filter=!0),t.outline.length&&(o.outline=!0),o}var oe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"matting-tools"},t._l(t.buttons,(function(e,o){return i("SelectButton",{key:""+(e.name+o),class:"matting-tools-"+e.name,attrs:{"select-style":"type2",active:t.currentTool===e.name},nativeOn:{click:function(i){return t.$emit("change",e.name)}}},[i("Icon2",{attrs:{name:e.icon}}),i("span",{staticClass:"text"},[t._v(t._s(e.text))])],1)})),1)},re=[],ae={components:{Icon2:g["Icon2"],SelectButton:g["SelectButton"]},props:{buttons:{type:Array,default:()=>[]},currentTool:{type:String,default:""}}},ne=ae,se=(i(668),Object(w["a"])(ne,oe,re,!1,null,null,null)),le=se.exports,ce=i(492);const de=["show"];function ge(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function pe(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ge(Object(i),!0).forEach((function(e){ue(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ge(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function ue(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function he(t,e){if(null==t)return{};var i,o,r=fe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(o=0;o<a.length;o++)i=a[o],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}function fe(t,e){if(null==t)return{};var i,o,r={},a=Object.keys(t);for(o=0;o<a.length;o++)i=a[o],e.indexOf(i)>=0||(r[i]=t[i]);return r}let me=0;const be="clip.used";Object(L["c"])();var we={name:"MattingEditor",components:{lgTabs:g["Tabs"],lgIcon:g["Icon"],lgButton:g["Button"],lgSbutton:g["SelectButton"],lgContainer:g["Container"],lgRanger:g["Ranger"],lgLoading:g["Loading"],LoadingDialog:y,LegoEditor:dt,ClipTransition:ht,FadeTransition:wt,Tooltip:d["a"],MiniGuide:Ot,ClipFocus:Rt,helpButton:Ht,Icon2:g["Icon2"],MattingTools:le,Checkbox:c["a"]},mixins:[Wt,te,$],props:{beforeToHome:{type:Function,default:()=>!0},useWatermark:{type:Boolean,default:!1},maxWidth:{type:Number,default:2e3},maxHeight:{type:Number,default:2e3},completeBtnText:{type:String,default:""},useClipFaceDetect:{type:Boolean,default:!1},useFilter:{type:Boolean,default:!1},sdkMode:{type:String,default:"switch"},helpArticle:{type:Object,default:null},showCustomService:{type:Boolean,default:!1},homeBtnLink:{type:String,default:""},homeBtnLinkIcon:{type:String,default:"logo",validator:t=>["logo","home"].includes(t)},homeTarget:{type:String,default:"_blank"},postTool:{type:Object,default:()=>({background:!1,crop:!1,shadow:!1,filter:!1})},patchingMode:{type:[Boolean,Number],default:!1},newVersion:{type:Boolean,default:!1},useHelp:{type:Boolean,default:!0},showSwitchBtn:{type:Boolean,default:!1},styleMode:{type:String,default:"blue"},blockingRecordMode:{type:Boolean,default:!0}},data(){const t=Date.now();return{editorLoadedTime:0,noSupportFilterBrowser:/edge/i.test(navigator.userAgent),trackerInfo:{editorInitTime:t,eraser:!1},isOperation:!1,firstUse:!o["b"].store.get(be),currentMode:"auto",helpVisible:!1,importing:!0,editorLoaded:!1,isMatting:{matting:!1,hair:!1,auto:!1,classify:!1,filter:!1},loading:{progress:0,show:!1,title:this.$t("mattingEditor.loading.loading")},showBrushSizeIndicator:!1,currentMattingTool:"",hairSubTool:"brush",recognitionSubTool:"",currentResultTool:"",zoomLevels:[.15,.2,.3,.5,.8,1,1.5,2,3,4,5,6,7,8,9,10],editor:{id:0,zoomLevel:1,autoBrushSize:1,autoFeatherSize:0,brushSize:1,featherRadius:1,hairColors:[],bgColors:[],snapshotLength:0,snapshotIdx:0,hasUndo:!1,hasRedo:!1,sourceImage:""},brushIndicator:{size:0,feather:0},useAutoClip:!1,currentPatchingMode:!1}},computed:{modeTabs(){return[{name:this.$t("mattingEditor.auto"),key:"auto"},{name:this.$t("mattingEditor.general"),key:"general"}]},focusActive(){if(!this.isGD)return!1;const{sdkMode:t,currentMode:e,editorLoaded:i,importing:o,firstUse:r}=this;return"offline"!==t&&("general"===e||this.currentPatchingMode)&&i&&!o&&r},autoBrushSize:{get(){return this.editor.autoBrushSize},set(t){this.editor.autoBrushSize=t,o["b"].autoPlugin.setBrushSize(t),this.toggleBrushIndicator(t,this.realAutoFeatherSize)}},autoFeatherSize:{get(){return this.editor.autoFeatherSize},set(t){this.editor.autoFeatherSize=t,o["b"].autoPlugin.setFeatherSize(this.realAutoFeatherSize/100),this.toggleBrushIndicator(this.autoBrushSize,this.realAutoFeatherSize)}},realAutoFeatherSize(){return 99-this.autoFeatherSize},brushSize:{get(){return this.editor.brushSize},set(t){o["b"].clipBrushPlugin.setBrushSize(t),this.editor.brushSize=o["b"].clipBrushPlugin.brushSize,this.toggleBrushIndicator(t)}},featherRadius:{get(){return this.editor.featherRadius},set(t){o["b"].editor.setFeatheringRadius(t),this.editor.featherRadius=o["b"].editor.mattingRecord.featheringRadius}},indicatorGradient(){return(t,e)=>{const i={width:t+"px",height:t+"px",borderRadius:"50%"};return e&&(i.background=`radial-gradient(rgba(38, 84, 244, 1) 0%, rgba(38, 84, 244, 1) ${100-e}%,rgba(38, 84, 244, 0) 100%)`),i}}},watch:{recognitionSubTool(t){this.autoFeatherSize="portrait"===t?100:0,this.currentPatchingMode&&(this.useAutoClip=!!t)}},mounted(){console.log("this.newVersion",this.newVersion),this.newVersion?this.switchPatchingMode("new"):this.currentPatchingMode=this.patchingMode,this.loadEditor(),this.initLeavingTracker()},beforeDestroy(){this.toggleResultTool(""),this.$emit("destroy")},methods:{homeEvent(){if(!this.homeLink){const t=document.createElement("a");t.setAttribute("href",this.homeBtnLink),t.setAttribute("target",this.homeTarget),this.homeLink=t}const t=this.beforeToHome();(t||void 0===t)&&this.homeLink.click()},showHelp(){this.helpVisible=!0,this.toggleMiniGuide(!0,!1)},initLeavingTracker(){this.$on("destroy",()=>{o["c"].editorExit({time:this.trackerInfo.editorInitTime,scene:o["b"].editor.mattingRecord.scene,work_id:this.$options.fileData.id})})},beforeModeSwitch(t){const e=()=>this.switchMode(t);return o["b"].editor.isEmptyRecord?(e(),this.$nextTick(()=>this.toggleMiniGuide(!1)),Promise.resolve(!0)):l["a"].open({title:this.$t("mattingEditor.switchAlert.title"),content:this.$t("mattingEditor.switchAlert.content"),okText:this.$t("mattingEditor.switchAlert.ok"),cancelText:this.$t("mattingEditor.switchAlert.cancel")}).then(t=>t?(""!==this.currentResultTool?(this.importing=!0,this.currentResultTool="",this.$nextTick(()=>{e(),this.importing=!1})):e(),this.$nextTick(()=>this.toggleMiniGuide(!1)),t):t)},setLoadingDialog(t,e){const{show:i=!0}=t,o=he(t,de);Object.assign(this.loading,o),e&&!1===i?setTimeout(()=>{this.loading.show=!1},200):this.loading.show=i},async exportImage(t){const{showProgress:e=!0,shouldTrack:i=!0}=t,r=this.getExtendDownloadInfo(),a=i?this.exportTracker(r,t):()=>{},n=t=>e?this.setLoadingDialog(t):"",s=()=>{n({progress:100,show:!1}),this.currentResultTool&&(this.currentResultTool=""),a()};n({title:this.$t("mattingEditor.loading.exporting"),progress:40}),this.currentResultTool&&await this.setFilter(r.filter);const l=await o["b"].editor.exportImage(pe(pe({},t),{},{extend:r}));if(!t.needUpload||!o["b"].editor.uploadImage)return s(),l;const c=await Object(Zt["a"])(l);return o["b"].uploadImage(c).then(t=>(s(),t.url))},exportMask(){const t=o["b"].editor.core.mattingDrawer.drawingBoard.clip.canvas,{canvas:e,ctx:i}=Object(A["a"])(t.width,t.height);return i.drawImage(t,0,0),i.globalCompositeOperation="source-in",i.fillRect(0,0,t.width,t.height),e},exportTracker(t,e){const{mattingRecord:i,imageSize:r}=o["b"].editor,a=Date.now(),n=this.$options.fileData.id;o["c"].editorExporting({export_target_type:e.type||"png",edit_elapsed_time:this.editorLoadedTime,scene:i.scene,work_id:n});const s=ee(i),l=ie(this.currentResultTool?t:i,r),c=Object.keys(s).filter(t=>s[t]).concat(this.trackerInfo.eraser?"eraser":[]).map(t=>`${Object(ce["c"])()}-${Object(ce["d"])(t)}`).concat(Object.keys(l).filter(t=>l[t]).map(t=>Object(ce["d"])(t)));return()=>o["c"].editorExported({export_target_type:e.type,scene:i.scene,work_id:n,time:a,matting_ai_use_tool:xt["c"].bitStatus([s.mode,s["repair-brush"]||s["eraser-brush"],s.keep||s.drop,s.edge,s.path,s.hair]),matting_complete_use_tool:xt["c"].bitStatus([l.background,l.crop,l.shadow,l.filter,l.outline]),function_used:c})},getExtendDownloadInfo(){const t=this.$refs.LegoEditor,e=this.currentResultTool?{background:t.background.backgroundInfo,crop:pe({scale:t.scale},t.cropRect),shadow:t.shadow.useNormal?j(t.shadow.normal):O(),outline:t.outline.active?t.outline.group:[],filter:t.filterInfo.filterObject,transform:{rotate:t.rotate}}:{};return e},toggleMattingTool(t){if(t===this.currentMattingTool)return;const e=this,i={"repair-brush":{name:"AutoClip",sub(){o["b"].autoPlugin.useRepair()}},"eraser-brush":{name:"AutoClip",sub(){o["b"].autoPlugin.useEraser()}},recognition:{name:"AutoClip",sub(){o["b"].autoPlugin.useNone()}},keep:{name:"ClipBrush",sub(){o["b"].clipBrushPlugin.useKeepBrush()}},drop:{name:"ClipBrush",sub(){o["b"].clipBrushPlugin.useDropBrush()}},eraser:{name:"ClipBrush",sub:()=>{this.trackerInfo.eraser=!0,o["b"].clipBrushPlugin.useEraserBrush()}},hair:{get name(){return"eraser"===e.hairSubTool||"brush"===e.hairSubTool?"HairBrush":"ColorPicker"}},path:{name:"Pen"},premask:{name:"AutoClip",sub(){o["b"].autoPlugin.useNone()}}},r=i[t];r&&(o["b"].editor.usePlugin(r.name),r.sub&&r.sub()),this.currentMattingTool=t,this.toggleMiniGuide(!0,!0),t&&o["c"].editorFunc({scene:o["b"].editor.mattingRecord.scene,action_type:t,work_id:this.$options.fileData.id})},toggleHairTool(t){if(this.hairSubTool===t)return;this.hairSubTool=t;const e={brush(){o["b"].editor.usePlugin("HairBrush"),o["b"].hairBrushPlugin.useHairBrush()},eraser(){o["b"].editor.usePlugin("HairBrush"),o["b"].hairBrushPlugin.useEraserBrush()},"hair-eyedropper"(){o["b"].editor.usePlugin("ColorPicker"),o["b"].hairEyedropperPlugin.useHairPicker()},"bg-eyedropper"(){o["b"].editor.usePlugin("ColorPicker"),o["b"].hairEyedropperPlugin.useBgPicker()}};e[t]&&e[t]()},async toggleResultTool(t,e=!1){if(t===this.currentResultTool)return;if(t&&(this.isMatting.auto||this.isMatting.hair||this.isMatting.matting||this.isMatting.classify||this.isMatting.filter))return void this.$message(this.$t("mattingEditor.effects.waiting"));const i=this.$refs.LegoEditor;""===this.currentResultTool&&t&&(await i.setBackground(o["b"].editor.mattingRecord.background,!1),i.setFilter(o["b"].editor.mattingRecord.filter),i.setShadow(o["b"].editor.mattingRecord.shadow),i.setOutline(o["b"].editor.mattingRecord.outline),i.setCrop(o["b"].editor.mattingRecord.crop),i.setRotate(o["b"].editor.mattingRecord.transform.rotate),await i.importImage(o["b"].editor.getUnpretreatedMattingResult()||o["b"].editor.mattingRecord.sourceImage)),""===t&&""!==this.currentResultTool&&setTimeout(()=>{o["b"].editor.fitImageBounding()}),"background"===t&&o["b"].editor.isClean()&&this.$message(this.$t("mattingEditor.effects.bg.tips")),e&&(i.preserveEvent=!0,this.$nextTick(()=>{i.preserveEvent=!1})),this.currentResultTool=t,t?(this.$refs.guide.hideGuideIfNoMatchContent(t),o["c"].editorResultTool({tool:this.currentResultTool,work_id:this.$options.fileData.id,scene:o["b"].editor.mattingRecord.scene})):this.$refs.guide.hideGuide()},loadEditor(){if(this.editorLoaded)return Promise.resolve();const{source:t,result:e}=o["b"].editor.canvas.getCanvasElements(),i=function(t){t.preventDefault()};this.$refs.source.appendChild(t),this.$refs.result.appendChild(e),t.addEventListener("contextmenu",i,!1),e.addEventListener("contextmenu",i,!1),this.useFilter&&!this.noSupportFilterBrowser&&o["b"].editor.registerPretreatRenderer(this.pretreatImage),this.$once("destroy",()=>{this.$refs.source.removeChild(t),this.$refs.result.removeChild(e),t.removeEventListener("contextmenu",i,!1),e.removeEventListener("contextmenu",i,!1)}),this.editor.brushSize=o["b"].clipBrushPlugin.brushSize,this.editor.autoBrushSize=o["b"].autoPlugin.brushSize,this.initEvent(),this.initPanHotkey(),this.initWindowResizeEvent(),o["b"].editor.resizeCanvasToFillContainer(),this.editorLoaded=!0,window.__editor=o["b"].editor,this.editorLoadedTime=Date.now(),o["c"].editorInit(this.trackerInfo.editorInitTime)},initWindowResizeEvent(){const t=s()(()=>{o["b"].editor.resizeCanvasToFillContainer()},500,{trailing:!0});window.addEventListener("resize",t,!1),this.$once("destroy",()=>{window.removeEventListener("resize",t,!1)})},initEvent(){const t=this,e=this.editor,i=this.isMatting,r={"editor.zoom":function(t){e.zoomLevel=t},"editor.record.update":t=>{t=t||o["b"].editor.getMattingRecord(),e.hairColors=t.hairKeepColors,e.bgColors=t.hairDropColors,this.$refs.LegoEditor.clearFilterCache()},snapshot:{names:["editor.snapshot.change"],handlers:[function(i){e.snapshotLength=o["b"].editor.snapshot.length,e.snapshotIdx=o["b"].editor.snapshot.$index,e.hasUndo=o["b"].editor.snapshot.hasUndo,e.hasRedo=o["b"].editor.snapshot.hasRedo,t.recognitionSubTool=o["b"].editor.mattingRecord.scene,i=i||o["b"].editor.getMattingRecord(),e.hairColors=i.hairKeepColors,e.bgColors=i.hairDropColors,t.$refs.LegoEditor.clearFilterCache()}]},"editor.clip.start":function(t){i[t]=!0},"editor.clip.error":function(e,r){i[r]=!1,t.$message(e.message||t.$t("mattingEditor.failed")),o["c"].editorAlert({scene:o["b"].editor.mattingRecord.scene,work_id:this.$options.fileData.id})},"editor.clip.abort":function(){for(const t in i)i[t]=!1},"editor.clip.success":t=>{i[t]=!1},"editor.classify.start":function(){i.classify=!0},"editor.classify.nosupport":function(){i.classify=!1,t.$message(t.$t("mattingEditor.typeError"))},"editor.classify":{names:["editor.classify.error","editor.classify.success"],handlers:[function(e){i.classify=!1,e&&("string"===typeof e?(localStorage.setItem("smart-mode",e),window.scene=e,t.recognitionSubTool=e):o["b"].errorMessage(t.$t("mattingEditor.funcs.autoFailed")))}]},"editor.operation.start":function(){t.isOperation=!0},"editor.operation.end":function(){t.isOperation=!1},"editor.result.update"(){t.updateContent(),t.$emit("result-update",o["b"].editor.mattingRecord)}};for(const a in r)if(Array.isArray(r[a]))r[a].forEach(t=>{o["b"].eventBus.on(a,t)});else if("function"!==typeof r[a]){const t=r[a].names,e=r[a].handlers;t.forEach(t=>{e.forEach(e=>{o["b"].eventBus.on(t,e)})})}else o["b"].eventBus.on(a,r[a]);this.$once("destroy",()=>{for(const t in r)if(Array.isArray(r[t]))r[t].forEach(e=>{o["b"].eventBus.off(t,e)});else if("function"!==typeof r[t]){const e=r[t].names,i=r[t].handlers;e.forEach(t=>{i.forEach(e=>{o["b"].eventBus.off(t,e)})})}else o["b"].eventBus.off(t,r[t])})},setZoom(t){const{canvasHeight:e,canvasWidth:i}=o["b"].editor.canvas,r=this.editor.zoomLevel,a="out"===t,n="in"===t;let s=0;for(;s<this.zoomLevels.length;s++){if(a&&this.zoomLevels[s]>=r){s--;break}if(n&&this.zoomLevels[s]>r)break}s<0||s===this.zoomLevels.length||o["b"].editor.setZoom(this.zoomLevels[s],{x:i/2,y:e/2})},fitOrActualSize(){1===this.editor.zoomLevel?o["b"].editor.fitImageBounding():o["b"].editor.actualSize()},initPanHotkey(){let t="";const e=t=>{const{target:e}=t,{tagName:i}=e;return!("INPUT"===i||"SELECT"===i||"TEXTAREA"===i||e.isContentEditable)},i=i=>{const r=i.keyCode;if(e(i)&&32===r){i.preventDefault();const e=o["b"].editor.currentPluginName;"Pan"===e||o["b"].editor.isPluginLocked||(o["b"].editor.usePlugin("Pan"),t=e)}},r=i=>{const r=i.keyCode;if(e(i)&&32===r){i.preventDefault();const e=o["b"].editor.currentPluginName;t&&"Pan"===e&&(o["b"].panPlugin.inactive(),o["b"].editor.usePlugin(t),t=null)}};document.addEventListener("keydown",i,!1),document.addEventListener("keyup",r,!1),this.$once("destroy",()=>{document.removeEventListener("keydown",i,!1),document.removeEventListener("keyup",r,!1)})},removeColor(t,e){"hair"===e&&o["b"].hairEyedropperPlugin.deleteHairColor(t),"bg"===e&&o["b"].hairEyedropperPlugin.deleteBgColor(t)},undo(){o["b"].editor.snapshot.undo()},redo(){o["b"].editor.snapshot.redo()},startover(){l["a"].open({title:this.$t("mattingEditor.startOver.title"),content:this.$t("mattingEditor.startOver.content"),okText:this.$t("mattingEditor.startOver.ok"),cancelText:this.$t("mattingEditor.startOver.cancel"),onOk:()=>{o["b"].editor.clear()}})},usePan(){"Pan"!==o["b"].editor.currentPluginName&&(this.currentMattingTool="",o["b"].editor.usePlugin("Pan"))},setBackground(t){this.importing||Nt(o["b"].editor.mattingRecord.background,t)||o["b"].editor.setBackground(t)},setCrop(t){if(this.importing)return;const{width:e,height:i,left:r,top:a,scale:n}=t,{width:s,height:l,left:c,top:d,scale:g}=o["b"].editor.mattingRecord.crop;e===s&&i===l&&r===c&&a===d&&n===g||o["b"].editor.setCrop(t)},setRotate({rotate:t}){o["b"].editor.setRotate(t)},setShadow(t){const{offsetX:e,offsetY:i,blur:r,color:a}=o["b"].editor.mattingRecord.shadow;t.offsetX===e&&t.offsetY===i&&t.blur===r&&u.a.equals(t.color,a)||o["b"].editor.setShadow(t)},setOutline([t]){const{width:e,fill:i}=o["b"].editor.mattingRecord.outline[0]||{};t?e===t.width&&u.a.equals(i,t.fill)||o["b"].editor.setOutline([t]):o["b"].editor.setOutline([])},async setFilter(t){const e=o["b"].editor,{id:i,strong:r}=e.mattingRecord.filter;t.id===i&&t.strong===r||(this.currentResultTool||(this.isMatting.filter=!0),await e.setFilter(t),this.isMatting.filter=!1)},async pretreatImage(t){const{url:e,width:i,height:r}=await S(t),{filter:a}=o["b"].editor.mattingRecord,n=document.createElement("canvas"),s=n.getContext("2d");if(n.width=i,n.height=r,!a.id)return s.drawImage(t,0,0),n;try{const{canvas:t}=await o["b"].filterRenderer.createTask(e,a.prunedZipUrl,i,r,a.strong,0);return s.drawImage(t,0,0),n}catch(l){return console.error(l),s.drawImage(t,0,0),n}},async toggleRecognitionTool(t){if(this.isMatting.auto||this.isMatting.classify)this.$message(this.$t("mattingEditor.funcs.waiting"));else switch(this.currentPatchingMode&&await o["b"].editor.clearBrushes(),this.recognitionSubTool=t,t){case"portrait":o["b"].autoPlugin.selectPortrait(!0);break;case"graphic":o["b"].autoPlugin.selectGraphic(!0);break;case"product":o["b"].autoPlugin.selectProduct(!0);break}},markUsed(){o["b"].store.set(be,!0),this.firstUse=!1},toggleBrushIndicator(t,e=0){this.showBrushSizeIndicator=!0,this.brushIndicator.size=t,this.brushIndicator.feather=e,me&&clearTimeout(me),me=setTimeout(()=>{this.showBrushSizeIndicator=!1,me=null},500)},async switchMode(t,e=!0){const i=o["b"].editor;return this.trackerInfo.eraser=!1,"auto"===t?i.switchToAutoMode(e).then(()=>{const t=this.currentPatchingMode?"premask":"recognition";this.toggleMattingTool(t),this.recognitionSubTool=i.mattingRecord.scene}):i.switchToManualMode().then(()=>{this.focusActive||this.toggleMattingTool("keep")})},toggleMiniGuide(t,e){const i=this.$refs.guide;i&&(t?this.isGD&&i.showGuide(this.currentMattingTool,e):i.hideGuide())},switchPatchingMode(t){o["c"].editorFunc({scene:o["b"].editor.mattingRecord.scene,action_type:"new"===t?"newVersion":"oldVersion",work_id:this.$options.fileData.id}),"new"===t?(this.currentPatchingMode=!0,o["b"].store.set("noPatchingMode",!1),o["b"].editor.setPatchingData(!0)):(this.currentPatchingMode=!1,o["b"].store.set("noPatchingMode",!0),o["b"].editor.setPatchingData(!1)),o["b"].editor.clear(!0).then(()=>{this.currentMode="auto",this.switchMode("auto"),o["b"].editor.autoClip()})},toggleAutoClip(){if(Object.values(this.isMatting).includes(!0))return this.$message("请等待识别完成"),void(this.useAutoClip=!this.useAutoClip);o["b"].editor.modifyAutoClipRect(()=>[]),o["b"].editor.clearBrushes().then(()=>{this.useAutoClip?o["b"].editor.autoClip(!0):(o["b"].editor.modifyAutoClipScene(null),this.recognitionSubTool=null)})},generalMattingTools(){const t=[{name:"keep",icon:"keep",text:this.$t("mattingEditor.funcs.keep")},{name:"drop",icon:"drop",text:this.$t("mattingEditor.funcs.remove")},{name:"eraser",icon:"eraser",text:this.$t("mattingEditor.funcs.eraseBrush")}];return this.currentPatchingMode&&t.unshift({name:"premask",icon:"recognition",text:this.$t("mattingEditor.funcs.mode")}),t},otherGeneralMattingTools(){const t="graphic"===this.recognitionSubTool;return this.currentPatchingMode?t?[]:[{name:"path",icon:"path",text:this.$t("mattingEditor.funcs.pen")}]:[{name:"edge",icon:"adjust",text:this.$t("mattingEditor.funcs.edge")},{name:"path",icon:"path",text:this.$t("mattingEditor.funcs.pen")},{name:"hair",icon:"hair",text:this.$t("mattingEditor.funcs.hair")}]}}},xe=we,ye=(i(670),Object(w["a"])(xe,r,a,!1,null,null,null)),ve=ye.exports;function ke(t){return Object(o["a"])(t),[ve,o["b"].editor]}var Ce=i(499),_e=i(116),Ie=i(29);const Me="https://search-v2.hlgdata.com",Ae=Object(Ie["b"])({baseURL:Me}),je={search:"GET /material/search"},ze=Ae.createApi(je);var Oe=i(562),Te=i(48),Ee=i(460),Se=i(501),Pe=i(23),De=i(5),Re=i(128);const Ne=o["c"].utils;let Be=null;const Le=ke({message:Te["b"],errorMessage:Te["a"],uploadImage(t){return Object(Ce["a"])(t,{compress:!1})},api:{createFaceRect(t){return _e["a"].createFaceRect(t).then(t=>t.data)},async queryFilters(){const t=(await _e["a"].queryCategories({parent_id:0,with_debug:1,channels:"all",resource_type:"material"})).data.filter(t=>"抠图滤镜"===t.name)[0],e=(await _e["a"].queryCategories({parent_id:t.id,with_debug:1,channels:"all",resource_type:"material"})).data,i=await Promise.all(e.map(async e=>{const i=(await _e["a"].queryMaterials({scene_id:t.id,category_id:e.id,page_num:1,page_size:1e3})).data;return{categoryName:e.name,filters:i}}));return i},async getFilter(t){const e=(await _e["a"].getMaterial({id:t})).data;return e.content},async getBackgroundMaterial(){try{const t=(await _e["a"].getMaterialFilter({page_size:100,region_id:2,biz_code:10,endpoint:4})).data,e=t.filter(t=>"FocoClipping背景素材"===t.name)[0],i=await ze.search({page_num:1,page_size:100,filter_id:e.id,region_id:2,biz_code:10,endpoint:4});return i.data}catch(t){return console.log(t),[]}}},tracker:Pe["a"],trackInfo:{projectName:"gd_fc_web",loadType:"single",get editType(){return Object(Ee["b"])()},get editorVersion(){return Be&&Be.mattingRecord.version}},filterRenderer:null,resizeFileImage:Se["a"],maxImageWidth:Oe["a"].MATTING_EDITOR_MAX_SIZE,maxImageHeight:Oe["a"].MATTING_EDITOR_MAX_SIZE,watermark:!1,downloadWithWatermark:!1,scene:"fococlipping",apiOptions:{baseURL:"https://www.gaoding.com",withCredentials:!0,interceptors:Re["a"]},compressBeforeUpload:!0,locale:De["a"].i18nLocale});Be=Le[1];e["a"]={editor:Be,mattingEditor:Le[0],tracker:o["c"],trackerUtils:Ne}},647:function(t,e,i){"use strict";i(546)},648:function(t,e,i){e=t.exports=i(2)(!1),e.push([t.i,".ui-progress{position:relative}.ui-progress .ui-progress-bar{height:4px;width:100%;position:relative}.ui-progress .ui-progress-bar-flag{height:100%;width:1%;position:absolute;left:0;top:0;-webkit-transition:width .2s ease;-o-transition:width ease .2s;transition:width .2s ease}.ui-progress .ui-progress-info{display:none}",""])},649:function(t,e,i){"use strict";i(547)},650:function(t,e,i){e=t.exports=i(2)(!1),e.push([t.i,".clip-loading-dialog .title{font-weight:400;text-align:center;line-height:21px;margin-bottom:34px}",""])},651:function(t,e,i){"use strict";i(548)},652:function(t,e,i){e=t.exports=i(2)(!1),e.push([t.i,".lego-sidebar.crop .lg-tabs .tab-label{line-height:14px;padding:24px 2px 0}.lego-sidebar.crop .lg-tabs .tabs-header{-webkit-justify-content:space-around;-ms-flex-pack:distribute;justify-content:space-around;width:125px;height:58px;margin:0 auto}.crop__tab-container{padding:0 25px}.crop__section{padding-top:19px}.crop__title{font-size:13px;font-weight:700;color:#434951;line-height:16px;margin-bottom:10px}.confirm-area{margin-top:30px}.confirm-area .crop-btn{width:100%;height:40px}.crop__types{width:210px;height:184px;border:1px solid #d2d8de;border-radius:4px;overflow:auto}.crop__types li{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;height:40px;line-height:40px;padding:0 24px 0 19px;font-size:13px;color:#434951;cursor:pointer}.crop__types li:hover{color:#000;background-color:#f6f8f9}.crop__inputs{-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;color:#939ba6}.crop__inputs,.crop__inputs label{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.crop__inputs label{-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;width:86px;height:38px;font-size:13px;border:1px solid #d2d8de;border-radius:4px}.crop__inputs label:focus-within{border-color:#2254f4}.crop__inputs input{width:40px;border:none;outline:none;text-align:center}.crop__inputs .lg-icon{width:18px;height:18px;pointer-events:auto;cursor:pointer}li.crop__type--active,li.crop__type--active:hover{color:#2254f4}.crop__range{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.crop__range>span{font-size:13px;width:38px;text-align:right;line-height:16px;color:#bec3c9}.crop__flip{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding-top:18px}.crop__flip div{margin-right:10px;width:50px;height:29px;padding-top:3px;border:1px solid #dfe5eb;border-radius:4px;cursor:pointer}.crop__flip .lg-icon{display:block;width:20px;height:20px;margin:0 auto}.crop__flip div:nth-child(2) .lg-icon{-webkit-transform:rotateY(180deg);transform:rotateY(180deg)}",""])},653:function(t,e,i){"use strict";i(549)},654:function(t,e,i){e=t.exports=i(2)(!1);var o=i(117),r=o(i(655));e.push([t.i,".lego-editor-container{width:100%;height:100%;background:#e3e7e9;background-image:-webkit-linear-gradient(45deg,#f6fafc 25%,transparent 0),-webkit-linear-gradient(45deg,transparent 75%,#f6fafc 0),-webkit-linear-gradient(45deg,#f6fafc 25%,transparent 0),-webkit-linear-gradient(45deg,transparent 75%,#f6fafc 0);background-image:-o-linear-gradient(45deg,#f6fafc 25%,transparent 0),-o-linear-gradient(45deg,transparent 75%,#f6fafc 0),-o-linear-gradient(45deg,#f6fafc 25%,transparent 0),-o-linear-gradient(45deg,transparent 75%,#f6fafc 0);background-image:linear-gradient(45deg,#f6fafc 25%,transparent 0),linear-gradient(45deg,transparent 75%,#f6fafc 0),linear-gradient(45deg,#f6fafc 25%,transparent 0),linear-gradient(45deg,transparent 75%,#f6fafc 0);background-position:0 0,10px 10px,10px 10px,20px 20px;background-size:20px 20px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;z-index:1}.lego-editor-container .clip-colorpicker{position:fixed;z-index:1}.px-10{width:10px;height:10px}.lego-container{height:100%;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;position:relative}.lego-container .zoom-pan-panel{z-index:1;background:rgba(0,0,0,.6);border-radius:21px;height:42px;position:absolute;bottom:10px;left:calc(50% - 72px);padding:12px 14px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-sizing:border-box;box-sizing:border-box}.lego-container .zoom-pan-panel .pan-icon{margin-right:12px}.lego-container .zoom-pan-panel .lg-icon{cursor:pointer}.lego-container .zoom-pan-panel .compare-icon{margin-left:10px}.lego-container .zoom-pan-panel .zoom-level{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:#fff;display:inline-block;width:48px;text-align:center;line-height:18px;font-size:14px;height:18px;cursor:pointer}.lego-container .zoom-pan-panel .zoom-level .lg-icon{display:none}.lego-container .zoom-pan-panel .zoom-level:hover .hover{display:inline-block}.lego-container .zoom-pan-panel .zoom-level:hover .text{display:none}.lego-sidebars{width:264px;height:100%;background:#fff;border-left:1px solid #dfe5eb;overflow-y:auto;overflow-y:overlay}.lego-sidebars .background .color-panel{padding:0 25px}.lego-sidebars .background .title{padding:20px 25px}.lego-sidebars .background .title>.text{font-size:14px;line-height:16px;font-weight:700}.lego-sidebars .background .material-list{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;padding:0 25px}.lego-sidebars .background .material-list .background-material{-webkit-box-sizing:border-box;box-sizing:border-box;width:68px;height:68px;display:block;border-radius:2px;margin-bottom:4px;border:1px solid transparent;background-position:-1px -1px;background-size:68px 68px}.lego-sidebars .background .material-list .background-material.active,.lego-sidebars .background .material-list .background-material:hover{border-color:#2254f4}.lego-sidebars .background .material-list .background-material.custom{text-align:center;border:1px solid #d2d8de;color:#606770;font-size:12px}.lego-sidebars .background .material-list .background-material.custom .icon{width:18px;height:18px;display:block;background-image:url("+r+');background-size:18px 18px;background-position:50%;margin:9px auto}.lego-sidebars .background .material-list .blue-color.active,.lego-sidebars .background .material-list .blue-color:hover{border-color:#2254f4}.lego-sidebars .background .material-list .black-color.active,.lego-sidebars .background .material-list .black-color:hover{border-color:#000}.lego-sidebars .lego-sidebar.shadow{padding:0 25px}.lego-sidebars .lego-sidebar.shadow .shadow-type{padding:20px 0;border-bottom:1px solid #dfe5eb}.lego-sidebars .lego-sidebar.shadow .shadow-type.active>.title{margin-bottom:30px}.lego-sidebars .lego-sidebar.shadow .panel-item+.panel-item{margin-top:24px}.lego-sidebars .lego-sidebar.shadow .panel-item:last-child{margin-bottom:24px}.lego-sidebars .lego-sidebar.shadow .panel-item.horizontal{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.lego-sidebars .lego-sidebar.shadow .panel-item.horizontal .panel-label{margin:0 16px 0 0}.lego-sidebars .lego-sidebar.shadow .panel-item.horizontal .panel-control{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}.lego-sidebars .lego-sidebar.shadow .angle-input-field{padding:6px 7px;width:53px;height:30px;-webkit-box-sizing:border-box;box-sizing:border-box;border:1px solid #d8dce1;position:relative;border-radius:2px;font-size:13px}.lego-sidebars .lego-sidebar.shadow .angle-input-field.active{border-color:#2254f4}.lego-sidebars .lego-sidebar.shadow .angle-input-field:after{content:"°";display:inline;display:block;position:absolute;top:2px;right:7px}.lego-sidebars .lego-sidebar.shadow .angle-input{border:0;height:16px;width:34px;outline:0;text-align:right;display:block;padding-right:4px;-webkit-box-sizing:border-box;box-sizing:border-box}.lego-sidebars .lego-sidebar.shadow .panel-label{font-weight:400;margin-bottom:16px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px}.lego-sidebars .lego-sidebar.shadow .panel-label.value-display{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.lego-sidebars .lego-sidebar.shadow .panel-label.value-display .value{color:#bec3c9}.lego-sidebars .lego-sidebar.shadow .panel-control{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;font-size:14px}.lego-sidebars .lego-sidebar.shadow .outline-panel .color-list{padding:0}.lego-sidebars .gap-line{height:1px;background-color:#dfe5eb;margin-bottom:24px}.lego-sidebars .lego-sidebar.filter .title{padding:20px 0;font-weight:700;font-size:14px}.lego-sidebars .lego-sidebar.filter .filter-options{display:grid;grid-template-columns:repeat(3,33%);grid-template-rows:auto;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.lego-sidebars .lego-sidebar.filter .filter-options .panel{grid-column-start:1;grid-column-end:4}.lego-sidebars .lego-sidebar.filter .filter-options .panel-control>span{-webkit-box-flex:0;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;width:34px}.lego-sidebars .lego-sidebar.filter .filter-options__item{-webkit-box-flex:0;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;margin-bottom:12px;font-size:12px;color:#434951;text-align:center;line-height:16px;cursor:pointer}.lego-sidebars .lego-sidebar.filter .filter-options__item__img{width:68px;height:68px;margin-bottom:6px;border-radius:2px;overflow:hidden;border:1px solid transparent}.lego-sidebars .lego-sidebar.filter .filter-options__item__img img{display:block;width:100%;height:100%;background-color:#f6f8f9}.lego-sidebars .lego-sidebar.filter .filter-options__item__origin{background-repeat:no-repeat;background-position:50%;background-color:#f6f8f9;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.lego-sidebars .lego-sidebar.filter .filter-options__item__origin .lg-icon{width:22px;height:18px}.lego-sidebars .lego-sidebar.filter .filter-options__item__origin .plain{display:inline-block}.lego-sidebars .lego-sidebar.filter .filter-options__item__origin .active{display:none}.lego-sidebars .lego-sidebar.filter .filter-options__item--active,.lego-sidebars .lego-sidebar.filter .filter-options__item:hover{color:#2254f4}.lego-sidebars .lego-sidebar.filter .filter-options__item--active .filter-options__item__img,.lego-sidebars .lego-sidebar.filter .filter-options__item:hover .filter-options__item__img{border:1px solid #2254f4}.lego-sidebars .lego-sidebar.filter .filter-options__item--active .filter-options__item__origin .plain,.lego-sidebars .lego-sidebar.filter .filter-options__item:hover .filter-options__item__origin .plain{display:none}.lego-sidebars .lego-sidebar.filter .filter-options__item--active .filter-options__item__origin .active,.lego-sidebars .lego-sidebar.filter .filter-options__item:hover .filter-options__item__origin .active{display:inline-block}.lego-modal{position:fixed;left:0;top:0;width:100vw;height:100vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.lego-modal div{width:100px;text-align:center;color:#fff}',""])},655:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAiIGhlaWdodD0iMTAiIGZpbGw9IiM1RTY3NzEiIHN0cm9rZT0iIzVFNjc3MSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNNC41IDQuNVYxaDF2My41SDl2MUg1LjVWOWgtMVY1LjVIMXYtMWgzLjV6IiBzdHJva2Utd2lkdGg9Ii40IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4="},656:function(t,e,i){"use strict";i(550)},657:function(t,e,i){e=t.exports=i(2)(!1),e.push([t.i,".clip-hf-enter-active,.clip-hf-leave-active{-webkit-transition:all .3s ease-in-out;-o-transition:all .3s ease-in-out;transition:all .3s ease-in-out}.clip-hf-enter{-webkit-transform:translate3d(10%,0,0);transform:translate3d(10%,0,0);opacity:0}.clip-hf-enter-to,.clip-hf-leave{-webkit-transform:translateZ(0);transform:translateZ(0);opacity:1}.clip-hf-leave-to{-webkit-transform:translate3d(-50%,0,0);transform:translate3d(-50%,0,0);opacity:0}.clip-vs-enter-active,.clip-vs-leave-active{-webkit-transition:all .3s ease-out;-o-transition:all .3s ease-out;transition:all .3s ease-out}.clip-vs-enter{-webkit-transform:translate3d(0,-120%,0);transform:translate3d(0,-120%,0)}.clip-vs-enter-to,.clip-vs-leave{-webkit-transform:translateZ(0);transform:translateZ(0)}.clip-vs-leave-to{-webkit-transform:translate3d(0,-120%,0);transform:translate3d(0,-120%,0)}.clip-brs-enter-active,.clip-brs-leave-active{-webkit-transition:all .3s cubic-bezier(.04,.82,.77,1);-o-transition:all .3s cubic-bezier(.04,.82,.77,1);transition:all .3s cubic-bezier(.04,.82,.77,1)}.clip-brs-enter,.clip-brs-leave-to{-webkit-transform:scale3d(.1,.1,1);transform:scale3d(.1,.1,1);opacity:0}.clip-opacityfade-enter-active,.clip-opacityfade-leave-active{-webkit-transition:opacity .3s ease-in;-o-transition:opacity .3s ease-in;transition:opacity .3s ease-in}.clip-opacityfade-enter,.clip-opacityfade-leave-to{opacity:0}",""])},658:function(t,e,i){"use strict";i(551)},659:function(t,e,i){e=t.exports=i(2)(!1),e.push([t.i,".clip-fade-enter-active,.clip-fade-leave-active{-webkit-transition:all .3s ease-in-out;-o-transition:all .3s ease-in-out;transition:all .3s ease-in-out}.clip-fade-leave{opacity:1}.clip-fade-leave-to{opacity:0}",""])},660:function(t,e,i){"use strict";i(553)},661:function(t,e,i){e=t.exports=i(2)(!1),e.push([t.i,".clip-guide{position:absolute;width:100%;height:100%;pointer-events:none;top:0;left:0;z-index:1}.clip-guide h2{margin:0}.clip-guide .guide-background{background-color:rgba(0,0,0,.6);position:absolute;width:100%;height:100%;left:0;top:0}.clip-guide .clip-mini-guide{width:400px;height:327px;padding:14px 15px 16px;-webkit-box-sizing:border-box;box-sizing:border-box;border:1px solid #dfe5eb;border-radius:4px;position:absolute;bottom:10px;pointer-events:auto;-webkit-transform-origin:bottom right;-ms-transform-origin:bottom right;transform-origin:bottom right;-webkit-transition:width .3s cubic-bezier(.04,.82,.77,1),height .3s cubic-bezier(.04,.82,.77,1),right .3s cubic-bezier(.04,.82,.77,1),bottom .3s cubic-bezier(.04,.82,.77,1),opacity .3s cubic-bezier(.04,.82,.77,1),-webkit-transform .3s cubic-bezier(.04,.82,.77,1);transition:width .3s cubic-bezier(.04,.82,.77,1),height .3s cubic-bezier(.04,.82,.77,1),right .3s cubic-bezier(.04,.82,.77,1),bottom .3s cubic-bezier(.04,.82,.77,1),opacity .3s cubic-bezier(.04,.82,.77,1),-webkit-transform .3s cubic-bezier(.04,.82,.77,1);-o-transition:width .3s cubic-bezier(.04,.82,.77,1),height .3s cubic-bezier(.04,.82,.77,1),right .3s cubic-bezier(.04,.82,.77,1),bottom .3s cubic-bezier(.04,.82,.77,1),transform .3s cubic-bezier(.04,.82,.77,1),opacity .3s cubic-bezier(.04,.82,.77,1);transition:width .3s cubic-bezier(.04,.82,.77,1),height .3s cubic-bezier(.04,.82,.77,1),right .3s cubic-bezier(.04,.82,.77,1),bottom .3s cubic-bezier(.04,.82,.77,1),transform .3s cubic-bezier(.04,.82,.77,1),opacity .3s cubic-bezier(.04,.82,.77,1);transition:width .3s cubic-bezier(.04,.82,.77,1),height .3s cubic-bezier(.04,.82,.77,1),right .3s cubic-bezier(.04,.82,.77,1),bottom .3s cubic-bezier(.04,.82,.77,1),transform .3s cubic-bezier(.04,.82,.77,1),opacity .3s cubic-bezier(.04,.82,.77,1),-webkit-transform .3s cubic-bezier(.04,.82,.77,1)}.clip-guide .clip-mini-guide.expand{width:652px;height:80%;right:50%!important;bottom:50%;-webkit-transform:translate(50%,50%);-ms-transform:translate(50%,50%);transform:translate(50%,50%);padding:20px 26px}.clip-guide .clip-mini-guide .expand-content{height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}.clip-guide .clip-mini-guide .expand-content .close{position:absolute;top:20px;right:20px;width:26px;height:26px}.clip-guide .clip-mini-guide .expand-content .title{font-size:18px;font-weight:bolder;margin-bottom:6px}.clip-guide .clip-mini-guide .expand-content .link{display:block;margin-bottom:20px;font-size:12px}.clip-guide .clip-mini-guide .expand-content .content{width:598px;height:483px;overflow:scroll;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}.clip-guide .clip-mini-guide .guide-title-wrap{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-content:center;-ms-flex-line-pack:center;align-content:center;margin-bottom:15px;line-height:1.5}.clip-guide .clip-mini-guide .guide-title-wrap .title{font-size:14px}.clip-guide .clip-mini-guide .guide-title-wrap .customer-service-btn{color:#2254f4;white-space:nowrap;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;padding:0;height:auto;font-size:13px;-webkit-transition:-webkit-transform .3s ease-out;transition:-webkit-transform .3s ease-out;-o-transition:transform .3s ease-out;transition:transform .3s ease-out;transition:transform .3s ease-out,-webkit-transform .3s ease-out}.clip-guide .clip-mini-guide .guide-title-wrap .customer-service-btn .icon{width:24px}.clip-guide .clip-mini-guide .guide-video-wrap{width:372px;height:209px;margin-bottom:15px;position:relative}.clip-guide .clip-mini-guide .help-expand.lg-btn{position:absolute;padding:0;bottom:10px;right:10px;background-color:rgba(0,0,0,.6);width:30px;height:30px;border-radius:4px}.clip-guide .clip-mini-guide .help-expand.lg-btn .icon{display:inline-block;width:15px;height:15px;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='15' height='15' xmlns='http://www.w3.org/2000/svg' stroke='%23fff' fill='%23fff'%3E%3Cg stroke='none' fill='none' fill-rule='evenodd'%3E%3Crect stroke='%23FFF' stroke-width='1.4' x='9.7' y='9.7' width='4.6' height='4.6' rx='2'/%3E%3Cpath d='M12 0a2 2 0 012 2v6h-1.4V2a.6.6 0 00-.6-.6H2a.6.6 0 00-.6.6v10a.6.6 0 00.6.6h6V14H2a2 2 0 01-2-2V2a2 2 0 012-2h10z' fill='%23FFF' fill-rule='nonzero'/%3E%3Cpath d='M7 3L5.707 4.293 8.95 7.536 7.536 8.95 4.293 5.707 3 7V3h4z' fill='%23FFF'/%3E%3C/g%3E%3C/svg%3E\");background-position:50%;background-repeat:no-repeat}.clip-guide .clip-mini-guide .guide-controls{position:relative;height:36px}.clip-guide .clip-mini-guide .guide-controls .close{display:block;width:100px;height:36px;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;margin:0 auto}.clip-guide .clip-mini-guide .guide-controls .skip{position:absolute;right:0;top:0;display:block;padding:0;font-size:13px}.clip-guide .clip-mini-guide .guide-video{width:100%;height:100%}.clip-guide .clip-mini-guide .px-18{width:18px;height:18px}",""])},662:function(t,e,i){"use strict";i(554)},663:function(t,e,i){e=t.exports=i(2)(!1);var o=i(117),r=o(i(664)),a=o(i(665));e.push([t.i,".clip-focus{position:absolute;top:47px;left:16px}.clip-focus .bg{width:100vw;height:100vh;top:0;left:0;position:fixed}.clip-focus .bg svg{width:100%;height:100%}.clip-focus .circle{background-color:transparent;-webkit-box-shadow:0 0 0 12px #2254f4;box-shadow:0 0 0 12px #2254f4;width:54px;height:54px;border-radius:27px;-webkit-animation:breath 1.3s ease-in-out .5s infinite alternate;animation:breath 1.3s ease-in-out .5s infinite alternate;cursor:pointer;position:relative}.clip-focus .content{border-radius:4px;background:#2254f4;-webkit-box-shadow:0 3px 10px 0 rgba(34,84,244,.45);box-shadow:0 3px 10px 0 rgba(34,84,244,.45);position:absolute;bottom:0;color:#fff;-webkit-transform:translateY(134%);-ms-transform:translateY(134%);transform:translateY(134%);padding:16px 20px;line-height:28px;vertical-align:middle;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px;white-space:nowrap}.clip-focus .content .icon{display:inline-block;position:relative;top:3px;height:16px;width:16px;background-size:contain}.clip-focus .content .icon.keep{background-image:url("+r+")}.clip-focus .content .icon.drop{background-image:url("+a+")}@-webkit-keyframes breath{0%{-webkit-box-shadow:0 0 0 12px #2254f4;box-shadow:0 0 0 12px #2254f4}to{-webkit-box-shadow:0 0 0 2px #2254f4;box-shadow:0 0 0 2px #2254f4}}@keyframes breath{0%{-webkit-box-shadow:0 0 0 12px #2254f4;box-shadow:0 0 0 12px #2254f4}to{-webkit-box-shadow:0 0 0 2px #2254f4;box-shadow:0 0 0 2px #2254f4}}",""])},664:function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU3ICg4MzA3NykgLSBodHRwczovL3NrZXRjaC5jb20gLS0+CiAgICA8dGl0bGU+R3JvdXAgMTE8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0i5oqg5Zu+55WM6Z2iLWNvcHktNTAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMDYuMDAwMDAwLCAtMTU1LjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0iR3JvdXAtMTEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwNy4wMDAwMDAsIDE1Ni4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUiIHg9IjAiIHk9IjAiIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCI+PC9yZWN0PgogICAgICAgICAgICAgICAgPGNpcmNsZSBpZD0iT3ZhbC1Db3B5LTMiIHN0cm9rZT0iI0ZGRkZGRiIgZmlsbD0iIzAwNTFGRSIgY3g9IjkiIGN5PSI5IiByPSI5LjUiPjwvY2lyY2xlPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLDQgTDEwLDggTDE0LDggTDE0LDEwIEwxMCwxMCBMMTAsMTQgTDgsMTQgTDgsMTAgTDQsMTAgTDQsOCBMOCw4IEw4LDQgTDEwLDQgWiIgaWQ9IkNvbWJpbmVkLVNoYXBlIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},665:function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU3ICg4MzA3NykgLSBodHRwczovL3NrZXRjaC5jb20gLS0+CiAgICA8dGl0bGU+R3JvdXAgMTE8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0i5oqg5Zu+55WM6Z2iLWNvcHktNTAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMDYuMDAwMDAwLCAtMTg0LjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0iR3JvdXAtMTEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwNy4wMDAwMDAsIDE4NS4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUiIHg9IjAiIHk9IjAiIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCI+PC9yZWN0PgogICAgICAgICAgICAgICAgPGNpcmNsZSBpZD0iT3ZhbC1Db3B5LTMiIHN0cm9rZT0iI0ZGRkZGRiIgZmlsbD0iI0Y2M0MzMiIgY3g9IjkiIGN5PSI5IiByPSI5LjUiPjwvY2lyY2xlPgogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IkNvbWJpbmVkLVNoYXBlIiBmaWxsPSIjRkZGRkZGIiB4PSI0IiB5PSI4IiB3aWR0aD0iMTAiIGhlaWdodD0iMiI+PC9yZWN0PgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="},666:function(t,e,i){"use strict";i(555)},667:function(t,e,i){e=t.exports=i(2)(!1),e.push([t.i,".editor-helpbtn-wrap{position:absolute;height:63px;width:72px;bottom:10px}.editor-helpbtn-wrap .custom-service{position:absolute;top:-1px;padding:0;left:3px}.editor-helpbtn-wrap .custom-service>.icon{width:40px}.editor-helpbtn-wrap .lg-btn.editor-help{border-radius:4px;font-size:13px;font-weight:bolder;height:42px;width:72px;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;padding:13px 14px 13px 10px;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-transition:right .3s ease-in-out;-o-transition:right ease-in-out .3s;transition:right .3s ease-in-out;position:absolute;bottom:0;left:0}.cs-popper-title{font-size:14px;font-weight:bolder}.cs-popper-desc{font-size:12px}",""])},668:function(t,e,i){"use strict";i(556)},669:function(t,e,i){e=t.exports=i(2)(!1),e.push([t.i,".matting-tools svg{width:18px;height:18px}",""])},670:function(t,e,i){"use strict";i(557)},671:function(t,e,i){e=t.exports=i(2)(!1);var o=i(117),r=o(i(672)),a=o(i(673)),n=o(i(674)),s=o(i(675)),l=o(i(676)),c=o(i(677));e.push([t.i,".editor-root{height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:relative}.editor-root .px-16{width:16px;height:16px}.editor-root .px-18{width:18px;height:18px}.editor-root .px-10{width:10px;height:10px}.editor-root .px-11{width:11px;height:11px}.editor-root .editor-header{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-sizing:border-box;box-sizing:border-box;height:49px;padding:7px 10px 7px 20px;border-bottom:1px solid #dfe5eb;background-color:#fff}.editor-root .editor-header .gap{height:18px;width:1px;background-color:#606770;margin-right:15.5px}.editor-root .editor-header .title{font-size:18px;color:#606770}.editor-root .editor-header .title .lg-tabs .tabs-header{-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.editor-root .editor-header .title .tab-label{margin-right:32px;font-size:18px;line-height:45px;font-weight:400}.editor-root .editor-header .title .tab-label.active{font-weight:bolder}.editor-root .editor-header .title .indicator-line{border-bottom:0}.editor-root .editor-header .home-icon{pointer-events:auto;width:22px;height:22px;position:relative;top:2px;color:#606770}.editor-root .editor-header .home-icon:hover{color:#000}.editor-root .editor-header .home-link{margin-right:20.5px}.editor-root .header-section{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.editor-root .snapshot-section{position:absolute;top:7px;left:50%;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%)}.editor-root .snapshot-section .lg-btn{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;margin:0 15px;padding:0;font-size:13px;color:#606770;border:none}.editor-root .snapshot-section .lg-btn .lg-icon{margin-right:6px}.editor-root .snapshot-section .lg-btn:hover{background-color:#fff;color:#000}.editor-root .snapshot-section .lg-btn:disabled{color:#bec3c9;cursor:not-allowed}.editor-root .snapshot-section .lg-btn .lg-startover{stroke:currentColor}.editor-root .image-section .lg-btn{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;width:108px;padding:0}.editor-root .image-section .lg-btn .lg-icon{margin-right:6px}.editor-root .image-section .lg-btn:first-child{margin-right:10px}.editor-root .editor-function-panel{height:75px;border-bottom:1px solid #dfe5eb;position:relative;background-color:#fff}.editor-root .editor-function-panel .lg-select-btn{height:100%;width:88px}.editor-root .editor-function-panel .gap{height:24px;width:1px;background-color:#dfe5eb;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center}.editor-root .editor-function-panel .editor-function-group{height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:stretch;-webkit-align-items:stretch;-ms-flex-align:stretch;align-items:stretch}.editor-root .editor-function-panel .editor-function-group.basic-matting{left:0;top:0;position:absolute}.editor-root .editor-function-panel .editor-function-group.lego{padding:18px 24px}.editor-root .editor-function-panel .editor-function-group.result-function{right:0;top:0;position:absolute}.editor-root .editor-function-panel .editor-function-group .text{display:block;font-size:13px;margin-top:8px}.editor-root .editor-function-panel .editor-function-group .lg-select-btn.active>.plain,.editor-root .editor-function-panel .editor-function-group .lg-select-btn:hover>.plain,.editor-root .editor-function-panel .editor-function-group .lg-select-btn>.hover{display:none}.editor-root .editor-function-panel .editor-function-group .lg-select-btn.active>.hover,.editor-root .editor-function-panel .editor-function-group .lg-select-btn:hover>.hover{display:inline-block}.editor-root .editor-main{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;overflow:hidden;position:relative}.editor-root .matting-editor-container{height:100%;width:100%;left:0;top:0;position:absolute}.editor-root .matting-container{height:100%;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:stretch;-webkit-align-items:stretch;-ms-flex-align:stretch;align-items:stretch;position:relative}.editor-root .matting-container>.result,.editor-root .matting-container>.source{position:relative;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;background:#e3e7e9;background-image:-webkit-linear-gradient(45deg,#f6fafc 25%,transparent 0),-webkit-linear-gradient(45deg,transparent 75%,#f6fafc 0),-webkit-linear-gradient(45deg,#f6fafc 25%,transparent 0),-webkit-linear-gradient(45deg,transparent 75%,#f6fafc 0);background-image:-o-linear-gradient(45deg,#f6fafc 25%,transparent 0),-o-linear-gradient(45deg,transparent 75%,#f6fafc 0),-o-linear-gradient(45deg,#f6fafc 25%,transparent 0),-o-linear-gradient(45deg,transparent 75%,#f6fafc 0);background-image:linear-gradient(45deg,#f6fafc 25%,transparent 0),linear-gradient(45deg,transparent 75%,#f6fafc 0),linear-gradient(45deg,#f6fafc 25%,transparent 0),linear-gradient(45deg,transparent 75%,#f6fafc 0);background-position:0 0,10px 10px,10px 10px,20px 20px;background-size:20px 20px;overflow:hidden}.editor-root .matting-container .brush-size{position:absolute;z-index:1;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);-webkit-transition:all .3s ease-in-out;-o-transition:all .3s ease-in-out;transition:all .3s ease-in-out}.editor-root .matting-container .brush-size.keep,.editor-root .matting-container .brush-size.repair-brush{background-color:#2654f4}.editor-root .matting-container .brush-size.drop{background-color:#f43c32}.editor-root .matting-container .brush-size.eraser{background-color:#fff}.editor-root .matting-container>.gap{background-color:#5f6770;width:3px}.editor-root .matting-container>.zoom-pan-panel{-webkit-box-sizing:border-box;box-sizing:border-box;background:rgba(0,0,0,.6);border-radius:21px;width:146px;height:42px;position:absolute;bottom:10px;left:calc(50% - 72px);padding:12px 14px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.editor-root .matting-container>.zoom-pan-panel .pan-icon{margin-right:12px}.editor-root .matting-container>.zoom-pan-panel .lg-icon{cursor:pointer}.editor-root .matting-container>.zoom-pan-panel .zoom-level{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:#fff;display:inline-block;width:48px;text-align:center;line-height:18px;font-size:14px;height:18px;cursor:pointer}.editor-root .matting-container>.zoom-pan-panel .zoom-level .lg-icon{display:none}.editor-root .matting-container>.zoom-pan-panel .zoom-level:hover .hover{display:inline-block}.editor-root .matting-container>.zoom-pan-panel .zoom-level:hover .text{display:none}.editor-root .matting-container>.control-panel{padding:9px;top:10px;left:10px;position:absolute}.editor-root .matting-container>.control-panel .title{font-size:13px;font-weight:bolder;color:#434951;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.editor-root .matting-container>.control-panel.vertical .title{margin-bottom:10px}.editor-root .matting-container>.control-panel .controls,.editor-root .matting-container>.control-panel .icon-highlight-btn{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.editor-root .matting-container>.control-panel .icon-highlight-btn{height:32px;padding:6px;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.editor-root .matting-container>.control-panel .icon-highlight-btn svg{width:18px;height:18px}.editor-root .matting-container>.control-panel .icon-highlight-btn>.lg-icon.active{display:none}.editor-root .matting-container>.control-panel .icon-highlight-btn>.text{font-size:13px;margin-left:10px}.editor-root .matting-container>.control-panel .icon-highlight-btn.active>.active,.editor-root .matting-container>.control-panel .icon-highlight-btn:hover>.active{display:inline-block}.editor-root .matting-container>.control-panel .icon-highlight-btn.active>.plain,.editor-root .matting-container>.control-panel .icon-highlight-btn:hover>.plain{display:none}.editor-root .matting-container>.recognition-control .icon-highlight-btn+.icon-highlight-btn{margin-left:6px}.editor-root .matting-container>.recognition-control .title{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.editor-root .matting-container>.recognition-control .clip__use-auto-clip{font-weight:400}.editor-root .matting-container>.recognition-control .clip__use-auto-clip span.gd-checkout__input-box,.editor-root .matting-container>.recognition-control .clip__use-auto-clip svg{width:12px;height:12px}.editor-root .matting-container>.recognition-control .clip__use-auto-clip span.gd-checkout__input-box{margin-right:6px}.editor-root .matting-container>.recognition-control .gd-checkout{margin-bottom:0}.editor-root .matting-container>.brush-size-control,.editor-root .matting-container>.feather-size-control{width:160px;height:78px}.editor-root .matting-container>.brush-size-control>.title,.editor-root .matting-container>.feather-size-control>.title{margin-bottom:19px}.editor-root .matting-container>.brush-size-control>.control,.editor-root .matting-container>.feather-size-control>.control{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.editor-root .matting-container>.auto-clip-brush-control{width:160px;height:auto}.editor-root .matting-container>.auto-clip-brush-control .feather-range{margin-top:25px}.editor-root .matting-container>.hair-control{width:364px;height:78px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.editor-root .matting-container>.hair-control .palettes{padding:0;height:32px;width:47px;border-radius:2px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;overflow:hidden;margin-left:6px}.editor-root .matting-container>.hair-control .palettes>.color{background-color:#fff;width:15px;height:15px}.editor-root .matting-container>.hair-control .palettes>.color>.lg-icon{display:none;margin:2px auto}.editor-root .matting-container>.hair-control .palettes>.color.filled{cursor:pointer}.editor-root .matting-container>.hair-control .palettes>.color.filled:hover>.lg-icon{display:block}.editor-root .matting-container>.hair-control .palettes>.color.even{background-color:#f6f8f9}.editor-root .matting-container>.hair-control .control-section{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.editor-root .matting-container>.hair-control .lg-select-btn.hair-brush-btn{padding:7px 14px 7px 7px;margin-right:6px}.editor-root .matting-container>.hair-control .lg-select-btn.hair-brush-btn>.lg-icon{position:relative;bottom:2px}.editor-root .lego-editor-container{position:absolute;top:0;left:0}.editor-root .lg-container{-webkit-box-sizing:border-box;box-sizing:border-box}.editor-root .matting-loading{z-index:1;color:#fff;width:150px;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.editor-root .gd-editor-help{bottom:10px;left:auto}.editor-root canvas.keep-brush{cursor:url("+r+") 8 8,auto}.editor-root canvas.drop-brush{cursor:url("+a+") 8 8,auto}.editor-root canvas.eraser-brush{cursor:url("+n+") 8 8,auto}.editor-root canvas.hair-brush{cursor:url("+r+") 8 8,auto}.editor-root canvas.pan-cursor{cursor:url("+s+") 8 8,auto}.editor-root canvas.pen-cursor{cursor:url("+l+") 0 -20,auto}.editor-root canvas.drop-eyedropper,.editor-root canvas.keep-eyedropper{cursor:url("+c+") 2 16,auto}.editor-root .clip-header-label{padding:2px 6px;background:#eff1f4;border-radius:4px;font-size:13px;color:#5e6771;cursor:pointer}.editor-root .matting-tools .lg-recognition{width:22px;height:22px}",""])},672:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsSAAALEgHS3X78AAAAK0lEQVQ4y2NgGN7gPxTgU8NEqSUDbwAjup+J0sTICNdHsQvwghESC8MAAACAUhQAy7Jn8QAAAABJRU5ErkJggg=="},673:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsSAAALEgHS3X78AAAAI0lEQVQ4y2NgGAXDADAic/7///+fKE2MjHB9TAPtg1EwKAAA9EEEBIQrf5UAAAAASUVORK5CYII="},674:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAQAAAD8x0bcAAAAAmJLR0QA/4ePzL8AAAEPSURBVCjPtdLPKwQBGMbxx2W3NpQfKbu0bQkhhTgpiYvag5JSQgkX8Vc4OvBXODjIYQ9KWqWctnCy5jBjSaxpmHYjrXwdZsKy68T73N4+Pb2HV/rHIcAaNb+TykJyHTdNpDypfjqKI3q5vSRWmtTmU2MIITrIXNPyk9Q/nAz5RIg2rCydxSTsnA9+IUJESdt0f5KmO6PvGxGikTOXAY9Eshf9xCnF5iAhiahltTNP4eA1uUGwiEzwfEiV6DKyMVZ42yYgMXua7/kgMxR2CEhib5oweZcG/7rW3PEqFYgpXnYJesu6x9Qwo9w4tuknY9DMOPfYV7bpmGxKIpTbX2ayTBZhy2sLscBS2Yz83fO8Azao5MVumHArAAAAAElFTkSuQmCC"},675:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsSAAALEgHS3X78AAACN0lEQVQ4y42Tv29SURTHv/BeyYvSFMkj73Hvoy8wtKGbgwkdjImRoQwujYni4sKku8B/oJuNG0kXBsZuHRoWCWFo4tChFoJBFLBNX/jxsPrApve4+IitxvIdb87ne7/nnHuBKwqHw0/D4fBA1/UvALiqqg85503TNLcBeHCdlpeXP1iWRcVikQzDeMMYO7YsizY3N78BuAfgJoBbbr0XAEzTfMsY6zPG3nk8nlaj0UAqlQKAlM/n86qqivX19RsAHjDG2tFotKVp2uOZgRDiSbfbDabT6TsnJyfG7u7uNBgMYnFxMXh2diYDgN/v98qy/KJQKKjlcjmgKMrLWWzO+VG9XqfJZEKc8/Ha2lqfiCibzTqKokyIiIrFIgEQo9GIiIgMw2jNDGRZvr+xsWETEdVqNZIkSQyHQ6pUKiRJkiAi2tnZoZWVFYd+yzTNzqXhcc7f7+/vExFRLpejarVK5+fndHBw4DLkODOeTNM8vbqA24lEYkRzKhaLnQKA1zCMrK7rp5zz1+12+/Ph4eG1qwaAi4sLCQDAGBtOp1MqlUpC1/Uf3W53rgTxeNxyDeq1Wm3e5H+2YLlpopFIpN/r9eaGbdsmxljbfUifbNtOJ5NJezAYzNX/1tbWTyHE9qXDUCj0aHV11W61Wv+9fW9vjzRN+whA+ctZUZS7mqYd5/P5SafTuQQ2m03KZDLfdV0/AhBymX99T9/S0tKzQCDwXAjBFxYWPI7jkCzLX23bfjUej0sAhFv8Cwvu2vzkLJyqAAAAAElFTkSuQmCC"},676:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAABX0lEQVQ4y53U4ZGCMBCG4XQQOogdxBKug9hB7CB2wHWQ6yB2EDvwxgagg1gBaAXv/UkcweCpzOwAM+QBPpYVQAP0ubb5XHxaAuidc2it8d4zjiPAAdh8DEopsdYihEAIgTGGEALABdgD63fAnXMOKSVlX+ByoxgjwBn4Blb/gauu625AjHGCllJK4Zyj6zru8q6CAvhVSiGEQGvN8XhEa/2AlirX1HIuB1vv/WRBSukpaowh51sFm5TSZIG1lnEcMcYsosMwXOdtdq8f5k9kjKnmWcp7zzzLe3ATQlhcvJRl7tkqKIZhuL4DSinJW1MFgf2zzObY6XQqr90XdA5uYowvYyVza+0NrXX7+dmHmGOlnHMAfQ38CSFUe3AJk1KWP2hbA5vcCn1KCeccSqmXsFqG81oBuzwYaNv2oW1SSpNefGfWfQGXMua01mV2Ljb2K7UGLm3bVrFPwBu6NL7+AB6eupZZwAZuAAAAAElFTkSuQmCC"},677:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAQAAAD8x0bcAAAAAmJLR0QA/4ePzL8AAAEnSURBVCjPfdIrTEIBFMbxT8RgwU2CszADFw1uBl8z6LBo89FoNoqBhkltGtyMBoviqzgCSTYZwVF8RgMFxy66WWTOjXHv5G9ARe4FTz2/fTvbd6Q2Qwfx4uN7jsnW6zgDEpsbeOgjV2XMTbb3MU1GspYQYhBOnWRtDzGEWdmijgxIOFGwYIYQBjGE8JOxGXWizlpyBQ/Cxy6XlO+YdhHrLEKYAsOIAPkSASfpqiWjjPMGnCBEiOIzRlPK5/EPydDLIUF6uKkw85ccRZn4JWmb2NPLdYXZBvFYiQhhPoAUfq5sliUMwg3itc+bSJV5V0fWQROxWHLX4M0i7r9vuXCnSBJTKcQ6O/VzF1t3fjuHEN2kbRba/U3/a36VUqn80JbUGSf4/gH6AlPE6rRrFW+tAAAAAElFTkSuQmCC"},689:function(t,e,i){"use strict";i(563)},690:function(t,e,i){e=t.exports=i(2)(!1),e.push([t.i,'.export-matting-dialog *{-webkit-box-sizing:border-box;box-sizing:border-box}.export-matting-dialog .g-dialog{border-radius:0;color:#606266}.export-matting-dialog .g-dialog.g-dialog--light{padding:44px 50px 36px;width:450px!important}.export-matting-dialog .g-dialog__body,.export-matting-dialog .g-dialog__header{padding:0}.export-matting-dialog .g-dialog__title{font-family:AirbnbCerealMedium;color:#000;font-size:18px;font-weight:400}.export-matting-dialog .g-icon{width:16px;height:16px;color:#707070}.export-matting-dialog .g-dialog__footer{padding:0;margin-top:42px}.export-matting-dialog .g-dialog__footer button{text-align:center;width:136px;height:48px;border-radius:2px;border:none;background-color:#000;font-size:16px;color:#fff;font-weight:400}.export-matting-dialog .export-image-dialog_title{margin:0;font-size:18px;font-weight:400}.export-matting-dialog .export-image-dialog_body{margin-top:28px}.export-matting-dialog .body-labels{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.export-matting-dialog .body-labels_item{font-family:AirbnbCerealMedium;width:170px;height:60px;line-height:60px;font-size:16px;text-align:center;border:1px solid #ddd;cursor:pointer}.export-matting-dialog .body-labels_item.item--active{position:relative;border:1px solid #000!important;color:#000}.export-matting-dialog .body-labels_item.item--active:after{content:"";position:absolute;bottom:0;right:0;width:0;height:0;border:4px solid transparent;border-bottom-color:#000;border-right-color:#000}.export-matting-dialog .export-image-dialog_footer{margin-top:16px}.export-matting-dialog .export-image-dialog_tips{font-size:12px;color:#676767}.export-matting-dialog .body-list-container{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;margin-top:20px;cursor:pointer}.export-matting-dialog .body-list-container .input-label{position:relative;padding:0 20px;height:48px;line-height:48px;border:1px solid #ddd;color:#000;border-radius:2px;font-size:14px}.export-matting-dialog .body-list-container .input-label:after{content:"";position:absolute;right:16px;top:54%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);width:0;height:0;border:4px solid transparent;border-top-color:#333}.export-matting-dialog .body-list-container .input-label .list-label_tips{color:#000}.export-matting-dialog .body-list-container .list-body{position:absolute;top:48px;left:0;width:100%;background-color:#fff;border:1px solid #eff1f6;-webkit-box-shadow:0 10px 14px rgba(53,100,175,.15);box-shadow:0 10px 14px rgba(53,100,175,.15);z-index:2}.export-matting-dialog .body-list-container .list-body .list{margin:8px 5px;max-height:290px;overflow:auto;overflow-x:hidden}.export-matting-dialog .body-list-container .list-body .list .list-label{padding:14px 20px 13px;cursor:pointer}.export-matting-dialog .body-list-container .list-body .list .list-label.label--active,.export-matting-dialog .body-list-container .list-body .list .list-label:hover{background-color:#e4e4e4;color:#fff}.export-matting-dialog .body-list-container .list-body .list .list-label.label--active .list-label_tips,.export-matting-dialog .body-list-container .list-body .list .list-label:hover .list-label_tips{color:#fff}.export-matting-dialog .fade-enter-active,.export-matting-dialog .fade-leave-active{-webkit-transition:all .2s;-o-transition:all .2s;transition:all .2s;overflow:hidden}.export-matting-dialog .fade-enter,.export-matting-dialog .fade-leave-to{height:0;opacity:0;margin:0}',""])},691:function(t,e,i){"use strict";i.d(e,"b",(function(){return r})),i.d(e,"a",(function(){return a}));const o=t=>new Promise(e=>{const i=new Image;i.onload=function(){e(i)},i.src=t});function r(t){const{width:e,height:i,data:o}=t;let r=0,a=0,n=0,s=0;const l=(t,i)=>4*(i*e+t)+3;let c=!1;for(let d=0;d<i;d++){for(let t=0;t<e;t++)if(o[l(t,d)]){r=a=d,n=s=t,c=!0;break}if(c)break}c=!1;for(let d=0;d<n;d++){for(let t=r;t<i;t++)if(o[l(d,t)]){n=d,c=!0;break}if(c)break}c=!1;for(let d=e-1;d>s;d--){for(let t=r;t<i;t++)if(o[l(d,t)]){s=d,c=!0;break}if(c)break}c=!1;for(let d=i-1;d>a;d--){for(let t=n;t<s;t++)if(o[l(t,d)]){a=d,c=!0;break}if(c)break}return a&&a++,s&&s++,{lOffset:n,tOffset:r,rOffset:s,bOffset:a}}const a=async t=>{const e=document.createElement("canvas"),i=e.getContext("2d"),a=await o(t);e.width=a.width,e.height=a.height,i.drawImage(a,0,0);const n=i.getImageData(0,0,e.width,e.height),{lOffset:s,tOffset:l,rOffset:c,bOffset:d}=r(n),g={top:l,left:s,height:d-l,width:c-s},p=document.createElement("canvas");p.width=g.width,p.height=g.height;const u=p.getContext("2d");return u.drawImage(a,-g.left,-g.top),p.toDataURL()}},694:function(t,e,i){t.exports=i.p+"image/guaid-narrow_580cbb3f.svg"},695:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHZpZXdCb3g9IjAgMCAyMiAyMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNC45Njk3IDguODg2NThIMTcuMTExNFY4Ljg4NTEzQzE5LjQzMTMgOC44ODUxMyAyMS4zNTc2IDYuOTU4ODUgMjEuMzkzOSA0LjYwMjU4QzIxLjM5MDUgMy40Njc4NSAyMC45MzgyIDIuMzgwNTcgMjAuMTM1OCAxLjU3ODE4QzE5LjMzMzQgMC43NzU3OTYgMTguMjQ2MSAwLjMyMzQ5NCAxNy4xMTE0IDAuMzIwMDQ1QzE1Ljk3NjIgMC4zMjM0OTggMTQuODg4NCAwLjc3NjE5OSAxNC4wODYgMS41NzkyMUMxMy4yODM1IDIuMzgyMjIgMTIuODMxNSAzLjQ3MDI1IDEyLjgyODkgNC42MDU0OVY2Ljc0MzA3SDguNjE3NVY0LjY0MDM2QzguNjE0MDUgMy41MDU2MiA4LjE2MTc1IDIuNDE4MzQgNy4zNTkzNiAxLjYxNTk1QzYuNTU2OTcgMC44MTM1NjYgNS40Njk3IDAuMzYxMjY0IDQuMzM0OTYgMC4zNTc4MTZDMy4yMDM2NyAwLjM2MzU4NiAyLjExOTI3IDAuODEwNTA2IDEuMzEyNDMgMS42MDM1MUMwLjUwNTU5MyAyLjM5NjUxIDAuMDM5OTg0IDMuNDczMDIgMC4wMTQ2NDg0IDQuNjA0MDRDMC4wMTgxMDA1IDUuNzM5MjggMC40NzA4MDIgNi44MjY5OSAxLjI3MzgxIDcuNjI5NDZDMi4wNzY4MyA4LjQzMTkzIDMuMTY0ODUgOC44ODM5IDQuMzAwMDkgOC44ODY1OEg2LjQzNjU1VjEzLjA5NzlINC4zMzQ5NkMzLjIwMDIyIDEzLjEwMTQgMi4xMTI5NCAxMy41NTM3IDEuMzEwNTUgMTQuMzU2MUMwLjUwODE2OSAxNS4xNTg1IDAuMDU1ODY3IDE2LjI0NTcgMC4wNTI0MTg1IDE3LjM4MDVDMC4wNTU4NjcgMTguNTE1MiAwLjUwODE2OSAxOS42MDI1IDEuMzEwNTUgMjAuNDA0OUMyLjExMjk0IDIxLjIwNzMgMy4yMDAyMiAyMS42NTk2IDQuMzM0OTYgMjEuNjYzQzYuNjU0OTEgMjEuNjYzIDguNTgxMTggMTkuNzM2NyA4LjYxNzUgMTcuMzgwNVYxNS4yNzQ3SDEyLjgyODlWMTcuMzgwNUMxMi44MzIzIDE4LjUxNTIgMTMuMjg0NiAxOS42MDI1IDE0LjA4NyAyMC40MDQ5QzE0Ljg4OTQgMjEuMjA3MyAxNS45NzY3IDIxLjY1OTYgMTcuMTExNCAyMS42NjNDMTkuNDMxMyAyMS42NjMgMjEuMzU3NiAxOS43MzY3IDIxLjM5MzkgMTcuMzgwNUMyMS4zOTA1IDE2LjI0NTUgMjAuOTM4IDE1LjE1OCAyMC4xMzUzIDE0LjM1NTZDMTkuMzMyNiAxMy41NTMxIDE4LjI0NDkgMTMuMTAxIDE3LjEwOTkgMTMuMDk3OUgxNC45Njk3VjguODg2NThaTTE3LjExMTQgNi43NDUzMUgxNC45NzAxVjQuNjA0MDRDMTQuOTcwMSAzLjQyNTkgMTUuOTMzMyAyLjQ2Mjc3IDE3LjExMTQgMi40NjI3N0MxOC4yODgxIDIuNDYyNzcgMTkuMjUyNyAzLjQyNzM2IDE5LjI1MjcgNC42MDQwNEMxOS4yNTI3IDUuNzgyMTcgMTguMjg4MSA2Ljc0NTMxIDE3LjExMTQgNi43NDUzMVpNMi4xOTM2OSA0LjY0MDM2QzIuMTkzNjkgMy40NjIyMiAzLjE1NjgyIDIuNDk5MDkgNC4zMzQ5NiAyLjQ5OTA5VjIuNDk3NjNDNS40NzUzMiAyLjQ5NzYzIDYuNDM5OTEgMy40NjIyMiA2LjQ3NjIzIDQuNjQwMzZWNi43ODE2M0g0LjMzNDk2QzMuMTU2ODIgNi43ODE2MyAyLjE5MzY5IDUuODE3MDQgMi4xOTM2OSA0LjY0MDM2Wk0xNC45NzAxIDE3LjQxNjhWMTUuMjc1NUgxNy4xMTE0QzE4LjI4ODEgMTUuMjc1NSAxOS4yNTI3IDE2LjI0MDEgMTkuMjUyNyAxNy40MTY4QzE5LjI1MjcgMTguNTkzNSAxOC4yODgxIDE5LjU1ODEgMTcuMTExNCAxOS41NTgxQzE1LjkzMzMgMTkuNTU4MSAxNC45NzAxIDE4LjU5MzUgMTQuOTcwMSAxNy40MTY4Wk0yLjE5MzY5IDE3LjQxNjhDMi4xOTM2OSAxNi4yMzg3IDMuMTU2ODIgMTUuMjc1NSA0LjMzNDk2IDE1LjI3NTVINi40NzYyM1YxNy40MTY4QzYuNDc2MjMgMTguNTkzNSA1LjUxMTY0IDE5LjU1ODEgNC4zMzQ5NiAxOS41NTgxQzMuMTU2ODIgMTkuNTU4MSAyLjE5MzY5IDE4LjU5MzUgMi4xOTM2OSAxNy40MTY4Wk0xMi44MjcgMTMuMTMzNUg4LjU4MDczSDguNTc5MjhWOC44ODU4SDEyLjgyN1YxMy4xMzM1WiIgZmlsbD0iYmxhY2siIGZpbGwtb3BhY2l0eT0iMC44Ii8+Cjwvc3ZnPgo="},696:function(t,e,i){var o=i(697);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var r=i(3).default;r("8bbff0aa",o,!0,{sourceMap:!1})},697:function(t,e,i){e=t.exports=i(2)(!1),e.push([t.i,"",""])},711:function(t,e,i){"use strict";i(569)},712:function(t,e,i){e=t.exports=i(2)(!1),e.push([t.i,".guide__page[data-v-352950f7]{position:fixed;left:0;top:0;right:0;bottom:0;z-index:999;background-color:rgba(0,0,0,.8)}.contain[data-v-352950f7]{position:absolute;width:5.2rem;height:3.61333rem}.tips[data-v-352950f7]{color:#fff;font-size:.24rem;line-height:.24rem;font-weight:400;margin-top:.17333rem}.collection__icon[data-v-352950f7]{width:.8304rem;height:.57213rem;background:-webkit-gradient(linear,left bottom,left top,from(hsla(0,0%,100%,.88)),to(hsla(0,0%,100%,.88)));background:-webkit-linear-gradient(bottom,hsla(0,0%,100%,.88),hsla(0,0%,100%,.88));background:-o-linear-gradient(bottom,hsla(0,0%,100%,.88),hsla(0,0%,100%,.88));background:linear-gradient(0deg,hsla(0,0%,100%,.88),hsla(0,0%,100%,.88));border:.02074rem solid #fff;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:.41481rem;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}.like__tip[data-v-352950f7]{font-size:.32rem;line-height:.32rem;margin-top:.29333rem;color:#fff}.keyguaid__area[data-v-352950f7]{margin-top:.58667rem}.plus[data-v-352950f7]{color:#fff;margin:0 .33333rem 0 .33333rem;line-height:.77333rem;font-size:.26667rem}.control[data-v-352950f7],.plus[data-v-352950f7]{float:left;height:.7824rem}.control[data-v-352950f7]{width:.9852rem;background:hsla(0,0%,100%,.88);border:.02898rem solid #fff;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:.08693rem;font-size:.32rem;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;color:rgba(0,0,0,.8)}.narrow[data-v-352950f7]{position:absolute}",""])},732:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Dialog",{staticClass:"export-matting-dialog",attrs:{centered:"",maskClosable:!1,showCloseButton:!0,okText:t.$t("export.download"),onOk:function(){return{type:t.currentType,quality:t.currentQuality.quality}}}},[i("div",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$t("export.title")))]),i("div",{staticClass:"export-image-dialog_body"},[i("div",{staticClass:"body-labels"},t._l(t.imageTypes,(function(e){return i("div",{key:e.value,staticClass:"body-labels_item",class:{"item--active":e.value===t.currentType},on:{click:function(i){return t.changeType(e)}}},[t._v("\n                "+t._s(e.name)+"\n            ")])})),0),i("transition-group",{staticStyle:{display:"block"},attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:"jpeg"===t.currentType,expression:"currentType === 'jpeg'"}],key:"jpeg",staticClass:"body-list-container"},[i("div",{directives:[{name:"show",rawName:"v-show",value:"png"!==t.currentType,expression:"currentType !== 'png'"}],staticClass:"input-label",on:{click:function(e){return e.stopPropagation(),t.toggleListHandle()}}},[t._v("\n                    "+t._s(100*t.currentQuality.quality)+"%\n                    "),i("span",{staticClass:"list-label_tips"},[t._v("\n                        "+t._s(t.currentQualityLabel)+"\n                    ")])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showQualityList&&"png"!==t.currentType,expression:"showQualityList && currentType !== 'png'"}],staticClass:"list-body"},[i("ul",{staticClass:"list"},t._l(t.imageQualities,(function(e,o){return i("li",{key:e.quality,staticClass:"list-label",class:{"label--active":o===t.currentQualityIndex},on:{click:function(i){return t.changeQuality(e,o)}}},[t._v("\n                            "+t._s(100*e.quality)+"%\n                            "),i("span",{staticClass:"list-label_tips"},[t._v(t._s(t.qualityLabel(e)))])])})),0)])])]),i("div",{staticClass:"export-image-dialog_footer"},["png"===t.currentType?i("div",{staticClass:"export-image-dialog_tips"},[t._v("\n                "+t._s(t.pngText)+"\n            ")]):i("div",{staticClass:"export-image-dialog_tips"},[t._v(t._s(t.jpgText))])])],1)])},r=[],a=i(470),n=i(496),s=a["a"].create({name:"exportDialog",components:{Dialog:a["a"]},props:{resultImage:{type:[HTMLCanvasElement,Number],default:0},imageTypes:{type:Array,default(){return[{name:"PNG",value:"png"},{name:"JPG",value:"jpeg"}]}},visible:{type:Boolean,default:!1},imageQualities:{type:Array,default(){return[{quality:1,text:this.$t("export.lossless")},{quality:.98},{quality:.92,text:this.$t("export.balance")},{quality:.85}]}},pngText:{type:String,default:function(){return this.$t("export.pngText")}},jpgText:{type:String,default:function(){return this.$t("export.jpgText")}}},data(){return{showQualityList:!1,currentType:"png",currentQualityIndex:0,imageFileSize:0}},computed:{currentQualityLabel(){const t=this.currentQuality;if(!this.currentImageSize)return t.text||"";const e=`${this.$t("export.about")} ${this.currentImageSize}`;return t.text?`(${t.text},${e})`:`(${e})`},currentQuality(){return this.imageQualities[this.currentQualityIndex]},innerVisible:{get(){return this.visible},set(t){this.$emit("update:visible",t)}},currentImageSize(){if("jpeg"!==this.currentType||!this.imageFileSize)return"";const t=this.imageFileSize/1024,e=t>1024?(t/1024).toFixed(2)+"M":t.toFixed(1)+"KB";return e}},watch:{async currentType(t){"jpeg"===t&&this.calculateSize&&(this.imageFileSize=this.calculateSize(this.currentQuality.quality))}},async mounted(){this.currentType=this.imageTypes[0].value,document.addEventListener("click",this.hideList,!1)},beforeDestroy(){document.removeEventListener("click",this.hideList,!1)},methods:{changeType(t){this.currentType=t.value,this.hideList()},async changeQuality(t,e){this.currentQualityIndex=e,this.hideList(),this.calculateSize&&(this.imageFileSize=await this.calculateSize(t.quality))},toggleListHandle(){this.showQualityList=!this.showQualityList},qualityLabel(t){const e=t.text?`(${t.text})`:"";return e},hideList(){this.showQualityList=!1},calculateSize(t){const{resultImage:e}=this;return e&&"number"!==typeof e?Object(n["a"])(e.toDataURL("image/jpeg",t)).size:0}}}),l=s,c=(i(689),i(0)),d=Object(c["a"])(l,o,r,!1,null,null,null),g=d.exports;const p=window,u=p.document,h=p.URL||p.webkitURL||p,f=u.createElementNS("http://www.w3.org/1999/xhtml","a"),m="download"in f,b=t=>{const e=new MouseEvent("click");t.dispatchEvent(e)};function w(t,e){const i=4e3;if(window.navigator&&window.navigator.msSaveOrOpenBlob)return navigator.msSaveOrOpenBlob(t,e);let o=h.createObjectURL(t);if(m)f.href=o,f.download=e,b(f);else{const t=window.open(o,"_blank");t||(location.href=o)}return setTimeout(()=>{f.href="",h.revokeObjectURL(o),o=""},i),!0}var x=i(116),y=i(589);function v(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function k(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?v(Object(i),!0).forEach((function(e){C(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):v(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function C(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}e["a"]={methods:{openExportDialog(t={}){return t=k(k({},t),{parent:this.$root}),g.open(t)},downloadFiles({file:t,filename:e,type:i}){if(this.$emit("update:downloaded",!0),e||(e=this.getDefaultName(i)),t instanceof Blob)return w(t,e);if("string"===typeof t&&t.startsWith("data:")){const i=/image\/(\w+);/.exec(t),o=i&&i[1],r=Object(y["a"])(e,o);return w(Object(n["a"])(t),r)}},getDefaultName(t){const e=new Date,i=e.getFullYear(),o=e.getMonth()+1,r=e.getDate(),a=e.getHours(),n=e.getMinutes(),s=e.getSeconds(),l=o>9?o:"0"+o,c=r>9?r:"0"+r;return t=/jpe?g/.test(t)?"jpg":t,`fococlipping-${i}${l}${c}-${a}${n}${s}.${t}`},async updateDownload(t){return this.downloadMap={},x["a"].createBulkDownload({ids:t}).then(t=>{t.forEach(t=>{this.downloadMap[t.matting_id]=t.id})}).catch(()=>{})},updateResultImage(t){if(!t.length)return;const e=t.reduce((t,e)=>{const i=this.downloadMap[e.id];return i&&t.push({id:i,result_image:e.result_image}),t},[]);x["a"].updateBulkDownloadResult(e).catch(()=>{})}}}},733:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"guide__page",on:{click:function(e){return t.$emit("quit")}}},[o("div",{staticClass:"contain",style:t.containpositon},[o("img",{staticClass:"narrow",style:t.narrowposition,attrs:{src:i(694)}}),o("div",{staticClass:"collection__icon"},[o("icon",{style:{fontSize:"28px",color:"black"},attrs:{type:"star"}})],1),o("div",{staticClass:"like__tip"},[t._v("\n            "+t._s(t.$t("export.like"))+"\n        ")]),o("div",{staticClass:"tips"},[t._v(t._s(t.$t("export.AddFocoClipping")))]),o("div",{staticClass:"keyguaid__area"},[o("div",{staticClass:"control"},[t.isWindow?o("span",[t._v("Ctrl")]):o("img",{attrs:{src:i(695)}})]),o("div",{staticClass:"plus"},[t._v("+")]),o("div",{staticClass:"control"},[t._v("D")])])])])},r=[],a=(i(590),i(696),i(744)),n=i(5),s=i(23);const l=Object(s["a"])({buttonExpose(t){const e={event:"button_expose",event_id:39024,project_name:"gd_fc_web"};return Object.assign(e,t)},buttonClick(t){const e={event:"button_click",event_id:39008,project_name:"gd_fc_web"};return Object.assign(e,t)}});var c={components:{Icon:a["a"]},data(){return{position:"center"}},computed:{containpositon(){return"left"===this.position?{top:"50px",left:"400px"}:"right"===this.position?{top:"50px",right:"100px"}:{top:"50%",left:"50%",transform:"translateX(-50%) translateY(-50%)",display:"flex",flexDirection:"column",alignItems:"center"}},narrowposition(){return"left"===this.position?{top:"-40px",left:"-200px",transform:"rotateY(180deg)"}:"right"===this.position?{top:"-40px",left:"70px"}:{display:"none"}},isWindow(){return n["a"].isWindows}},created(){n["a"].isEdge||n["a"].isChrome||n["a"].isFirefox?this.position="right":n["a"].isSafari?this.position="left":this.position="center",l.buttonExpose({button_name:"center"===this.position?"收藏引导_不带箭头":"收藏引导_带箭头"})}},d=c,g=(i(711),i(0)),p=Object(g["a"])(d,o,r,!1,null,"352950f7",null);e["a"]=p.exports},741:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ui-progress"},[i("div",{staticClass:"ui-progress-bar",style:{backgroundColor:t.processStyle.barBgColor,borderRadius:t.processStyle.borderRadius}},[i("i",{staticClass:"ui-progress-bar-flag",style:{width:t.value+"%",backgroundColor:t.processStyle.flagBgColor,borderRadius:t.processStyle.borderRadius}})]),i("div",{staticClass:"ui-progress-info"},[i("em",[t._v(t._s(t.value.toFixed(2)))]),i("span",[t._v("%")])])])},r=[],a={props:{styleMode:{type:String,default:"blue"},value:{type:Number,default:0}},data(){return{processStyle:{barBgColor:"#dce4ff",flagBgColor:"#005cf9",borderRadius:"4px"}}},created(){"dark"===this.styleMode&&(this.processStyle={barBgColor:"#f1f5f6",flagBgColor:"#000000",borderRadius:"unset"})}},n=a,s=(i(647),i(0)),l=Object(s["a"])(n,o,r,!1,null,null,null);e["default"]=l.exports},884:function(t,e,i){var o=i(1286);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var r=i(3).default;r("63b93ec2",o,!0,{sourceMap:!1})},885:function(t,e,i){var o=i(1288);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var r=i(3).default;r("3d42fd21",o,!0,{sourceMap:!1})},886:function(t,e,i){var o=i(1290);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var r=i(3).default;r("34b13ad4",o,!0,{sourceMap:!1})}}]);